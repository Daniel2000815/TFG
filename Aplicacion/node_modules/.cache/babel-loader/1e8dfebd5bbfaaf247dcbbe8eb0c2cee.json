{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\PrimitiveNode.js\";\nimport React, { useContext } from \"react\";\nimport Shader from \"./Shader.js\";\nimport { fs } from \"./fragmentShader.js\";\nimport { useEffect } from \"react\";\nimport Button from \"@mui/material/Button\";\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\nimport FloatInput from \"./FloatInput.js\";\nimport Dropdown from \"./Dropdown\";\nimport GraphContext from \"./GraphContext.js\";\nimport CustomHandle from \"./CustomHandle.js\";\nvar Primitives = {\n  Sphere: \"Sphere\",\n  Box: \"Box\"\n};\nexport default function PrimitiveNode(_ref) {\n  var data = _ref.data,\n      id = _ref.id;\n\n  var _React$useState = React.useState(Primitives.Sphere),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      primitive = _React$useState2[0],\n      setPrimitive = _React$useState2[1];\n\n  var _React$useState3 = React.useState(data.sdf),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      sdf = _React$useState4[0],\n      setSdf = _React$useState4[1];\n\n  var _React$useState5 = React.useState(true),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      showCanvas = _React$useState6[0],\n      setShowCanvas = _React$useState6[1];\n\n  var _React$useState7 = React.useState([1.0, 1.0, 1.0]),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      inputs = _React$useState8[0],\n      setInputs = _React$useState8[1];\n\n  var _React$useState9 = React.useState([\"Radius\", \"\", \"\"]),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      inputLabels = _React$useState10[0],\n      setInputLabels = _React$useState10[1];\n\n  var _React$useState11 = React.useState([true, false, false]),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      inputsActive = _React$useState12[0],\n      setInputsActive = _React$useState12[1];\n\n  var sharedFunctions = useContext(GraphContext);\n\n  var handleChange = function handleChange(newPrimitive, newSdf) {\n    if (newPrimitive == Primitives.Sphere) {\n      console.log(\"YES\");\n    }\n\n    setPrimitive(newPrimitive);\n    setSdf(newSdf);\n  };\n\n  useEffect(function () {}, [data]);\n  useEffect(function () {\n    sharedFunctions.updateNodeSdf(id, sdf);\n  }, [sdf]);\n  useEffect(function () {\n    console.log(\"ACTUALIZADO SDF\");\n\n    if (primitive == Primitives.Sphere) {\n      setSdf(\"sphere(p, \".concat(inputs[0].toFixed(4), \")\"));\n    } else if (primitive == Primitives.Box) {\n      setSdf(\"box(p, vec3(\\n          \".concat(inputs[0].toFixed(4), \", \\n          \").concat(inputs[1].toFixed(4), \", \\n          \").concat(inputs[2].toFixed(4), \"\\n          )\\n        )\"));\n    }\n  }, [primitive, inputs]);\n\n  var prepareInputs = function prepareInputs(label1) {\n    var label2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    var label3 = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"\";\n    setInputLabels([label1, label2, label3]);\n    setInputsActive([label1, label2, label3]);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-node\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-node-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, \"Primitive\"), /*#__PURE__*/React.createElement(Dropdown, {\n    value: primitive,\n    onChange: setPrimitive,\n    items: [Primitives.Sphere, Primitives.Box],\n    label: \"Primitives\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }), inputsActive[0] ? /*#__PURE__*/React.createElement(FloatInput, {\n    val: inputs[0],\n    handleChange: function handleChange(newVal) {\n      return setInputs([newVal, inputs[1], inputs[2]]);\n    },\n    label: inputLabels[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 26\n    }\n  }) : null, inputsActive[1] ? /*#__PURE__*/React.createElement(FloatInput, {\n    val: inputs[1],\n    handleChange: function handleChange(newVal) {\n      return setInputs([inputs[0], newVal, inputs[2]]);\n    },\n    label: inputLabels[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 26\n    }\n  }) : null, inputsActive[2] ? /*#__PURE__*/React.createElement(FloatInput, {\n    val: inputs[2],\n    handleChange: function handleChange(newVal) {\n      return setInputs([inputs[0], inputs[1], newVal]);\n    },\n    label: inputLabels[2],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 26\n    }\n  }) : null, inputs[0], id, data.sdf, \"CHILDREN: \", data.children, /*#__PURE__*/React.createElement(CustomHandle, {\n    type: \"source\",\n    onConnect: function onConnect(params) {\n      return sharedFunctions.connectSdf(params.source, params.target, params);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }\n  }), showCanvas ? /*#__PURE__*/React.createElement(Shader, {\n    shader: fs(sdf),\n    uniforms: {\n      color: {\n        type: \"3fv\",\n        value: [1.0, 1.0, 0.0]\n      }\n    },\n    style: {\n      margin: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }) : null, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowCanvas(!showCanvas);\n    },\n    variant: \"contained\",\n    className: \"custom-node-creater\",\n    size: \"small\",\n    endIcon: showCanvas ? /*#__PURE__*/React.createElement(KeyboardArrowUpIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 24\n      }\n    }) : /*#__PURE__*/React.createElement(KeyboardArrowDownIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 50\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }\n  }, showCanvas ? \"Hide canvas\" : \"Show canvas\"));\n}","map":{"version":3,"names":["React","useContext","Shader","fs","useEffect","Button","KeyboardArrowDownIcon","KeyboardArrowUpIcon","FloatInput","Dropdown","GraphContext","CustomHandle","Primitives","Sphere","Box","PrimitiveNode","data","id","useState","primitive","setPrimitive","sdf","setSdf","showCanvas","setShowCanvas","inputs","setInputs","inputLabels","setInputLabels","inputsActive","setInputsActive","sharedFunctions","handleChange","newPrimitive","newSdf","console","log","updateNodeSdf","toFixed","prepareInputs","label1","label2","label3","newVal","children","params","connectSdf","source","target","color","type","value","margin"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/PrimitiveNode.js"],"sourcesContent":["import React, {useContext} from \"react\";\r\nimport Shader from \"./Shader.js\";\r\nimport { fs } from \"./fragmentShader.js\";\r\nimport { useEffect } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\r\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\r\nimport FloatInput from \"./FloatInput.js\";\r\nimport Dropdown from \"./Dropdown\";\r\nimport GraphContext from \"./GraphContext.js\";\r\nimport CustomHandle from \"./CustomHandle.js\";\r\n\r\nconst Primitives = {\r\n  Sphere: \"Sphere\",\r\n  Box: \"Box\",\r\n};\r\n\r\nexport default function PrimitiveNode({ data, id }) {\r\n  const [primitive, setPrimitive] = React.useState(Primitives.Sphere);\r\n  const [sdf, setSdf] = React.useState(data.sdf);\r\n  const [showCanvas, setShowCanvas] = React.useState(true);\r\n  const [inputs, setInputs] = React.useState([1.0, 1.0, 1.0]);\r\n  const [inputLabels, setInputLabels] = React.useState([\"Radius\", \"\", \"\"]);\r\n  const [inputsActive, setInputsActive] = React.useState([true, false, false]);\r\n\r\n  const sharedFunctions = useContext(GraphContext);\r\n\r\n  const handleChange = (newPrimitive, newSdf) => {\r\n    if (newPrimitive == Primitives.Sphere) {\r\n      console.log(\"YES\");\r\n    }\r\n    setPrimitive(newPrimitive);\r\n    setSdf(newSdf);\r\n  };\r\n\r\n  useEffect(() => {\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    sharedFunctions.updateNodeSdf(id, sdf);\r\n  }, [sdf]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"ACTUALIZADO SDF\");\r\n    if (primitive == Primitives.Sphere) {\r\n      setSdf(`sphere(p, ${inputs[0].toFixed(4)})`);\r\n    } else if (primitive == Primitives.Box) {\r\n      setSdf(\r\n        `box(p, vec3(\r\n          ${inputs[0].toFixed(4)}, \r\n          ${inputs[1].toFixed(4)}, \r\n          ${inputs[2].toFixed(4)}\r\n          )\r\n        )`\r\n      );\r\n    }\r\n  }, [primitive, inputs]);\r\n\r\n  const prepareInputs = (label1, label2=\"\", label3=\"\") =>{\r\n    setInputLabels([label1, label2, label3]);\r\n    setInputsActive([label1, label2, label3]);\r\n  }\r\n\r\n  return (\r\n    <div className=\"custom-node\">\r\n      <div className=\"custom-node-header\">Primitive</div>\r\n\r\n      <Dropdown value={primitive} onChange={setPrimitive} items={[Primitives.Sphere, Primitives.Box]} label=\"Primitives\"/> \r\n      {inputsActive[0] ? <FloatInput val={inputs[0]} handleChange={(newVal) => setInputs([newVal, inputs[1], inputs[2]])} label={inputLabels[0]} /> : null}\r\n      {inputsActive[1] ? <FloatInput val={inputs[1]} handleChange={(newVal) => setInputs([inputs[0], newVal, inputs[2]])} label={inputLabels[1]} /> : null}\r\n      {inputsActive[2] ? <FloatInput val={inputs[2]} handleChange={(newVal) => setInputs([inputs[0], inputs[1], newVal])} label={inputLabels[2]} /> : null}\r\n\r\n      {inputs[0]}\r\n      {id}\r\n      {data.sdf}\r\n      {\"CHILDREN: \"}\r\n      {data.children}\r\n\r\n      <CustomHandle type=\"source\" onConnect={(params) => sharedFunctions.connectSdf(params.source, params.target, params)}/>\r\n\r\n      {showCanvas ? (\r\n        <Shader\r\n          shader={fs(sdf)}\r\n          uniforms={{ color: { type: \"3fv\", value: [1.0, 1.0, 0.0] } }}\r\n          style={{ margin: \"10px\" }}\r\n        />\r\n      ) : null}\r\n\r\n      <Button\r\n        onClick={() => setShowCanvas(!showCanvas)}\r\n        variant=\"contained\"\r\n        className=\"custom-node-creater\"\r\n        size=\"small\"\r\n        endIcon={\r\n          showCanvas ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />\r\n        }\r\n      >\r\n        {showCanvas ? \"Hide canvas\" : \"Show canvas\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}