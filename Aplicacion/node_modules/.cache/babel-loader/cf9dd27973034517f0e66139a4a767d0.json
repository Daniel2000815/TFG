{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport { setStatic } from 'recompose';\nimport classNames from 'classnames';\nimport { on } from 'dom-lib';\nimport { setInlineStyles, setTranslate3d, setTransitionDuration, closest, getPosition, getEdgeOffset, getScrollingParent } from './utils';\nimport { prefix, defaultProps, getUnhandledProps } from '../utils';\nimport ListItem from './ListItem';\nimport Manager from './Manager';\nimport AutoScroller from './AutoScroller';\nimport ListContext from './ListContext';\nvar NodeType = {\n  Canvas: 'CANVAS',\n  Anchor: 'A',\n  Button: 'BUTTON',\n  Input: 'INPUT',\n  Option: 'OPTION',\n  Textarea: 'TEXTAREA',\n  Select: 'SELECT'\n};\nvar interactiveElements = [NodeType.Anchor, NodeType.Button, NodeType.Input, NodeType.Option, NodeType.Textarea, NodeType.Select];\n\nvar List = /*#__PURE__*/function (_React$Component) {\n  _inheritsLoose(List, _React$Component);\n\n  function List() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\n    _this.state = {\n      sorting: false,\n      manager: new Manager()\n    };\n    _this.containerRef = React.createRef();\n    _this.containerBoundingRect = void 0;\n    _this.touched = void 0;\n    _this.scrollContainer = void 0;\n    _this.scrollContainerInitialScroll = void 0;\n    _this.autoScroller = void 0;\n    _this.windowInitialScroll = void 0;\n    _this.animatedNodeOffset = [];\n    _this.activeNodeBoundingClientRect = void 0;\n    _this.activeNodeGhost = void 0;\n    _this.activeNodeFlowBody = void 0;\n    _this.activeNodeFlowBodyTranslate = void 0;\n    _this.activeNodeMarginOffset = void 0;\n    _this.activeNodeOffsetEdge = void 0;\n    _this.activeNodeOldIndex = void 0;\n    _this.activeNodeNextIndex = void 0;\n    _this.activeNodeTranslateMin = void 0;\n    _this.activeNodeTranslateMax = void 0;\n    _this.windowStartListener = void 0;\n    _this.windowEndListener = void 0;\n    _this.sortMouseMoveListener = void 0;\n    _this.sortMouseEndListener = void 0;\n    _this.cursorInitialOffset = void 0;\n    _this.cursorCurrentPosition = void 0;\n    _this.pressTimer = void 0;\n\n    _this.handleStart = function (event) {\n      var _this$props = _this.props,\n          sortable = _this$props.sortable,\n          pressDelay = _this$props.pressDelay;\n      var _this$state = _this.state,\n          sorting = _this$state.sorting,\n          manager = _this$state.manager;\n      var node = closest(event.target, function (el) {\n        return !!manager.getNodeManagerRef(el);\n      });\n      var curManager = manager.getNodeManagerRef(node);\n\n      if (!((event === null || event === void 0 ? void 0 : event.target) && node instanceof HTMLElement && curManager)) {\n        return;\n      }\n\n      var _curManager$info = curManager.info,\n          disabled = _curManager$info.disabled,\n          curNodeManager = _curManager$info.manager;\n\n      if ( //is sortable\n      sortable && //is list item\n      !disabled && //is not secondary button pressed\n      event.button !== 2 && //is this list\n      curNodeManager === manager && //is not sorting\n      !sorting && //excludes interactive elements\n      !node.contains(closest(event.target, function (el) {\n        return interactiveElements.includes(el.tagName) || el.contentEditable === 'true';\n      }))) {\n        event.preventDefault();\n        _this.touched = true;\n        _this.cursorCurrentPosition = getPosition(event);\n        manager.setActive(curManager);\n        _this.pressTimer = setTimeout(function () {\n          return _this.handlePress(event);\n        }, pressDelay);\n      }\n    };\n\n    _this.handleEnd = function () {\n      var _this$state2 = _this.state,\n          sorting = _this$state2.sorting,\n          manager = _this$state2.manager;\n      _this.touched = false;\n\n      if (!sorting) {\n        clearTimeout(_this.pressTimer);\n        manager.setActive(null);\n      }\n    };\n\n    _this.handlePress = function _callee(event) {\n      var _this$props2, classPrefix, onSortStart, manager, _manager$getActive, activeNode, info, index, collection, addItemPrefix, style, activeNodeMargin;\n\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this$props2 = _this.props, classPrefix = _this$props2.classPrefix, onSortStart = _this$props2.onSortStart;\n              manager = _this.state.manager;\n              _manager$getActive = manager.getActive(), activeNode = _manager$getActive.node, info = _manager$getActive.info; // return if no active node\n\n              if (!(!activeNode || !info)) {\n                _context.next = 5;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 5:\n              index = info.index, collection = info.collection;\n              addItemPrefix = prefix(classPrefix + '-item');\n              style = window.getComputedStyle(activeNode);\n              activeNodeMargin = {\n                bottom: parseFloat(style.marginBottom),\n                left: parseFloat(style.marginLeft),\n                right: parseFloat(style.marginRight),\n                top: parseFloat(style.marginTop)\n              };\n              _this.activeNodeMarginOffset = {\n                x: activeNodeMargin.left + activeNodeMargin.right,\n                y: Math.max(activeNodeMargin.top, activeNodeMargin.bottom)\n              };\n              _this.activeNodeBoundingClientRect = activeNode.getBoundingClientRect();\n              _this.containerBoundingRect = _this.scrollContainer.getBoundingClientRect();\n              _this.activeNodeOldIndex = index;\n              _this.activeNodeNextIndex = index;\n              _this.activeNodeOffsetEdge = getEdgeOffset(activeNode, _this.containerRef.current);\n              _this.cursorInitialOffset = getPosition(event);\n              _this.scrollContainerInitialScroll = {\n                left: _this.scrollContainer.scrollLeft,\n                top: _this.scrollContainer.scrollTop\n              };\n              _this.windowInitialScroll = {\n                left: window.pageXOffset,\n                top: window.pageYOffset\n              };\n              _this.activeNodeFlowBody = document.body.appendChild(activeNode.cloneNode(true));\n              _this.activeNodeFlowBody && _this.activeNodeFlowBody.classList.add(addItemPrefix('helper'));\n              setInlineStyles(_this.activeNodeFlowBody, {\n                position: 'fixed',\n                width: _this.activeNodeBoundingClientRect.width + \"px\",\n                height: _this.activeNodeBoundingClientRect.height + \"px\",\n                left: _this.activeNodeBoundingClientRect.left - activeNodeMargin.left + \"px\",\n                top: _this.activeNodeBoundingClientRect.top - activeNodeMargin.top + \"px\"\n              });\n              _this.activeNodeGhost = activeNode;\n              activeNode.classList.add(addItemPrefix('holder'));\n              _this.activeNodeTranslateMin = {\n                y: _this.containerBoundingRect.top - _this.activeNodeBoundingClientRect.top - _this.activeNodeBoundingClientRect.height / 2\n              };\n              _this.activeNodeTranslateMax = {\n                y: _this.containerBoundingRect.top + _this.containerBoundingRect.height - _this.activeNodeBoundingClientRect.top - _this.activeNodeBoundingClientRect.height / 2\n              };\n              _this.sortMouseMoveListener = on(window, 'mousemove', _this.handleSortMove, {\n                passive: false\n              });\n              _this.sortMouseEndListener = on(window, 'mouseup', _this.handleSortEnd, {\n                passive: false\n              });\n\n              _this.setState({\n                sorting: true\n              });\n\n              if (onSortStart) {\n                onSortStart({\n                  collection: collection,\n                  node: activeNode,\n                  oldIndex: _this.activeNodeOldIndex,\n                  newIndex: _this.activeNodeNextIndex\n                }, event);\n              }\n\n            case 29:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    };\n\n    _this.handleSortMove = function (event) {\n      var _this$props3 = _this.props,\n          onSortMove = _this$props3.onSortMove,\n          autoScroll = _this$props3.autoScroll;\n      var manager = _this.state.manager; // Update helper position\n\n      var offset = getPosition(event);\n      var translate = {\n        x: offset.x - _this.cursorInitialOffset.x,\n        y: offset.y - _this.cursorInitialOffset.y\n      }; // Adjust for window scroll\n\n      translate.x -= window.pageXOffset - _this.windowInitialScroll.left;\n      translate.y -= window.pageYOffset - _this.windowInitialScroll.top;\n      _this.activeNodeFlowBodyTranslate = translate;\n      setTranslate3d(_this.activeNodeFlowBody, translate);\n\n      _this.animateNodes(); // auto scroll\n\n\n      if (autoScroll) {\n        _this.autoScroller.update({\n          width: _this.activeNodeBoundingClientRect.width,\n          height: _this.activeNodeBoundingClientRect.height,\n          translate: _this.activeNodeFlowBodyTranslate,\n          maxTranslate: _this.activeNodeTranslateMax,\n          minTranslate: _this.activeNodeTranslateMin\n        });\n      }\n\n      if (onSortMove) {\n        onSortMove({\n          collection: manager.getActive().info.collection,\n          node: manager.getActive().node,\n          oldIndex: _this.activeNodeOldIndex,\n          newIndex: _this.activeNodeNextIndex\n        }, event);\n      }\n    };\n\n    _this.handleSortEnd = function (event) {\n      var _this$props4 = _this.props,\n          onSortEnd = _this$props4.onSortEnd,\n          onSort = _this$props4.onSort,\n          classPrefix = _this$props4.classPrefix,\n          transitionDuration = _this$props4.transitionDuration;\n      var manager = _this.state.manager;\n      var activeManagerRef = manager.getActive();\n      var activeCollection = activeManagerRef ? activeManagerRef.info.collection : 0;\n      var managerRefs = manager.getOrderedRefs(activeCollection);\n      var addItemPrefix = prefix(classPrefix + '-item'); // Remove the event listeners\n\n      _this.sortMouseMoveListener.off();\n\n      _this.sortMouseEndListener.off();\n\n      setTransitionDuration(_this.activeNodeFlowBody, transitionDuration);\n      setTranslate3d(_this.activeNodeFlowBody, {\n        x: _this.holderTranslate.x - _this.containerScrollDelta.left,\n        y: _this.holderTranslate.y - _this.containerScrollDelta.top\n      }); // wait for animation\n\n      setTimeout(function () {\n        // Remove the helper from the DOM\n        if (_this.activeNodeFlowBody) {\n          _this.activeNodeFlowBody.parentNode && _this.activeNodeFlowBody.parentNode.removeChild(_this.activeNodeFlowBody);\n          _this.activeNodeFlowBody = null;\n        }\n\n        if (_this.activeNodeGhost) {\n          _this.activeNodeGhost.classList.remove(addItemPrefix('holder'));\n\n          setTranslate3d(_this.activeNodeGhost, null);\n          _this.animatedNodeOffset = [];\n        }\n\n        for (var i = 0, len = managerRefs.length; i < len; i++) {\n          var managerRef = managerRefs[i];\n          var el = managerRef.node; // Clear the cached offsetTop / offsetLeft value\n\n          managerRef.edgeOffset = null; // Remove the transforms / transitions\n\n          setTranslate3d(el, null);\n          setTransitionDuration(el, null);\n        } // Stop autoScroll\n\n\n        _this.autoScroller.clear(); // Update manager state\n\n\n        manager.setActive(null);\n\n        _this.setState({\n          sorting: false\n        });\n\n        if (typeof onSortEnd === 'function') {\n          onSortEnd({\n            collection: activeCollection,\n            node: activeManagerRef.node,\n            newIndex: _this.activeNodeNextIndex,\n            oldIndex: _this.activeNodeOldIndex\n          }, event);\n        }\n\n        if (typeof onSort === 'function') {\n          onSort({\n            collection: activeCollection,\n            node: activeManagerRef.node,\n            newIndex: _this.activeNodeNextIndex,\n            oldIndex: _this.activeNodeOldIndex\n          }, event);\n        }\n      }, transitionDuration);\n    };\n\n    return _this;\n  }\n\n  var _proto = List.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    var _this2 = this;\n\n    if (this.containerRef.current instanceof HTMLElement) {\n      this.scrollContainer = getScrollingParent(this.containerRef.current) || this.containerRef.current;\n      this.autoScroller = new AutoScroller(this.scrollContainer, function (offset) {\n        _this2.activeNodeFlowBodyTranslate.x += offset.left;\n        _this2.activeNodeFlowBodyTranslate.y += offset.top;\n      });\n      this.windowStartListener = on(this.containerRef.current, 'mousedown', this.handleStart, {\n        passive: false\n      });\n      this.windowEndListener = on(this.containerRef.current, 'mouseup', this.handleEnd, {\n        passive: false\n      });\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    var _this$windowStartList, _this$windowEndListen;\n\n    (_this$windowStartList = this.windowStartListener) === null || _this$windowStartList === void 0 ? void 0 : _this$windowStartList.off();\n    (_this$windowEndListen = this.windowEndListener) === null || _this$windowEndListen === void 0 ? void 0 : _this$windowEndListen.off();\n  };\n\n  _proto.animateNodes = function animateNodes() {\n    var transitionDuration = this.props.transitionDuration;\n    var manager = this.state.manager;\n    var listItemManagerRefs = manager.getOrderedRefs();\n    var sortingOffset = {\n      left: this.activeNodeOffsetEdge.left + this.activeNodeFlowBodyTranslate.x + this.containerScrollDelta.left,\n      top: this.activeNodeOffsetEdge.top + this.activeNodeFlowBodyTranslate.y + this.containerScrollDelta.top\n    };\n    this.activeNodeNextIndex = -1;\n\n    for (var i = 0, len = listItemManagerRefs.length; i < len; i++) {\n      var _listItemManagerRefs$ = listItemManagerRefs[i],\n          node = _listItemManagerRefs$.node,\n          index = _listItemManagerRefs$.info.index,\n          edgeOffset = _listItemManagerRefs$.edgeOffset;\n      var width = node.offsetWidth;\n      var height = node.offsetHeight;\n      var offset = {\n        height: this.activeNodeBoundingClientRect.height > height ? height / 2 : this.activeNodeBoundingClientRect.height / 2,\n        width: this.activeNodeBoundingClientRect.width > width ? width / 2 : this.activeNodeBoundingClientRect.width / 2\n      };\n      var translate = {\n        x: 0,\n        y: 0\n      }; // If we haven't cached the node's offsetTop / offsetLeft value\n\n      var curEdgeOffset = edgeOffset || getEdgeOffset(node, this.containerRef.current);\n      listItemManagerRefs[i].edgeOffset = curEdgeOffset; // Get a reference to the next node\n\n      var prvNode = i > 0 && listItemManagerRefs[i - 1];\n      var nextNode = i < len - 1 && listItemManagerRefs[i + 1]; // Also cache the node's edge offset if needed.\n\n      if (prvNode && !prvNode.edgeOffset) {\n        prvNode.edgeOffset = getEdgeOffset(prvNode.node, this.containerRef.current);\n      }\n\n      if (nextNode && !nextNode.edgeOffset) {\n        nextNode.edgeOffset = getEdgeOffset(nextNode.node, this.containerRef.current);\n      } // If the node is the one we're currently animating, skip it\n\n\n      if (index === this.activeNodeOldIndex) {\n        continue;\n      }\n\n      var distanceTop = sortingOffset.top + this.windowScrollDelta.top;\n\n      if (prvNode && index > this.activeNodeOldIndex && distanceTop + offset.height >= curEdgeOffset.top) {\n        translate.y = prvNode.edgeOffset.top - curEdgeOffset.top;\n        this.activeNodeNextIndex = index;\n      } else if (nextNode && index < this.activeNodeOldIndex && distanceTop <= curEdgeOffset.top + offset.height) {\n        translate.y = nextNode.edgeOffset.top - curEdgeOffset.top;\n\n        if (this.activeNodeNextIndex === -1) {\n          this.activeNodeNextIndex = index;\n        }\n      }\n\n      setTransitionDuration(node, transitionDuration);\n      setTranslate3d(node, translate); // translate holder\n\n      this.animatedNodeOffset[index] = translate;\n      setTranslate3d(this.activeNodeGhost, this.holderTranslate);\n    }\n\n    if (this.activeNodeNextIndex === -1) {\n      this.activeNodeNextIndex = this.activeNodeOldIndex;\n    }\n  };\n\n  _proto.render = function render() {\n    var _classNames;\n\n    var _this$props5 = this.props,\n        className = _this$props5.className,\n        classPrefix = _this$props5.classPrefix,\n        bordered = _this$props5.bordered,\n        hover = _this$props5.hover,\n        size = _this$props5.size,\n        sortable = _this$props5.sortable,\n        children = _this$props5.children,\n        rest = _objectWithoutPropertiesLoose(_this$props5, [\"className\", \"classPrefix\", \"bordered\", \"hover\", \"size\", \"sortable\", \"children\"]);\n\n    var _this$state3 = this.state,\n        sorting = _this$state3.sorting,\n        manager = _this$state3.manager;\n    var addPrefix = prefix(classPrefix);\n    var unhandled = getUnhandledProps(List, rest);\n    var classes = classNames(classPrefix, className, (_classNames = {}, _classNames[addPrefix('bordered')] = bordered, _classNames[addPrefix('sortable')] = sortable, _classNames[addPrefix('sorting')] = sorting, _classNames[addPrefix('hover')] = hover, _classNames));\n    var contextValue = {\n      bordered: bordered,\n      size: size,\n      manager: manager\n    };\n    return React.createElement(ListContext.Provider, {\n      value: contextValue\n    }, React.createElement(\"div\", _extends({\n      ref: this.containerRef,\n      className: classes\n    }, unhandled), children));\n  };\n\n  _createClass(List, [{\n    key: \"containerScrollDelta\",\n    get: function get() {\n      return {\n        left: this.scrollContainer.scrollLeft - this.scrollContainerInitialScroll.left,\n        top: this.scrollContainer.scrollTop - this.scrollContainerInitialScroll.top\n      };\n    }\n  }, {\n    key: \"windowScrollDelta\",\n    get: function get() {\n      return {\n        left: window.pageXOffset - this.windowInitialScroll.left,\n        top: window.pageYOffset - this.windowInitialScroll.top\n      };\n    }\n  }, {\n    key: \"holderTranslate\",\n    get: function get() {\n      return this.animatedNodeOffset.reduce(function (acc, item) {\n        return {\n          x: acc.x - item.x,\n          y: acc.y - item.y\n        };\n      }, {\n        x: 0,\n        y: 0\n      });\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nList.propTypes = {\n  className: PropTypes.string,\n  classPrefix: PropTypes.string,\n  bordered: PropTypes.bool,\n  hover: PropTypes.bool,\n  sortable: PropTypes.bool,\n  size: PropTypes.oneOf(['lg', 'md', 'sm']),\n  autoScroll: PropTypes.bool,\n  pressDelay: PropTypes.number,\n  transitionDuration: PropTypes.number,\n  onSortStart: PropTypes.func,\n  onSortMove: PropTypes.func,\n  onSortEnd: PropTypes.func,\n  onSort: PropTypes.func\n};\nList.defaultProps = {\n  size: 'md',\n  autoScroll: true,\n  pressDelay: 0,\n  transitionDuration: 300\n};\nvar EnhancedList = defaultProps({\n  classPrefix: 'list'\n})(List);\nsetStatic('Item', ListItem)(EnhancedList);\nexport default EnhancedList;","map":{"version":3,"names":["_extends","_objectWithoutPropertiesLoose","_regeneratorRuntime","_createClass","_inheritsLoose","React","PropTypes","setStatic","classNames","on","setInlineStyles","setTranslate3d","setTransitionDuration","closest","getPosition","getEdgeOffset","getScrollingParent","prefix","defaultProps","getUnhandledProps","ListItem","Manager","AutoScroller","ListContext","NodeType","Canvas","Anchor","Button","Input","Option","Textarea","Select","interactiveElements","List","_React$Component","_this","_len","arguments","length","args","Array","_key","call","apply","concat","state","sorting","manager","containerRef","createRef","containerBoundingRect","touched","scrollContainer","scrollContainerInitialScroll","autoScroller","windowInitialScroll","animatedNodeOffset","activeNodeBoundingClientRect","activeNodeGhost","activeNodeFlowBody","activeNodeFlowBodyTranslate","activeNodeMarginOffset","activeNodeOffsetEdge","activeNodeOldIndex","activeNodeNextIndex","activeNodeTranslateMin","activeNodeTranslateMax","windowStartListener","windowEndListener","sortMouseMoveListener","sortMouseEndListener","cursorInitialOffset","cursorCurrentPosition","pressTimer","handleStart","event","_this$props","props","sortable","pressDelay","_this$state","node","target","el","getNodeManagerRef","curManager","HTMLElement","_curManager$info","info","disabled","curNodeManager","button","contains","includes","tagName","contentEditable","preventDefault","setActive","setTimeout","handlePress","handleEnd","_this$state2","clearTimeout","_callee","_this$props2","classPrefix","onSortStart","_manager$getActive","activeNode","index","collection","addItemPrefix","style","activeNodeMargin","async","_callee$","_context","prev","next","getActive","abrupt","window","getComputedStyle","bottom","parseFloat","marginBottom","left","marginLeft","right","marginRight","top","marginTop","x","y","Math","max","getBoundingClientRect","current","scrollLeft","scrollTop","pageXOffset","pageYOffset","document","body","appendChild","cloneNode","classList","add","position","width","height","handleSortMove","passive","handleSortEnd","setState","oldIndex","newIndex","stop","_this$props3","onSortMove","autoScroll","offset","translate","animateNodes","update","maxTranslate","minTranslate","_this$props4","onSortEnd","onSort","transitionDuration","activeManagerRef","activeCollection","managerRefs","getOrderedRefs","off","holderTranslate","containerScrollDelta","parentNode","removeChild","remove","i","len","managerRef","edgeOffset","clear","_proto","prototype","componentDidMount","_this2","componentWillUnmount","_this$windowStartList","_this$windowEndListen","listItemManagerRefs","sortingOffset","_listItemManagerRefs$","offsetWidth","offsetHeight","curEdgeOffset","prvNode","nextNode","distanceTop","windowScrollDelta","render","_classNames","_this$props5","className","bordered","hover","size","children","rest","_this$state3","addPrefix","unhandled","classes","contextValue","createElement","Provider","value","ref","key","get","reduce","acc","item","Component","propTypes","string","bool","oneOf","number","func","EnhancedList"],"sources":["G:/gitlab/TFG/Aplicacion/node_modules/rsuite/es/List/List.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\r\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\r\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\r\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\r\nimport _inheritsLoose from \"@babel/runtime/helpers/esm/inheritsLoose\";\r\nimport * as React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { setStatic } from 'recompose';\r\nimport classNames from 'classnames';\r\nimport { on } from 'dom-lib';\r\nimport { setInlineStyles, setTranslate3d, setTransitionDuration, closest, getPosition, getEdgeOffset, getScrollingParent } from './utils';\r\nimport { prefix, defaultProps, getUnhandledProps } from '../utils';\r\nimport ListItem from './ListItem';\r\nimport Manager from './Manager';\r\nimport AutoScroller from './AutoScroller';\r\nimport ListContext from './ListContext';\r\nvar NodeType = {\r\n  Canvas: 'CANVAS',\r\n  Anchor: 'A',\r\n  Button: 'BUTTON',\r\n  Input: 'INPUT',\r\n  Option: 'OPTION',\r\n  Textarea: 'TEXTAREA',\r\n  Select: 'SELECT'\r\n};\r\nvar interactiveElements = [NodeType.Anchor, NodeType.Button, NodeType.Input, NodeType.Option, NodeType.Textarea, NodeType.Select];\r\n\r\nvar List =\r\n/*#__PURE__*/\r\nfunction (_React$Component) {\r\n  _inheritsLoose(List, _React$Component);\r\n\r\n  function List() {\r\n    var _this;\r\n\r\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\r\n      args[_key] = arguments[_key];\r\n    }\r\n\r\n    _this = _React$Component.call.apply(_React$Component, [this].concat(args)) || this;\r\n    _this.state = {\r\n      sorting: false,\r\n      manager: new Manager()\r\n    };\r\n    _this.containerRef = React.createRef();\r\n    _this.containerBoundingRect = void 0;\r\n    _this.touched = void 0;\r\n    _this.scrollContainer = void 0;\r\n    _this.scrollContainerInitialScroll = void 0;\r\n    _this.autoScroller = void 0;\r\n    _this.windowInitialScroll = void 0;\r\n    _this.animatedNodeOffset = [];\r\n    _this.activeNodeBoundingClientRect = void 0;\r\n    _this.activeNodeGhost = void 0;\r\n    _this.activeNodeFlowBody = void 0;\r\n    _this.activeNodeFlowBodyTranslate = void 0;\r\n    _this.activeNodeMarginOffset = void 0;\r\n    _this.activeNodeOffsetEdge = void 0;\r\n    _this.activeNodeOldIndex = void 0;\r\n    _this.activeNodeNextIndex = void 0;\r\n    _this.activeNodeTranslateMin = void 0;\r\n    _this.activeNodeTranslateMax = void 0;\r\n    _this.windowStartListener = void 0;\r\n    _this.windowEndListener = void 0;\r\n    _this.sortMouseMoveListener = void 0;\r\n    _this.sortMouseEndListener = void 0;\r\n    _this.cursorInitialOffset = void 0;\r\n    _this.cursorCurrentPosition = void 0;\r\n    _this.pressTimer = void 0;\r\n\r\n    _this.handleStart = function (event) {\r\n      var _this$props = _this.props,\r\n          sortable = _this$props.sortable,\r\n          pressDelay = _this$props.pressDelay;\r\n      var _this$state = _this.state,\r\n          sorting = _this$state.sorting,\r\n          manager = _this$state.manager;\r\n      var node = closest(event.target, function (el) {\r\n        return !!manager.getNodeManagerRef(el);\r\n      });\r\n      var curManager = manager.getNodeManagerRef(node);\r\n\r\n      if (!((event === null || event === void 0 ? void 0 : event.target) && node instanceof HTMLElement && curManager)) {\r\n        return;\r\n      }\r\n\r\n      var _curManager$info = curManager.info,\r\n          disabled = _curManager$info.disabled,\r\n          curNodeManager = _curManager$info.manager;\r\n\r\n      if ( //is sortable\r\n      sortable && //is list item\r\n      !disabled && //is not secondary button pressed\r\n      event.button !== 2 && //is this list\r\n      curNodeManager === manager && //is not sorting\r\n      !sorting && //excludes interactive elements\r\n      !node.contains(closest(event.target, function (el) {\r\n        return interactiveElements.includes(el.tagName) || el.contentEditable === 'true';\r\n      }))) {\r\n        event.preventDefault();\r\n        _this.touched = true;\r\n        _this.cursorCurrentPosition = getPosition(event);\r\n        manager.setActive(curManager);\r\n        _this.pressTimer = setTimeout(function () {\r\n          return _this.handlePress(event);\r\n        }, pressDelay);\r\n      }\r\n    };\r\n\r\n    _this.handleEnd = function () {\r\n      var _this$state2 = _this.state,\r\n          sorting = _this$state2.sorting,\r\n          manager = _this$state2.manager;\r\n      _this.touched = false;\r\n\r\n      if (!sorting) {\r\n        clearTimeout(_this.pressTimer);\r\n        manager.setActive(null);\r\n      }\r\n    };\r\n\r\n    _this.handlePress = function _callee(event) {\r\n      var _this$props2, classPrefix, onSortStart, manager, _manager$getActive, activeNode, info, index, collection, addItemPrefix, style, activeNodeMargin;\r\n\r\n      return _regeneratorRuntime.async(function _callee$(_context) {\r\n        while (1) {\r\n          switch (_context.prev = _context.next) {\r\n            case 0:\r\n              _this$props2 = _this.props, classPrefix = _this$props2.classPrefix, onSortStart = _this$props2.onSortStart;\r\n              manager = _this.state.manager;\r\n              _manager$getActive = manager.getActive(), activeNode = _manager$getActive.node, info = _manager$getActive.info; // return if no active node\r\n\r\n              if (!(!activeNode || !info)) {\r\n                _context.next = 5;\r\n                break;\r\n              }\r\n\r\n              return _context.abrupt(\"return\");\r\n\r\n            case 5:\r\n              index = info.index, collection = info.collection;\r\n              addItemPrefix = prefix(classPrefix + '-item');\r\n              style = window.getComputedStyle(activeNode);\r\n              activeNodeMargin = {\r\n                bottom: parseFloat(style.marginBottom),\r\n                left: parseFloat(style.marginLeft),\r\n                right: parseFloat(style.marginRight),\r\n                top: parseFloat(style.marginTop)\r\n              };\r\n              _this.activeNodeMarginOffset = {\r\n                x: activeNodeMargin.left + activeNodeMargin.right,\r\n                y: Math.max(activeNodeMargin.top, activeNodeMargin.bottom)\r\n              };\r\n              _this.activeNodeBoundingClientRect = activeNode.getBoundingClientRect();\r\n              _this.containerBoundingRect = _this.scrollContainer.getBoundingClientRect();\r\n              _this.activeNodeOldIndex = index;\r\n              _this.activeNodeNextIndex = index;\r\n              _this.activeNodeOffsetEdge = getEdgeOffset(activeNode, _this.containerRef.current);\r\n              _this.cursorInitialOffset = getPosition(event);\r\n              _this.scrollContainerInitialScroll = {\r\n                left: _this.scrollContainer.scrollLeft,\r\n                top: _this.scrollContainer.scrollTop\r\n              };\r\n              _this.windowInitialScroll = {\r\n                left: window.pageXOffset,\r\n                top: window.pageYOffset\r\n              };\r\n              _this.activeNodeFlowBody = document.body.appendChild(activeNode.cloneNode(true));\r\n              _this.activeNodeFlowBody && _this.activeNodeFlowBody.classList.add(addItemPrefix('helper'));\r\n              setInlineStyles(_this.activeNodeFlowBody, {\r\n                position: 'fixed',\r\n                width: _this.activeNodeBoundingClientRect.width + \"px\",\r\n                height: _this.activeNodeBoundingClientRect.height + \"px\",\r\n                left: _this.activeNodeBoundingClientRect.left - activeNodeMargin.left + \"px\",\r\n                top: _this.activeNodeBoundingClientRect.top - activeNodeMargin.top + \"px\"\r\n              });\r\n              _this.activeNodeGhost = activeNode;\r\n              activeNode.classList.add(addItemPrefix('holder'));\r\n              _this.activeNodeTranslateMin = {\r\n                y: _this.containerBoundingRect.top - _this.activeNodeBoundingClientRect.top - _this.activeNodeBoundingClientRect.height / 2\r\n              };\r\n              _this.activeNodeTranslateMax = {\r\n                y: _this.containerBoundingRect.top + _this.containerBoundingRect.height - _this.activeNodeBoundingClientRect.top - _this.activeNodeBoundingClientRect.height / 2\r\n              };\r\n              _this.sortMouseMoveListener = on(window, 'mousemove', _this.handleSortMove, {\r\n                passive: false\r\n              });\r\n              _this.sortMouseEndListener = on(window, 'mouseup', _this.handleSortEnd, {\r\n                passive: false\r\n              });\r\n\r\n              _this.setState({\r\n                sorting: true\r\n              });\r\n\r\n              if (onSortStart) {\r\n                onSortStart({\r\n                  collection: collection,\r\n                  node: activeNode,\r\n                  oldIndex: _this.activeNodeOldIndex,\r\n                  newIndex: _this.activeNodeNextIndex\r\n                }, event);\r\n              }\r\n\r\n            case 29:\r\n            case \"end\":\r\n              return _context.stop();\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    _this.handleSortMove = function (event) {\r\n      var _this$props3 = _this.props,\r\n          onSortMove = _this$props3.onSortMove,\r\n          autoScroll = _this$props3.autoScroll;\r\n      var manager = _this.state.manager; // Update helper position\r\n\r\n      var offset = getPosition(event);\r\n      var translate = {\r\n        x: offset.x - _this.cursorInitialOffset.x,\r\n        y: offset.y - _this.cursorInitialOffset.y\r\n      }; // Adjust for window scroll\r\n\r\n      translate.x -= window.pageXOffset - _this.windowInitialScroll.left;\r\n      translate.y -= window.pageYOffset - _this.windowInitialScroll.top;\r\n      _this.activeNodeFlowBodyTranslate = translate;\r\n      setTranslate3d(_this.activeNodeFlowBody, translate);\r\n\r\n      _this.animateNodes(); // auto scroll\r\n\r\n\r\n      if (autoScroll) {\r\n        _this.autoScroller.update({\r\n          width: _this.activeNodeBoundingClientRect.width,\r\n          height: _this.activeNodeBoundingClientRect.height,\r\n          translate: _this.activeNodeFlowBodyTranslate,\r\n          maxTranslate: _this.activeNodeTranslateMax,\r\n          minTranslate: _this.activeNodeTranslateMin\r\n        });\r\n      }\r\n\r\n      if (onSortMove) {\r\n        onSortMove({\r\n          collection: manager.getActive().info.collection,\r\n          node: manager.getActive().node,\r\n          oldIndex: _this.activeNodeOldIndex,\r\n          newIndex: _this.activeNodeNextIndex\r\n        }, event);\r\n      }\r\n    };\r\n\r\n    _this.handleSortEnd = function (event) {\r\n      var _this$props4 = _this.props,\r\n          onSortEnd = _this$props4.onSortEnd,\r\n          onSort = _this$props4.onSort,\r\n          classPrefix = _this$props4.classPrefix,\r\n          transitionDuration = _this$props4.transitionDuration;\r\n      var manager = _this.state.manager;\r\n      var activeManagerRef = manager.getActive();\r\n      var activeCollection = activeManagerRef ? activeManagerRef.info.collection : 0;\r\n      var managerRefs = manager.getOrderedRefs(activeCollection);\r\n      var addItemPrefix = prefix(classPrefix + '-item'); // Remove the event listeners\r\n\r\n      _this.sortMouseMoveListener.off();\r\n\r\n      _this.sortMouseEndListener.off();\r\n\r\n      setTransitionDuration(_this.activeNodeFlowBody, transitionDuration);\r\n      setTranslate3d(_this.activeNodeFlowBody, {\r\n        x: _this.holderTranslate.x - _this.containerScrollDelta.left,\r\n        y: _this.holderTranslate.y - _this.containerScrollDelta.top\r\n      }); // wait for animation\r\n\r\n      setTimeout(function () {\r\n        // Remove the helper from the DOM\r\n        if (_this.activeNodeFlowBody) {\r\n          _this.activeNodeFlowBody.parentNode && _this.activeNodeFlowBody.parentNode.removeChild(_this.activeNodeFlowBody);\r\n          _this.activeNodeFlowBody = null;\r\n        }\r\n\r\n        if (_this.activeNodeGhost) {\r\n          _this.activeNodeGhost.classList.remove(addItemPrefix('holder'));\r\n\r\n          setTranslate3d(_this.activeNodeGhost, null);\r\n          _this.animatedNodeOffset = [];\r\n        }\r\n\r\n        for (var i = 0, len = managerRefs.length; i < len; i++) {\r\n          var managerRef = managerRefs[i];\r\n          var el = managerRef.node; // Clear the cached offsetTop / offsetLeft value\r\n\r\n          managerRef.edgeOffset = null; // Remove the transforms / transitions\r\n\r\n          setTranslate3d(el, null);\r\n          setTransitionDuration(el, null);\r\n        } // Stop autoScroll\r\n\r\n\r\n        _this.autoScroller.clear(); // Update manager state\r\n\r\n\r\n        manager.setActive(null);\r\n\r\n        _this.setState({\r\n          sorting: false\r\n        });\r\n\r\n        if (typeof onSortEnd === 'function') {\r\n          onSortEnd({\r\n            collection: activeCollection,\r\n            node: activeManagerRef.node,\r\n            newIndex: _this.activeNodeNextIndex,\r\n            oldIndex: _this.activeNodeOldIndex\r\n          }, event);\r\n        }\r\n\r\n        if (typeof onSort === 'function') {\r\n          onSort({\r\n            collection: activeCollection,\r\n            node: activeManagerRef.node,\r\n            newIndex: _this.activeNodeNextIndex,\r\n            oldIndex: _this.activeNodeOldIndex\r\n          }, event);\r\n        }\r\n      }, transitionDuration);\r\n    };\r\n\r\n    return _this;\r\n  }\r\n\r\n  var _proto = List.prototype;\r\n\r\n  _proto.componentDidMount = function componentDidMount() {\r\n    var _this2 = this;\r\n\r\n    if (this.containerRef.current instanceof HTMLElement) {\r\n      this.scrollContainer = getScrollingParent(this.containerRef.current) || this.containerRef.current;\r\n      this.autoScroller = new AutoScroller(this.scrollContainer, function (offset) {\r\n        _this2.activeNodeFlowBodyTranslate.x += offset.left;\r\n        _this2.activeNodeFlowBodyTranslate.y += offset.top;\r\n      });\r\n      this.windowStartListener = on(this.containerRef.current, 'mousedown', this.handleStart, {\r\n        passive: false\r\n      });\r\n      this.windowEndListener = on(this.containerRef.current, 'mouseup', this.handleEnd, {\r\n        passive: false\r\n      });\r\n    }\r\n  };\r\n\r\n  _proto.componentWillUnmount = function componentWillUnmount() {\r\n    var _this$windowStartList, _this$windowEndListen;\r\n\r\n    (_this$windowStartList = this.windowStartListener) === null || _this$windowStartList === void 0 ? void 0 : _this$windowStartList.off();\r\n    (_this$windowEndListen = this.windowEndListener) === null || _this$windowEndListen === void 0 ? void 0 : _this$windowEndListen.off();\r\n  };\r\n\r\n  _proto.animateNodes = function animateNodes() {\r\n    var transitionDuration = this.props.transitionDuration;\r\n    var manager = this.state.manager;\r\n    var listItemManagerRefs = manager.getOrderedRefs();\r\n    var sortingOffset = {\r\n      left: this.activeNodeOffsetEdge.left + this.activeNodeFlowBodyTranslate.x + this.containerScrollDelta.left,\r\n      top: this.activeNodeOffsetEdge.top + this.activeNodeFlowBodyTranslate.y + this.containerScrollDelta.top\r\n    };\r\n    this.activeNodeNextIndex = -1;\r\n\r\n    for (var i = 0, len = listItemManagerRefs.length; i < len; i++) {\r\n      var _listItemManagerRefs$ = listItemManagerRefs[i],\r\n          node = _listItemManagerRefs$.node,\r\n          index = _listItemManagerRefs$.info.index,\r\n          edgeOffset = _listItemManagerRefs$.edgeOffset;\r\n      var width = node.offsetWidth;\r\n      var height = node.offsetHeight;\r\n      var offset = {\r\n        height: this.activeNodeBoundingClientRect.height > height ? height / 2 : this.activeNodeBoundingClientRect.height / 2,\r\n        width: this.activeNodeBoundingClientRect.width > width ? width / 2 : this.activeNodeBoundingClientRect.width / 2\r\n      };\r\n      var translate = {\r\n        x: 0,\r\n        y: 0\r\n      }; // If we haven't cached the node's offsetTop / offsetLeft value\r\n\r\n      var curEdgeOffset = edgeOffset || getEdgeOffset(node, this.containerRef.current);\r\n      listItemManagerRefs[i].edgeOffset = curEdgeOffset; // Get a reference to the next node\r\n\r\n      var prvNode = i > 0 && listItemManagerRefs[i - 1];\r\n      var nextNode = i < len - 1 && listItemManagerRefs[i + 1]; // Also cache the node's edge offset if needed.\r\n\r\n      if (prvNode && !prvNode.edgeOffset) {\r\n        prvNode.edgeOffset = getEdgeOffset(prvNode.node, this.containerRef.current);\r\n      }\r\n\r\n      if (nextNode && !nextNode.edgeOffset) {\r\n        nextNode.edgeOffset = getEdgeOffset(nextNode.node, this.containerRef.current);\r\n      } // If the node is the one we're currently animating, skip it\r\n\r\n\r\n      if (index === this.activeNodeOldIndex) {\r\n        continue;\r\n      }\r\n\r\n      var distanceTop = sortingOffset.top + this.windowScrollDelta.top;\r\n\r\n      if (prvNode && index > this.activeNodeOldIndex && distanceTop + offset.height >= curEdgeOffset.top) {\r\n        translate.y = prvNode.edgeOffset.top - curEdgeOffset.top;\r\n        this.activeNodeNextIndex = index;\r\n      } else if (nextNode && index < this.activeNodeOldIndex && distanceTop <= curEdgeOffset.top + offset.height) {\r\n        translate.y = nextNode.edgeOffset.top - curEdgeOffset.top;\r\n\r\n        if (this.activeNodeNextIndex === -1) {\r\n          this.activeNodeNextIndex = index;\r\n        }\r\n      }\r\n\r\n      setTransitionDuration(node, transitionDuration);\r\n      setTranslate3d(node, translate); // translate holder\r\n\r\n      this.animatedNodeOffset[index] = translate;\r\n      setTranslate3d(this.activeNodeGhost, this.holderTranslate);\r\n    }\r\n\r\n    if (this.activeNodeNextIndex === -1) {\r\n      this.activeNodeNextIndex = this.activeNodeOldIndex;\r\n    }\r\n  };\r\n\r\n  _proto.render = function render() {\r\n    var _classNames;\r\n\r\n    var _this$props5 = this.props,\r\n        className = _this$props5.className,\r\n        classPrefix = _this$props5.classPrefix,\r\n        bordered = _this$props5.bordered,\r\n        hover = _this$props5.hover,\r\n        size = _this$props5.size,\r\n        sortable = _this$props5.sortable,\r\n        children = _this$props5.children,\r\n        rest = _objectWithoutPropertiesLoose(_this$props5, [\"className\", \"classPrefix\", \"bordered\", \"hover\", \"size\", \"sortable\", \"children\"]);\r\n\r\n    var _this$state3 = this.state,\r\n        sorting = _this$state3.sorting,\r\n        manager = _this$state3.manager;\r\n    var addPrefix = prefix(classPrefix);\r\n    var unhandled = getUnhandledProps(List, rest);\r\n    var classes = classNames(classPrefix, className, (_classNames = {}, _classNames[addPrefix('bordered')] = bordered, _classNames[addPrefix('sortable')] = sortable, _classNames[addPrefix('sorting')] = sorting, _classNames[addPrefix('hover')] = hover, _classNames));\r\n    var contextValue = {\r\n      bordered: bordered,\r\n      size: size,\r\n      manager: manager\r\n    };\r\n    return React.createElement(ListContext.Provider, {\r\n      value: contextValue\r\n    }, React.createElement(\"div\", _extends({\r\n      ref: this.containerRef,\r\n      className: classes\r\n    }, unhandled), children));\r\n  };\r\n\r\n  _createClass(List, [{\r\n    key: \"containerScrollDelta\",\r\n    get: function get() {\r\n      return {\r\n        left: this.scrollContainer.scrollLeft - this.scrollContainerInitialScroll.left,\r\n        top: this.scrollContainer.scrollTop - this.scrollContainerInitialScroll.top\r\n      };\r\n    }\r\n  }, {\r\n    key: \"windowScrollDelta\",\r\n    get: function get() {\r\n      return {\r\n        left: window.pageXOffset - this.windowInitialScroll.left,\r\n        top: window.pageYOffset - this.windowInitialScroll.top\r\n      };\r\n    }\r\n  }, {\r\n    key: \"holderTranslate\",\r\n    get: function get() {\r\n      return this.animatedNodeOffset.reduce(function (acc, item) {\r\n        return {\r\n          x: acc.x - item.x,\r\n          y: acc.y - item.y\r\n        };\r\n      }, {\r\n        x: 0,\r\n        y: 0\r\n      });\r\n    }\r\n  }]);\r\n\r\n  return List;\r\n}(React.Component);\r\n\r\nList.propTypes = {\r\n  className: PropTypes.string,\r\n  classPrefix: PropTypes.string,\r\n  bordered: PropTypes.bool,\r\n  hover: PropTypes.bool,\r\n  sortable: PropTypes.bool,\r\n  size: PropTypes.oneOf(['lg', 'md', 'sm']),\r\n  autoScroll: PropTypes.bool,\r\n  pressDelay: PropTypes.number,\r\n  transitionDuration: PropTypes.number,\r\n  onSortStart: PropTypes.func,\r\n  onSortMove: PropTypes.func,\r\n  onSortEnd: PropTypes.func,\r\n  onSort: PropTypes.func\r\n};\r\nList.defaultProps = {\r\n  size: 'md',\r\n  autoScroll: true,\r\n  pressDelay: 0,\r\n  transitionDuration: 300\r\n};\r\nvar EnhancedList = defaultProps({\r\n  classPrefix: 'list'\r\n})(List);\r\nsetStatic('Item', ListItem)(EnhancedList);\r\nexport default EnhancedList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}