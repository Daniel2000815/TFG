{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BBox = void 0;\n\nvar lengths_js_1 = require(\"./lengths.js\");\n\nvar BBox = function () {\n  function BBox(def) {\n    if (def === void 0) {\n      def = {\n        w: 0,\n        h: -lengths_js_1.BIGDIMEN,\n        d: -lengths_js_1.BIGDIMEN\n      };\n    }\n\n    this.w = def.w || 0;\n    this.h = 'h' in def ? def.h : -lengths_js_1.BIGDIMEN;\n    this.d = 'd' in def ? def.d : -lengths_js_1.BIGDIMEN;\n    this.L = this.R = this.ic = this.sk = this.dx = 0;\n    this.scale = this.rscale = 1;\n    this.pwidth = '';\n  }\n\n  BBox.zero = function () {\n    return new BBox({\n      h: 0,\n      d: 0,\n      w: 0\n    });\n  };\n\n  BBox.empty = function () {\n    return new BBox();\n  };\n\n  BBox.prototype.empty = function () {\n    this.w = 0;\n    this.h = this.d = -lengths_js_1.BIGDIMEN;\n    return this;\n  };\n\n  BBox.prototype.clean = function () {\n    if (this.w === -lengths_js_1.BIGDIMEN) this.w = 0;\n    if (this.h === -lengths_js_1.BIGDIMEN) this.h = 0;\n    if (this.d === -lengths_js_1.BIGDIMEN) this.d = 0;\n  };\n\n  BBox.prototype.rescale = function (scale) {\n    this.w *= scale;\n    this.h *= scale;\n    this.d *= scale;\n  };\n\n  BBox.prototype.combine = function (cbox, x, y) {\n    if (x === void 0) {\n      x = 0;\n    }\n\n    if (y === void 0) {\n      y = 0;\n    }\n\n    var rscale = cbox.rscale;\n    var w = x + rscale * (cbox.w + cbox.L + cbox.R);\n    var h = y + rscale * cbox.h;\n    var d = rscale * cbox.d - y;\n    if (w > this.w) this.w = w;\n    if (h > this.h) this.h = h;\n    if (d > this.d) this.d = d;\n  };\n\n  BBox.prototype.append = function (cbox) {\n    var scale = cbox.rscale;\n    this.w += scale * (cbox.w + cbox.L + cbox.R);\n\n    if (scale * cbox.h > this.h) {\n      this.h = scale * cbox.h;\n    }\n\n    if (scale * cbox.d > this.d) {\n      this.d = scale * cbox.d;\n    }\n  };\n\n  BBox.prototype.updateFrom = function (cbox) {\n    this.h = cbox.h;\n    this.d = cbox.d;\n    this.w = cbox.w;\n\n    if (cbox.pwidth) {\n      this.pwidth = cbox.pwidth;\n    }\n  };\n\n  BBox.fullWidth = '100%';\n  BBox.StyleAdjust = [['borderTopWidth', 'h'], ['borderRightWidth', 'w'], ['borderBottomWidth', 'd'], ['borderLeftWidth', 'w', 0], ['paddingTop', 'h'], ['paddingRight', 'w'], ['paddingBottom', 'd'], ['paddingLeft', 'w', 0]];\n  return BBox;\n}();\n\nexports.BBox = BBox;","map":{"version":3,"mappings":"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","names":["def","w","h","lengths_js_1","d","L","R","ic","sk","dx","scale","rscale","pwidth","BBox","cbox","x","y","exports"],"sourceRoot":"","sources":["../../ts/util/BBox.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}