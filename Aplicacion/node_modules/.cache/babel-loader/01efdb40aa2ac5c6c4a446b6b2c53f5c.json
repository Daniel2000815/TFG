{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SVGmfrac = void 0;\n\nvar Wrapper_js_1 = require(\"../Wrapper.js\");\n\nvar mfrac_js_1 = require(\"../../common/Wrappers/mfrac.js\");\n\nvar mfrac_js_2 = require(\"../../../core/MmlTree/MmlNodes/mfrac.js\");\n\nvar SVGmfrac = function (_super) {\n  __extends(SVGmfrac, _super);\n\n  function SVGmfrac() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SVGmfrac.prototype.toSVG = function (parent) {\n    this.standardSVGnode(parent);\n\n    var _a = this.node.attributes.getList('linethickness', 'bevelled'),\n        linethickness = _a.linethickness,\n        bevelled = _a.bevelled;\n\n    var display = this.isDisplay();\n\n    if (bevelled) {\n      this.makeBevelled(display);\n    } else {\n      var thickness = this.length2em(String(linethickness), .06);\n\n      if (thickness === 0) {\n        this.makeAtop(display);\n      } else {\n        this.makeFraction(display, thickness);\n      }\n    }\n  };\n\n  SVGmfrac.prototype.makeFraction = function (display, t) {\n    var svg = this.element;\n\n    var _a = this.node.attributes.getList('numalign', 'denomalign'),\n        numalign = _a.numalign,\n        denomalign = _a.denomalign;\n\n    var _b = __read(this.childNodes, 2),\n        num = _b[0],\n        den = _b[1];\n\n    var nbox = num.getOuterBBox();\n    var dbox = den.getOuterBBox();\n    var tex = this.font.params;\n    var a = tex.axis_height;\n    var d = .1;\n    var pad = this.node.getProperty('withDelims') ? 0 : tex.nulldelimiterspace;\n    var W = Math.max((nbox.L + nbox.w + nbox.R) * nbox.rscale, (dbox.L + dbox.w + dbox.R) * dbox.rscale);\n    var nx = this.getAlignX(W, nbox, numalign) + d + pad;\n    var dx = this.getAlignX(W, dbox, denomalign) + d + pad;\n\n    var _c = this.getTUV(display, t),\n        T = _c.T,\n        u = _c.u,\n        v = _c.v;\n\n    num.toSVG(svg);\n    num.place(nx, a + T + Math.max(nbox.d * nbox.rscale, u));\n    den.toSVG(svg);\n    den.place(dx, a - T - Math.max(dbox.h * dbox.rscale, v));\n    this.adaptor.append(svg, this.svg('rect', {\n      width: this.fixed(W + 2 * d),\n      height: this.fixed(t),\n      x: this.fixed(pad),\n      y: this.fixed(a - t / 2)\n    }));\n  };\n\n  SVGmfrac.prototype.makeAtop = function (display) {\n    var svg = this.element;\n\n    var _a = this.node.attributes.getList('numalign', 'denomalign'),\n        numalign = _a.numalign,\n        denomalign = _a.denomalign;\n\n    var _b = __read(this.childNodes, 2),\n        num = _b[0],\n        den = _b[1];\n\n    var nbox = num.getOuterBBox();\n    var dbox = den.getOuterBBox();\n    var tex = this.font.params;\n    var pad = this.node.getProperty('withDelims') ? 0 : tex.nulldelimiterspace;\n    var W = Math.max((nbox.L + nbox.w + nbox.R) * nbox.rscale, (dbox.L + dbox.w + dbox.R) * dbox.rscale);\n    var nx = this.getAlignX(W, nbox, numalign) + pad;\n    var dx = this.getAlignX(W, dbox, denomalign) + pad;\n\n    var _c = this.getUVQ(display),\n        u = _c.u,\n        v = _c.v;\n\n    num.toSVG(svg);\n    num.place(nx, u);\n    den.toSVG(svg);\n    den.place(dx, -v);\n  };\n\n  SVGmfrac.prototype.makeBevelled = function (display) {\n    var svg = this.element;\n\n    var _a = __read(this.childNodes, 2),\n        num = _a[0],\n        den = _a[1];\n\n    var _b = this.getBevelData(display),\n        u = _b.u,\n        v = _b.v,\n        delta = _b.delta,\n        nbox = _b.nbox,\n        dbox = _b.dbox;\n\n    var w = (nbox.L + nbox.w + nbox.R) * nbox.rscale;\n    num.toSVG(svg);\n    this.bevel.toSVG(svg);\n    den.toSVG(svg);\n    num.place(nbox.L * nbox.rscale, u);\n    this.bevel.place(w - delta / 2, 0);\n    den.place(w + this.bevel.getOuterBBox().w + dbox.L * dbox.rscale - delta, v);\n  };\n\n  SVGmfrac.kind = mfrac_js_2.MmlMfrac.prototype.kind;\n  return SVGmfrac;\n}((0, mfrac_js_1.CommonMfracMixin)(Wrapper_js_1.SVGWrapper));\n\nexports.SVGmfrac = SVGmfrac;","map":{"version":3,"mappings":"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","names":["__extends","SVGmfrac","parent","standardSVGnode","node","attributes","getList","linethickness","bevelled","display","isDisplay","makeBevelled","thickness","length2em","String","makeAtop","makeFraction","t","svg","element","numalign","denomalign","childNodes","num","den","nbox","getOuterBBox","dbox","tex","font","params","a","axis_height","d","pad","getProperty","nulldelimiterspace","W","Math","max","L","w","R","rscale","nx","getAlignX","dx","getTUV","T","u","v","toSVG","place","h","adaptor","append","width","fixed","height","x","y","getUVQ","getBevelData","delta","bevel","mfrac_js_2","prototype","kind","Wrapper_js_1","exports"],"sourceRoot":"","sources":["../../../../ts/output/svg/Wrappers/mfrac.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}