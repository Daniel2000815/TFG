{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SVGmmultiscripts = exports.AlignX = void 0;\n\nvar msubsup_js_1 = require(\"./msubsup.js\");\n\nvar mmultiscripts_js_1 = require(\"../../common/Wrappers/mmultiscripts.js\");\n\nvar mmultiscripts_js_2 = require(\"../../../core/MmlTree/MmlNodes/mmultiscripts.js\");\n\nvar string_js_1 = require(\"../../../util/string.js\");\n\nfunction AlignX(align) {\n  return {\n    left: function left(_w, _W) {\n      return 0;\n    },\n    center: function center(w, W) {\n      return (W - w) / 2;\n    },\n    right: function right(w, W) {\n      return W - w;\n    }\n  }[align] || function (_w, _W) {\n    return 0;\n  };\n}\n\nexports.AlignX = AlignX;\n\nvar SVGmmultiscripts = function (_super) {\n  __extends(SVGmmultiscripts, _super);\n\n  function SVGmmultiscripts() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SVGmmultiscripts.prototype.toSVG = function (parent) {\n    var svg = this.standardSVGnode(parent);\n    var data = this.scriptData;\n    var scriptalign = this.node.getProperty('scriptalign') || 'right left';\n\n    var _a = __read((0, string_js_1.split)(scriptalign + ' ' + scriptalign), 2),\n        preAlign = _a[0],\n        postAlign = _a[1];\n\n    var sub = this.combinePrePost(data.sub, data.psub);\n    var sup = this.combinePrePost(data.sup, data.psup);\n\n    var _b = __read(this.getUVQ(sub, sup), 2),\n        u = _b[0],\n        v = _b[1];\n\n    var x = 0;\n\n    if (data.numPrescripts) {\n      x = this.addScripts(.05, u, v, this.firstPrescript, data.numPrescripts, preAlign);\n    }\n\n    var base = this.baseChild;\n    base.toSVG(svg);\n    base.place(x, 0);\n    x += base.getOuterBBox().w;\n\n    if (data.numScripts) {\n      this.addScripts(x, u, v, 1, data.numScripts, postAlign);\n    }\n  };\n\n  SVGmmultiscripts.prototype.addScripts = function (x, u, v, i, n, align) {\n    var adaptor = this.adaptor;\n    var alignX = AlignX(align);\n    var supRow = adaptor.append(this.element, this.svg('g'));\n    var subRow = adaptor.append(this.element, this.svg('g'));\n    this.place(x, u, supRow);\n    this.place(x, v, subRow);\n    var m = i + 2 * n;\n    var dx = 0;\n\n    while (i < m) {\n      var _a = __read([this.childNodes[i++], this.childNodes[i++]], 2),\n          sub = _a[0],\n          sup = _a[1];\n\n      var _b = __read([sub.getOuterBBox(), sup.getOuterBBox()], 2),\n          subbox = _b[0],\n          supbox = _b[1];\n\n      var _c = __read([subbox.rscale, supbox.rscale], 2),\n          subr = _c[0],\n          supr = _c[1];\n\n      var w = Math.max(subbox.w * subr, supbox.w * supr);\n      sub.toSVG(subRow);\n      sup.toSVG(supRow);\n      sub.place(dx + alignX(subbox.w * subr, w), 0);\n      sup.place(dx + alignX(supbox.w * supr, w), 0);\n      dx += w;\n    }\n\n    return x + dx;\n  };\n\n  SVGmmultiscripts.kind = mmultiscripts_js_2.MmlMmultiscripts.prototype.kind;\n  return SVGmmultiscripts;\n}((0, mmultiscripts_js_1.CommonMmultiscriptsMixin)(msubsup_js_1.SVGmsubsup));\n\nexports.SVGmmultiscripts = SVGmmultiscripts;","map":{"version":3,"mappings":"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","names":["AlignX","align","left","_w","_W","center","w","W","right","exports","__extends","SVGmmultiscripts","parent","svg","standardSVGnode","data","scriptData","scriptalign","node","getProperty","preAlign","postAlign","sub","combinePrePost","psub","sup","psup","getUVQ","u","v","x","numPrescripts","addScripts","firstPrescript","base","baseChild","toSVG","place","getOuterBBox","numScripts","i","n","adaptor","alignX","supRow","append","element","subRow","m","dx","childNodes","subbox","supbox","rscale","subr","supr","Math","max","mmultiscripts_js_2","prototype","kind","msubsup_js_1"],"sourceRoot":"","sources":["../../../../ts/output/svg/Wrappers/mmultiscripts.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}