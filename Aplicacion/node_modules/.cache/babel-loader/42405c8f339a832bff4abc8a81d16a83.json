{"ast":null,"code":"import _toConsumableArray from\"G:\\\\gitlab\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"G:\\\\gitlab\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext}from'react';import Shader from'../CustomComponents/Shader';import{useTheme}from'@mui/material/styles';import Dropdown from'../CustomComponents/Dropdown';import CustomHandle from'./CustomHandle';import GraphContext from'../GraphPage/GraphContext.js';import ToggleButton from'../CustomComponents/ToggleButton';import newId from'../uniqueIdHook';export default function CustomNode(props){var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),showMore=_React$useState2[0],setShowMore=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isHover=_React$useState4[0],setIsHover=_React$useState4[1];var sharedFunctions=useContext(GraphContext);var theme=useTheme();var width=200;var nodeStyle={position:'relative',width:\"\".concat(width,\"px\"),display:'flex',flexDirection:'column',transition:'border 300ms ease',borderRadius:'0px 0px 0px 0px',backgroundColor:'#fff',boxShadow:isHover?'0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)':'0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)',border:isHover?\"1px solid \".concat(theme.palette.primary.dark):\"1px solid \".concat(theme.palette.primary.main),'&:hover':{transition:'box-shadow 200ms ease',boxShadow:'0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)',border:\"1px solid \".concat(theme.palette.primary.dark)}};var headerStyle={height:showMore?'20px':'40px',width:\"\".concat(width,\"px\"),color:'#EFF7FF',borderRadius:'5px 5px 0px 0px',textAlign:'center',fontWeight:'600',fontSize:showMore?'14px':'24px',letterSpacing:'0.1px',justifyContent:'flex-start',backgroundColor:\"\".concat(theme.palette.primary.main)};var footerStyle={height:'20px',width:\"\".concat(width,\"px\"),color:'#EFF7FF',borderRadius:'0px 0px 5px 5px',backgroundColor:\"\".concat(theme.palette.primary.main)};var handleMouseEnter=function handleMouseEnter(){setIsHover(true);};var handleMouseLeave=function handleMouseLeave(){setIsHover(false);};useEffect(function(){console.log(\"SDF DE \".concat(props.id,\" MODIFICADO\"));sharedFunctions.updateNodeSdf(props.id,props.sdf);},[props.sdf]);useEffect(function(){var handleKeyDown=function handleKeyDown(e){if(e.key.toLowerCase()==='s')setShowMore(!showMore);};document.addEventListener('keydown',handleKeyDown);return function(){return document.removeEventListener('keydown',handleKeyDown);};},[showMore]);return/*#__PURE__*/React.createElement(\"div\",{tabIndex:\"0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"nodeHeader\",style:headerStyle},showMore?props.title:props.currOption),showMore?/*#__PURE__*/React.createElement(\"div\",{className:\"nodeBody\",onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,style:nodeStyle},props.dropdownOptions?/*#__PURE__*/React.createElement(Dropdown,{defaultValue:props.dropdownOptions[0],onChange:props.onChangeOption,items:props.dropdownOptions,label:props.title}):null,showMore?/*#__PURE__*/React.createElement(React.Fragment,null,props.body,/*#__PURE__*/React.createElement(Shader,{sdf:props.sdf,style:{margin:'10px',height:'100%'}})):null):null,/*#__PURE__*/React.createElement(\"div\",{style:footerStyle},/*#__PURE__*/React.createElement(ToggleButton,{value:showMore,onClick:function onClick(){return setShowMore(!showMore);}})),_toConsumableArray(Array(props.nInputs)).map(function(e,i){return/*#__PURE__*/React.createElement(\"div\",{key:newId('targetHandleContainer_')},/*#__PURE__*/React.createElement(CustomHandle,{type:\"target\",style:{top:\"\".concat(50-(props.nInputs-1)/2*5+i*5,\"%\")}}));}),/*#__PURE__*/React.createElement(CustomHandle,{type:\"source\",onConnect:function onConnect(params){return console.log('handle onsConnect',params);},style:{top:'50%'}}));}","map":{"version":3,"names":["React","useEffect","useContext","Shader","useTheme","Dropdown","CustomHandle","GraphContext","ToggleButton","newId","CustomNode","props","useState","showMore","setShowMore","isHover","setIsHover","sharedFunctions","theme","width","nodeStyle","position","display","flexDirection","transition","borderRadius","backgroundColor","boxShadow","border","palette","primary","dark","main","headerStyle","height","color","textAlign","fontWeight","fontSize","letterSpacing","justifyContent","footerStyle","handleMouseEnter","handleMouseLeave","console","log","id","updateNodeSdf","sdf","handleKeyDown","e","key","toLowerCase","document","addEventListener","removeEventListener","title","currOption","dropdownOptions","onChangeOption","body","margin","Array","nInputs","map","i","top","params"],"sources":["G:/gitlab/TFG/Aplicacion/src/CustomNodes/CustomNode.js"],"sourcesContent":["import React, { useEffect, useContext } from 'react';\r\nimport Shader from '../CustomComponents/Shader';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport Dropdown from '../CustomComponents/Dropdown';\r\nimport CustomHandle from './CustomHandle';\r\nimport GraphContext from '../GraphPage/GraphContext.js';\r\nimport ToggleButton from '../CustomComponents/ToggleButton';\r\nimport newId from '../uniqueIdHook';\r\n\r\nexport default function CustomNode(props) {\r\n  const [showMore, setShowMore] = React.useState(true);\r\n  const [isHover, setIsHover] = React.useState(false);\r\n\r\n  const sharedFunctions = useContext(GraphContext);\r\n  const theme = useTheme();\r\n  const width = 200;\r\n\r\n  const nodeStyle = {\r\n    position: 'relative',\r\n    width: `${width}px`,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    transition: 'border 300ms ease',\r\n    borderRadius: '0px 0px 0px 0px',\r\n    backgroundColor: '#fff',\r\n\r\n    boxShadow: isHover\r\n      ? '0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)'\r\n      : '0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)',\r\n\r\n    border: isHover\r\n      ? `1px solid ${theme.palette.primary.dark}`\r\n      : `1px solid ${theme.palette.primary.main}`,\r\n\r\n    '&:hover': {\r\n      transition: 'box-shadow 200ms ease',\r\n      boxShadow:\r\n        '0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)',\r\n      border: `1px solid ${theme.palette.primary.dark}`,\r\n    },\r\n  };\r\n\r\n  const headerStyle = {\r\n    height: showMore ? '20px' : '40px',\r\n    width: `${width}px`,\r\n    color: '#EFF7FF',\r\n    borderRadius: '5px 5px 0px 0px',\r\n    textAlign: 'center',\r\n    fontWeight: '600',\r\n    fontSize: showMore ? '14px' : '24px',\r\n    letterSpacing: '0.1px',\r\n    justifyContent: 'flex-start',\r\n    backgroundColor: `${theme.palette.primary.main}`,\r\n  };\r\n\r\n  const footerStyle = {\r\n    height: '20px',\r\n    width: `${width}px`,\r\n    color: '#EFF7FF',\r\n    borderRadius: '0px 0px 5px 5px',\r\n    backgroundColor: `${theme.palette.primary.main}`,\r\n  };\r\n\r\n  const handleMouseEnter = () => {\r\n    setIsHover(true);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setIsHover(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(`SDF DE ${props.id} MODIFICADO`);\r\n    sharedFunctions.updateNodeSdf(props.id, props.sdf);\r\n  }, [props.sdf]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key.toLowerCase() === 's') setShowMore(!showMore);\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [showMore]);\r\n\r\n  return (\r\n    <div tabIndex=\"0\">\r\n      <div className=\"nodeHeader\" style={headerStyle}>\r\n        {showMore ? props.title : props.currOption}\r\n      </div>\r\n\r\n      {showMore ? (\r\n        <div\r\n          className=\"nodeBody\"\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n          style={nodeStyle}\r\n        >\r\n          {props.dropdownOptions ? (\r\n            <Dropdown\r\n              defaultValue={props.dropdownOptions[0]}\r\n              onChange={props.onChangeOption}\r\n              items={props.dropdownOptions}\r\n              label={props.title}\r\n            />\r\n          ) : null}\r\n\r\n          {showMore ? (\r\n            <>\r\n              {/* <p >{`ID: ${props.id}`}</p>\r\n              <p>\r\n                CHILDREN:{\" \"}\r\n                {Object.keys(props.data.children)\r\n                  .map((key) => `${props.data.children[key]}`)\r\n                  .join(\", \")}\r\n              </p>\r\n              <p>{`SDF: ${props.sdf}`}</p> */}\r\n\r\n              {props.body}\r\n              <Shader\r\n                sdf={props.sdf}\r\n                style={{ margin: '10px', height: '100%' }}\r\n              />\r\n            </>\r\n          ) : null}\r\n        </div>\r\n      ) : null}\r\n\r\n      <div style={footerStyle}>\r\n        <ToggleButton value={showMore} onClick={() => setShowMore(!showMore)} />\r\n      </div>\r\n\r\n      {/* {[...Array(props.nInputs)].map((e, i) =>\r\n        <CustomHandle\r\n          type=\"target\"\r\n          style={{ top: `${50 - ((props.nInputs - 1) / 2) * 5 + i * 5}%` }}\r\n        />\r\n      )\r\n      } */}\r\n\r\n      {[...Array(props.nInputs)].map(function (e, i) {\r\n        return (\r\n          <div key={newId('targetHandleContainer_')}>\r\n            <CustomHandle\r\n              type=\"target\"\r\n              style={{ top: `${50 - ((props.nInputs - 1) / 2) * 5 + i * 5}%` }}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n\r\n      <CustomHandle\r\n        type=\"source\"\r\n        onConnect={(params) => console.log('handle onsConnect', params)}\r\n        style={{ top: '50%' }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}