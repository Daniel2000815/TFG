{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext}from\"react\";import{Handle}from\"react-flow-renderer\";import Shader from\"./Shader\";import{fs}from\"./fragmentShader\";import Dropdown from\"./Dropdown\";import CustomHandle from\"./CustomHandle\";import GraphContext from\"./GraphContext.js\";import Button from\"@mui/material/Button\";import KeyboardArrowDownIcon from\"@mui/icons-material/KeyboardArrowDown\";import KeyboardArrowUpIcon from\"@mui/icons-material/KeyboardArrowUp\";var BooleanOperations={Union:\"Union\",Difference:\"Difference\",Intersection:\"Intersection\"};export default function BooleanNode(_ref){var data=_ref.data,id=_ref.id;var _React$useState=React.useState(BooleanOperations.Union),_React$useState2=_slicedToArray(_React$useState,2),operation=_React$useState2[0],setOperation=_React$useState2[1];var _React$useState3=React.useState(data.sdf),_React$useState4=_slicedToArray(_React$useState3,2),sdf=_React$useState4[0],setSdf=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),showCanvas=_React$useState6[0],setShowCanvas=_React$useState6[1];var sharedFunctions=useContext(GraphContext);useEffect(function(){console.log(\"\".concat(id,\" HA RECIBIDO NUEVOS DATOS:\"));console.log(JSON.stringify(data));},[data]);useEffect(function(){console.log(\"SDF DE \".concat(id,\" MODIFICADO\"));sharedFunctions.updateNodeSdf(id,sdf);},[sdf]);useEffect(function(){console.log(\"SE HAN MODIFICADO LOS SDF EN NODO BOOLEANO. AHORA HAY \".concat(Object.keys(data.inputs).length));var inputs=\"\".concat(Object.keys(data.inputs).map(function(key){return\"\".concat(data.inputs[key]);}).join(', '));console.log(inputs);if(operation===BooleanOperations.Union)setSdf(\"min(\".concat(inputs,\")\"));else if(operation===BooleanOperations.Intersection)setSdf(\"max(\".concat(inputs,\")\"));else if(operation===BooleanOperations.Difference)setSdf(\"max(-\".concat(inputs,\")\"));},[data,operation]);return/*#__PURE__*/React.createElement(\"div\",{className:\"custom-node\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-node-header\"},\"Boolean\"),/*#__PURE__*/React.createElement(\"p\",null,\"ID: \".concat(id)),/*#__PURE__*/React.createElement(\"p\",null,\"CHILDREN: \",Object.keys(data.children).map(function(key){return\"\".concat(data.children[key]);}).join(', ')),/*#__PURE__*/React.createElement(\"p\",null,\"SDF: \",sdf),/*#__PURE__*/React.createElement(Dropdown,{value:operation,onChange:setOperation,items:Object.values(BooleanOperations),label:\"Operation\"}),/*#__PURE__*/React.createElement(CustomHandle,{id:\"0\",type:\"target\",onConnect:function onConnect(params){return console.log(\"handle ss\",params);},style:{top:\"45%\"}}),/*#__PURE__*/React.createElement(CustomHandle,{id:\"1\",type:\"target\",onConnect:function onConnect(params){return data.updateBooleanPrimitive(params.source,params.target);},style:{top:\"55%\"}}),/*#__PURE__*/React.createElement(CustomHandle,{id:\"2\",type:\"source\",onConnect:function onConnect(params){return console.log(\"handle onsConnect\",params);},style:{top:\"50%\"}}),showCanvas?/*#__PURE__*/React.createElement(Shader,{shader:fs(sdf),uniforms:{color:{type:\"3fv\",value:[1.0,1.0,0.0]}},style:{margin:\"10px\"}}):null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setShowCanvas(!showCanvas);},variant:\"contained\",className:\"custom-node-creater\",size:\"small\",endIcon:showCanvas?/*#__PURE__*/React.createElement(KeyboardArrowUpIcon,null):/*#__PURE__*/React.createElement(KeyboardArrowDownIcon,null)},showCanvas?\"Hide canvas\":\"Show canvas\"));}","map":{"version":3,"names":["React","useEffect","useContext","Handle","Shader","fs","Dropdown","CustomHandle","GraphContext","Button","KeyboardArrowDownIcon","KeyboardArrowUpIcon","BooleanOperations","Union","Difference","Intersection","BooleanNode","data","id","useState","operation","setOperation","sdf","setSdf","showCanvas","setShowCanvas","sharedFunctions","console","log","JSON","stringify","updateNodeSdf","Object","keys","inputs","length","map","key","join","children","values","params","top","updateBooleanPrimitive","source","target","color","type","value","margin"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/BooleanNode.js"],"sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport { Handle } from \"react-flow-renderer\";\r\nimport Shader from \"./Shader\";\r\nimport { fs } from \"./fragmentShader\";\r\nimport Dropdown from \"./Dropdown\";\r\nimport CustomHandle from \"./CustomHandle\";\r\nimport GraphContext from \"./GraphContext.js\";\r\nimport Button from \"@mui/material/Button\";\r\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\r\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\r\n\r\nconst BooleanOperations = {\r\n  Union: \"Union\",\r\n  Difference: \"Difference\",\r\n  Intersection: \"Intersection\",\r\n};\r\n\r\n\r\n\r\nexport default function BooleanNode({ data, id }) {\r\n  const [operation, setOperation] = React.useState(BooleanOperations.Union);\r\n  const [sdf, setSdf] = React.useState(data.sdf);\r\n  const [showCanvas, setShowCanvas] = React.useState(false);\r\n\r\n  const sharedFunctions = useContext(GraphContext);\r\n  \r\n  useEffect(() => {\r\n    console.log(`${id} HA RECIBIDO NUEVOS DATOS:`);\r\n    console.log(JSON.stringify(data));\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    console.log(`SDF DE ${id} MODIFICADO`);\r\n    sharedFunctions.updateNodeSdf(id, sdf);\r\n  }, [sdf]);\r\n\r\n  useEffect(() => {\r\n    console.log(`SE HAN MODIFICADO LOS SDF EN NODO BOOLEANO. AHORA HAY ${Object.keys(data.inputs).length}`);\r\n    const inputs = `${Object.keys(data.inputs).map(key => `${data.inputs[key]}`).join(', ')}`;\r\n    console.log(inputs);\r\n    if(operation===BooleanOperations.Union)\r\n      setSdf(`min(${inputs})`)\r\n    else if(operation===BooleanOperations.Intersection)\r\n      setSdf(`max(${inputs})`)\r\n    else if(operation===BooleanOperations.Difference)\r\n      setSdf(`max(-${inputs})`)\r\n\r\n  }, [data, operation]);\r\n\r\n  return (\r\n    <div className=\"custom-node\">\r\n      <div className=\"custom-node-header\">Boolean</div>\r\n      <p>{`ID: ${id}`}</p>\r\n      <p>CHILDREN: {Object.keys(data.children).map(key => `${data.children[key]}`).join(', ')}</p>\r\n      <p>SDF: {sdf}</p>\r\n\r\n      <Dropdown\r\n        value={operation}\r\n        onChange={setOperation}\r\n        items={Object.values(BooleanOperations)}\r\n        label=\"Operation\"\r\n      />\r\n\r\n      <CustomHandle id={\"0\"} type=\"target\" onConnect={(params) => console.log(\"handle ss\", params)} style={{ top: \"45%\" }}/>\r\n      <CustomHandle id={\"1\"} type=\"target\" onConnect={(params) => data.updateBooleanPrimitive(params.source, params.target)} style={{ top: \"55%\" }}/>\r\n      <CustomHandle id={\"2\"} type=\"source\" onConnect={(params) => console.log(\"handle onsConnect\", params)} style={{ top: \"50%\" }}/>\r\n\r\n      {showCanvas ? (\r\n        <Shader\r\n          shader={fs(sdf)}\r\n          uniforms={{ color: { type: \"3fv\", value: [1.0, 1.0, 0.0] } }}\r\n          style={{ margin: \"10px\" }}\r\n        />\r\n      ) : null}\r\n\r\n      <Button\r\n        onClick={() => setShowCanvas(!showCanvas)}\r\n        variant=\"contained\"\r\n        className=\"custom-node-creater\"\r\n        size=\"small\"\r\n        endIcon={\r\n          showCanvas ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />\r\n        }\r\n      >\r\n        {showCanvas ? \"Hide canvas\" : \"Show canvas\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}