{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\Graph.js\";\nimport React from \"react\";\nimport { useCallback, useState } from \"react\";\nimport ReactFlow, { addEdge, applyEdgeChanges, applyNodeChanges, MarkerType, useNodesState, useEdgesState } from \"react-flow-renderer\";\nimport ButtonEdge from './ButtonEdge.js';\nimport ShaderNode from \"./ShaderNode.js\";\nimport \"./styles.css\";\nvar initialNodes = [{\n  id: \"node-1\",\n  type: \"shaderNode\",\n  position: {\n    x: 0,\n    y: 0\n  },\n  data: {\n    value: 123\n  }\n}, {\n  id: \"node-2\",\n  type: \"shaderNode\",\n  position: {\n    x: 250,\n    y: 0\n  },\n  data: {\n    value: 1\n  }\n}, {\n  id: \"node-3\",\n  type: \"shaderNode\",\n  position: {\n    x: 250,\n    y: -300\n  },\n  data: {\n    value: 1\n  }\n}];\nvar initialEdges = [];\nvar nodeTypes = {\n  shaderNode: ShaderNode\n};\nvar edgeTypes = {\n  buttonEdge: ButtonEdge\n};\nexport default function Graph() {\n  var _useNodesState = useNodesState(initialNodes),\n      _useNodesState2 = _slicedToArray(_useNodesState, 3),\n      nodes = _useNodesState2[0],\n      setNodes = _useNodesState2[1],\n      onNodesChange = _useNodesState2[2];\n\n  var _useEdgesState = useEdgesState(initialEdges),\n      _useEdgesState2 = _slicedToArray(_useEdgesState, 3),\n      edges = _useEdgesState2[0],\n      setEdges = _useEdgesState2[1],\n      onEdgesChange = _useEdgesState2[2]; // no funciona: borra todos\n\n\n  var onRemoveEdge = function onRemoveEdge(id) {\n    setEdges(edges.splice(id, 1));\n  };\n\n  var onConnect = useCallback(function (params) {\n    return setEdges(function (eds) {\n      return addEdge(_objectSpread(_objectSpread({}, params), {}, {\n        animated: true,\n        markerEnd: {\n          type: 'arrow',\n          color: '#f00'\n        },\n        type: 'buttonEdge',\n        data: {\n          onRemoveEdge: onRemoveEdge\n        }\n      }), eds);\n    });\n  }, []);\n  var onDisconnect = useCallback(function (connection) {\n    console.log(connection);\n    setEdges(function (eds) {\n      return addEdge(_objectSpread(_objectSpread({}, connection), {}, {\n        animated: true,\n        markerEnd: {\n          type: MarkerType.ArrowClosed\n        }\n      }), eds);\n    });\n  }, [setEdges]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ReactFlow, {\n    nodes: nodes,\n    edges: edges,\n    onNodesChange: onNodesChange,\n    onEdgesChange: onEdgesChange,\n    onConnect: onConnect,\n    onDisconnect: onDisconnect,\n    nodeTypes: nodeTypes,\n    edgeTypes: edgeTypes,\n    snapToGrid: true,\n    fitView: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"names":["React","useCallback","useState","ReactFlow","addEdge","applyEdgeChanges","applyNodeChanges","MarkerType","useNodesState","useEdgesState","ButtonEdge","ShaderNode","initialNodes","id","type","position","x","y","data","value","initialEdges","nodeTypes","shaderNode","edgeTypes","buttonEdge","Graph","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","onRemoveEdge","splice","onConnect","params","eds","animated","markerEnd","color","onDisconnect","connection","console","log","ArrowClosed","height"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/Graph.js"],"sourcesContent":["import React from \"react\";\r\nimport { useCallback, useState } from \"react\";\r\nimport ReactFlow, {\r\n  addEdge,\r\n  applyEdgeChanges,\r\n  applyNodeChanges,\r\n  MarkerType,\r\n  useNodesState,\r\n  useEdgesState,\r\n} from \"react-flow-renderer\";\r\nimport ButtonEdge from './ButtonEdge.js';\r\nimport ShaderNode from \"./ShaderNode.js\";\r\n\r\nimport \"./styles.css\";\r\n\r\nconst initialNodes = [\r\n  {\r\n    id: \"node-1\",\r\n    type: \"shaderNode\",\r\n    position: { x: 0, y: 0 },\r\n    data: { value: 123 }\r\n  },\r\n  {\r\n    id: \"node-2\",\r\n    type: \"shaderNode\",\r\n    position: { x: 250, y: 0 },\r\n    data: { value: 1 }\r\n  },\r\n  {\r\n    id: \"node-3\",\r\n    type: \"shaderNode\",\r\n    position: { x: 250, y: -300},\r\n    data: { value: 1 }\r\n  }\r\n];\r\n\r\nconst initialEdges = [\r\n\r\n];\r\n\r\nconst nodeTypes = { shaderNode: ShaderNode };\r\nconst edgeTypes = { buttonEdge: ButtonEdge };\r\n\r\nexport default function Graph() {\r\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\r\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\r\n\r\n  // no funciona: borra todos\r\n  const onRemoveEdge = (id) =>{\r\n    setEdges(edges.splice(id, 1));\r\n  }\r\n\r\n  const onConnect = useCallback(\r\n    (params) => setEdges((eds) => addEdge({ ...params, animated:true, markerEnd: { type: 'arrow', color: '#f00' }, type: 'buttonEdge', data: {onRemoveEdge: onRemoveEdge} }, eds)),\r\n    []\r\n  );\r\n\r\n  const onDisconnect = useCallback(\r\n    (connection) => {\r\n      console.log(connection);\r\n      setEdges((eds) => addEdge({...connection, animated: true, markerEnd:{\r\n        type: MarkerType.ArrowClosed,\r\n      }}, eds))\r\n    },\r\n    [setEdges]\r\n  );\r\n\r\n  return (\r\n    <div style={{height: \"100vh\"}}>\r\n      <ReactFlow\r\n        nodes={nodes}\r\n        edges={edges}\r\n\r\n        onNodesChange={onNodesChange}\r\n        onEdgesChange={onEdgesChange}\r\n\r\n        onConnect={onConnect}\r\n        onDisconnect={onDisconnect}\r\n\r\n        nodeTypes={nodeTypes}\r\n        edgeTypes={edgeTypes}\r\n\r\n        snapToGrid={true}\r\n        fitView\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}