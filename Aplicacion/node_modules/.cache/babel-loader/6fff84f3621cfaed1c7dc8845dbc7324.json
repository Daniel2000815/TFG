{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect}from'react';import CustomNode from'../CustomNodes/CustomNode';import FloatInput from'../CustomComponents/FloatInput.js';import{createTheme,ThemeProvider}from'@mui/material/styles';import useLocalStorage from'../storageHook';import newId from'../uniqueIdHook';var theme=createTheme({palette:{primary:{light:'#92bcff',main:'#609dff',dark:'#166cf5',contrastText:'white'}}});export default function PrimitiveNode(_ref){var data=_ref.data,id=_ref.id;var _React$useState=React.useState('sphere'),_React$useState2=_slicedToArray(_React$useState,2),primitive=_React$useState2[0],setPrimitive=_React$useState2[1];var _React$useState3=React.useState(''),_React$useState4=_slicedToArray(_React$useState3,2),sdf=_React$useState4[0],setSdf=_React$useState4[1];var _React$useState5=React.useState([1.0,1.0,1.0]),_React$useState6=_slicedToArray(_React$useState5,2),inputs=_React$useState6[0],setInputs=_React$useState6[1];var _React$useState7=React.useState(['Radius','','']),_React$useState8=_slicedToArray(_React$useState7,2),inputLabels=_React$useState8[0],setInputLabels=_React$useState8[1];var _useLocalStorage=useLocalStorage('user_implicits',{}),_useLocalStorage2=_slicedToArray(_useLocalStorage,1),storage=_useLocalStorage2[0];var handleInputChange=function handleInputChange(newVal,idx){var newInputs=_toConsumableArray(inputs);newInputs[idx]=newVal;setInputs(newInputs);};useEffect(function(){var parameters=storage[primitive].parameters;console.log('TYPE: '+typeof parameters[0].defaultVal);setInputs(Object.keys(parameters).map(function(k){return parameters[k].defaultVal;}));setInputLabels(Object.keys(parameters).map(function(k){return parameters[k].label;}));// setInputs(Array(parameters.length).fill().map((_, idx) => parameters[idx].defaultVal));\nconsole.log(parameters);console.log(primitive);},[primitive]);useEffect(function(){var parameters=storage[primitive].parameters;setSdf(\"\".concat(primitive,\"(p \").concat(parameters.length>0?',':'').concat(parameters.map(function(p,idx){return\"\".concat(inputs[idx].toFixed(4));}).join(','),\")\"));},[inputs]);return/*#__PURE__*/React.createElement(ThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(CustomNode,{title:'Primitive',id:id,data:data,dropdownOptions:Object.keys(storage),body:/*#__PURE__*/React.createElement(React.Fragment,null,inputs.map(function(input,idx){return/*#__PURE__*/React.createElement(\"div\",{key:newId('floatInputContainer_')},/*#__PURE__*/React.createElement(FloatInput,{val:inputs[idx],handleChange:function handleChange(newVal){return handleInputChange(newVal,idx);},label:inputLabels[0]}));})),onChangeOption:setPrimitive,sdf:sdf,currOption:primitive,nInputs:0}));}","map":{"version":3,"names":["React","useEffect","CustomNode","FloatInput","createTheme","ThemeProvider","useLocalStorage","newId","theme","palette","primary","light","main","dark","contrastText","PrimitiveNode","data","id","useState","primitive","setPrimitive","sdf","setSdf","inputs","setInputs","inputLabels","setInputLabels","storage","handleInputChange","newVal","idx","newInputs","parameters","console","log","defaultVal","Object","keys","map","k","label","length","p","toFixed","join","input"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/CustomNodes/PrimitiveNode.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport CustomNode from '../CustomNodes/CustomNode';\r\nimport FloatInput from '../CustomComponents/FloatInput.js';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport useLocalStorage from '../storageHook';\r\nimport newId from '../uniqueIdHook';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      light: '#92bcff',\r\n      main: '#609dff',\r\n      dark: '#166cf5',\r\n      contrastText: 'white',\r\n    },\r\n  },\r\n});\r\n\r\nexport default function PrimitiveNode({ data, id }) {\r\n  const [primitive, setPrimitive] = React.useState('sphere');\r\n  const [sdf, setSdf] = React.useState('');\r\n  const [inputs, setInputs] = React.useState([1.0, 1.0, 1.0]);\r\n  const [inputLabels, setInputLabels] = React.useState(['Radius', '', '']);\r\n  const [storage] = useLocalStorage('user_implicits', {});\r\n\r\n  const handleInputChange = (newVal, idx) => {\r\n    const newInputs = [...inputs];\r\n    newInputs[idx] = newVal;\r\n\r\n    setInputs(newInputs);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const parameters = storage[primitive].parameters;\r\n\r\n    console.log('TYPE: ' + typeof parameters[0].defaultVal);\r\n    setInputs(\r\n      Object.keys(parameters).map(function (k) {\r\n        return parameters[k].defaultVal;\r\n      })\r\n    );\r\n    setInputLabels(\r\n      Object.keys(parameters).map(function (k) {\r\n        return parameters[k].label;\r\n      })\r\n    );\r\n\r\n    // setInputs(Array(parameters.length).fill().map((_, idx) => parameters[idx].defaultVal));\r\n    console.log(parameters);\r\n    console.log(primitive);\r\n  }, [primitive]);\r\n\r\n  useEffect(() => {\r\n    const parameters = storage[primitive].parameters;\r\n    setSdf(\r\n      `${primitive}(p ${parameters.length > 0 ? ',' : ''}${parameters\r\n        .map((p, idx) => `${inputs[idx].toFixed(4)}`)\r\n        .join(',')})`\r\n    );\r\n  }, [inputs]);\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CustomNode\r\n        title={'Primitive'}\r\n        id={id}\r\n        data={data}\r\n        dropdownOptions={Object.keys(storage)}\r\n        body={\r\n          <>\r\n            {inputs.map(function (input, idx) {\r\n              return (\r\n                <div key={newId('floatInputContainer_')}>\r\n                  <FloatInput\r\n                    val={inputs[idx]}\r\n                    handleChange={(newVal) => handleInputChange(newVal, idx)}\r\n                    label={inputLabels[0]}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </>\r\n        }\r\n        onChangeOption={setPrimitive}\r\n        sdf={sdf}\r\n        currOption={primitive}\r\n        nInputs={0}\r\n      />\r\n    </ThemeProvider>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}