{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonMactionMixin = exports.TooltipData = void 0;\n\nvar string_js_1 = require(\"../../../util/string.js\");\n\nexports.TooltipData = {\n  dx: '.2em',\n  dy: '.1em',\n  postDelay: 600,\n  clearDelay: 100,\n  hoverTimer: new Map(),\n  clearTimer: new Map(),\n  stopTimers: function stopTimers(node, data) {\n    if (data.clearTimer.has(node)) {\n      clearTimeout(data.clearTimer.get(node));\n      data.clearTimer.delete(node);\n    }\n\n    if (data.hoverTimer.has(node)) {\n      clearTimeout(data.hoverTimer.get(node));\n      data.hoverTimer.delete(node);\n    }\n  }\n};\n\nfunction CommonMactionMixin(Base) {\n  return function (_super) {\n    __extends(class_1, _super);\n\n    function class_1() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var _this = _super.apply(this, __spreadArray([], __read(args), false)) || this;\n\n      var actions = _this.constructor.actions;\n\n      var action = _this.node.attributes.get('actiontype');\n\n      var _a = __read(actions.get(action) || [function (_node, _data) {}, {}], 2),\n          handler = _a[0],\n          data = _a[1];\n\n      _this.action = handler;\n      _this.data = data;\n\n      _this.getParameters();\n\n      return _this;\n    }\n\n    Object.defineProperty(class_1.prototype, \"selected\", {\n      get: function get() {\n        var selection = this.node.attributes.get('selection');\n        var i = Math.max(1, Math.min(this.childNodes.length, selection)) - 1;\n        return this.childNodes[i] || this.wrap(this.node.selected);\n      },\n      enumerable: false,\n      configurable: true\n    });\n\n    class_1.prototype.getParameters = function () {\n      var offsets = this.node.attributes.get('data-offsets');\n\n      var _a = __read((0, string_js_1.split)(offsets || ''), 2),\n          dx = _a[0],\n          dy = _a[1];\n\n      this.dx = this.length2em(dx || exports.TooltipData.dx);\n      this.dy = this.length2em(dy || exports.TooltipData.dy);\n    };\n\n    class_1.prototype.computeBBox = function (bbox, recompute) {\n      if (recompute === void 0) {\n        recompute = false;\n      }\n\n      bbox.updateFrom(this.selected.getOuterBBox());\n      this.selected.setChildPWidths(recompute);\n    };\n\n    return class_1;\n  }(Base);\n}\n\nexports.CommonMactionMixin = CommonMactionMixin;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;;AAmBaA,sBAAc;EACzBC,EAAE,EAAE,MADqB;EAEzBC,EAAE,EAAE,MAFqB;EAIzBC,SAAS,EAAE,GAJc;EAKzBC,UAAU,EAAE,GALa;EAOzBC,UAAU,EAAE,IAAIC,GAAJ,EAPa;EAQzBC,UAAU,EAAE,IAAID,GAAJ,EARa;EAazBE,UAAU,EAAE,oBAACC,IAAD,EAAYC,IAAZ,EAA4B;IACtC,IAAIA,IAAI,CAACH,UAAL,CAAgBI,GAAhB,CAAoBF,IAApB,CAAJ,EAA+B;MAC7BG,YAAY,CAACF,IAAI,CAACH,UAAL,CAAgBM,GAAhB,CAAoBJ,IAApB,CAAD,CAAZ;MACAC,IAAI,CAACH,UAAL,CAAgBO,MAAhB,CAAuBL,IAAvB;IACD;;IACD,IAAIC,IAAI,CAACL,UAAL,CAAgBM,GAAhB,CAAoBF,IAApB,CAAJ,EAA+B;MAC7BG,YAAY,CAACF,IAAI,CAACL,UAAL,CAAgBQ,GAAhB,CAAoBJ,IAApB,CAAD,CAAZ;MACAC,IAAI,CAACL,UAAL,CAAgBS,MAAhB,CAAuBL,IAAvB;IACD;EACF;AAtBwB,CAAd;;AA8Eb,SAAgBM,kBAAhB,CAGEC,IAHF,EAGS;EAEP;IAAqBC;;IAkCnB;MAAY;;WAAA,yCAAc;QAAdC;;;MAAZ,wDACWA,IADX,GACe,KADf,MACe,IADf;;MAEE,IAAMC,OAAO,GAAIC,KAAI,CAACC,WAAL,CAA2CF,OAA5D;;MACA,IAAMG,MAAM,GAAGF,KAAI,CAACX,IAAL,CAAUc,UAAV,CAAqBV,GAArB,CAAyB,YAAzB,CAAf;;MACM,gBAAkBM,OAAO,CAACN,GAAR,CAAYS,MAAZ,KAAuB,CAAE,UAACE,KAAD,EAAQC,KAAR,EAAa,CAAO,CAAtB,EAA6C,EAA7C,CAAzC,EAAyF,CAAzF;MAAA,IAACC,OAAO,QAAR;MAAA,IAAUhB,IAAI,QAAd;;MACNU,KAAI,CAACE,MAAL,GAAcI,OAAd;MACAN,KAAI,CAACV,IAAL,GAAYA,IAAZ;;MACAU,KAAI,CAACO,aAAL;;;IACD;;IAnBDC,sBAAWC,iBAAX,EAAW,UAAX,EAAmB;WAAnB;QACE,IAAMC,SAAS,GAAG,KAAKrB,IAAL,CAAUc,UAAV,CAAqBV,GAArB,CAAyB,WAAzB,CAAlB;QACA,IAAMkB,CAAC,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYD,IAAI,CAACE,GAAL,CAAS,KAAKC,UAAL,CAAgBC,MAAzB,EAAiCN,SAAjC,CAAZ,IAA2D,CAArE;QACA,OAAO,KAAKK,UAAL,CAAgBJ,CAAhB,KAAsB,KAAKM,IAAL,CAAW,KAAK5B,IAAL,CAAyB6B,QAApC,CAA7B;MACD,CAJkB;uBAAA;;IAAA,CAAnB;;IAwBOT,kCAAP;MACE,IAAMU,OAAO,GAAG,KAAK9B,IAAL,CAAUc,UAAV,CAAqBV,GAArB,CAAyB,cAAzB,CAAhB;;MACI,gBAAW,uBAAM0B,OAAO,IAAI,EAAjB,CAAX,EAA+B,CAA/B;MAAA,IAACtC,EAAE,QAAH;MAAA,IAAKC,EAAE,QAAP;;MACJ,KAAKD,EAAL,GAAU,KAAKuC,SAAL,CAAevC,EAAE,IAAID,oBAAYC,EAAjC,CAAV;MACA,KAAKC,EAAL,GAAU,KAAKsC,SAAL,CAAetC,EAAE,IAAIF,oBAAYE,EAAjC,CAAV;IACD,CALM;;IAUA2B,gCAAP,UAAmBY,IAAnB,EAA+BC,SAA/B,EAAyD;MAA1B;QAAAA;MAA0B;;MACvDD,IAAI,CAACE,UAAL,CAAgB,KAAKL,QAAL,CAAcM,YAAd,EAAhB;MACA,KAAKN,QAAL,CAAcO,eAAd,CAA8BH,SAA9B;IACD,CAHM;;IAKT;EAAC,CA9DD,CAAqB1B,IAArB;AAgED;;AArEDhB","names":["exports","dx","dy","postDelay","clearDelay","hoverTimer","Map","clearTimer","stopTimers","node","data","has","clearTimeout","get","delete","CommonMactionMixin","Base","__extends","args","actions","_this","constructor","action","attributes","_node","_data","handler","getParameters","Object","class_1","selection","i","Math","max","min","childNodes","length","wrap","selected","offsets","length2em","bbox","recompute","updateFrom","getOuterBBox","setChildPWidths"],"sourceRoot":"","sources":["../../../../ts/output/common/Wrappers/maction.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}