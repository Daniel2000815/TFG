{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MathMLCompile = void 0;\n\nvar MmlNode_js_1 = require(\"../../core/MmlTree/MmlNode.js\");\n\nvar Options_js_1 = require(\"../../util/Options.js\");\n\nvar Entities = __importStar(require(\"../../util/Entities.js\"));\n\nvar MathMLCompile = function () {\n  function MathMLCompile(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var Class = this.constructor;\n    this.options = (0, Options_js_1.userOptions)((0, Options_js_1.defaultOptions)({}, Class.OPTIONS), options);\n  }\n\n  MathMLCompile.prototype.setMmlFactory = function (mmlFactory) {\n    this.factory = mmlFactory;\n  };\n\n  MathMLCompile.prototype.compile = function (node) {\n    var mml = this.makeNode(node);\n    mml.verifyTree(this.options['verify']);\n    mml.setInheritedAttributes({}, false, 0, false);\n    mml.walkTree(this.markMrows);\n    return mml;\n  };\n\n  MathMLCompile.prototype.makeNode = function (node) {\n    var e_1, _a;\n\n    var adaptor = this.adaptor;\n    var limits = false;\n    var kind = adaptor.kind(node).replace(/^.*:/, '');\n    var texClass = adaptor.getAttribute(node, 'data-mjx-texclass') || '';\n\n    if (texClass) {\n      texClass = this.filterAttribute('data-mjx-texclass', texClass) || '';\n    }\n\n    var type = texClass && kind === 'mrow' ? 'TeXAtom' : kind;\n\n    try {\n      for (var _b = __values(this.filterClassList(adaptor.allClasses(node))), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var name_1 = _c.value;\n\n        if (name_1.match(/^MJX-TeXAtom-/) && kind === 'mrow') {\n          texClass = name_1.substr(12);\n          type = 'TeXAtom';\n        } else if (name_1 === 'MJX-fixedlimits') {\n          limits = true;\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    this.factory.getNodeClass(type) || this.error('Unknown node type \"' + type + '\"');\n    var mml = this.factory.create(type);\n\n    if (type === 'TeXAtom' && texClass === 'OP' && !limits) {\n      mml.setProperty('movesupsub', true);\n      mml.attributes.setInherited('movablelimits', true);\n    }\n\n    if (texClass) {\n      mml.texClass = MmlNode_js_1.TEXCLASS[texClass];\n      mml.setProperty('texClass', mml.texClass);\n    }\n\n    this.addAttributes(mml, node);\n    this.checkClass(mml, node);\n    this.addChildren(mml, node);\n    return mml;\n  };\n\n  MathMLCompile.prototype.addAttributes = function (mml, node) {\n    var e_2, _a;\n\n    var ignoreVariant = false;\n\n    try {\n      for (var _b = __values(this.adaptor.allAttributes(node)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var attr = _c.value;\n        var name_2 = attr.name;\n        var value = this.filterAttribute(name_2, attr.value);\n\n        if (value === null || name_2 === 'xmlns') {\n          continue;\n        }\n\n        if (name_2.substr(0, 9) === 'data-mjx-') {\n          switch (name_2.substr(9)) {\n            case 'alternate':\n              mml.setProperty('variantForm', true);\n              break;\n\n            case 'variant':\n              mml.attributes.set('mathvariant', value);\n              ignoreVariant = true;\n              break;\n\n            case 'smallmatrix':\n              mml.setProperty('scriptlevel', 1);\n              mml.setProperty('useHeight', false);\n              break;\n\n            case 'accent':\n              mml.setProperty('mathaccent', value === 'true');\n              break;\n\n            case 'auto-op':\n              mml.setProperty('autoOP', value === 'true');\n              break;\n\n            case 'script-align':\n              mml.setProperty('scriptalign', value);\n              break;\n          }\n        } else if (name_2 !== 'class') {\n          var val = value.toLowerCase();\n\n          if (val === 'true' || val === 'false') {\n            mml.attributes.set(name_2, val === 'true');\n          } else if (!ignoreVariant || name_2 !== 'mathvariant') {\n            mml.attributes.set(name_2, value);\n          }\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n  };\n\n  MathMLCompile.prototype.filterAttribute = function (_name, value) {\n    return value;\n  };\n\n  MathMLCompile.prototype.filterClassList = function (list) {\n    return list;\n  };\n\n  MathMLCompile.prototype.addChildren = function (mml, node) {\n    var e_3, _a;\n\n    if (mml.arity === 0) {\n      return;\n    }\n\n    var adaptor = this.adaptor;\n\n    try {\n      for (var _b = __values(adaptor.childNodes(node)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var child = _c.value;\n        var name_3 = adaptor.kind(child);\n\n        if (name_3 === '#comment') {\n          continue;\n        }\n\n        if (name_3 === '#text') {\n          this.addText(mml, child);\n        } else if (mml.isKind('annotation-xml')) {\n          mml.appendChild(this.factory.create('XML').setXML(child, adaptor));\n        } else {\n          var childMml = mml.appendChild(this.makeNode(child));\n\n          if (childMml.arity === 0 && adaptor.childNodes(child).length) {\n            if (this.options['fixMisplacedChildren']) {\n              this.addChildren(mml, child);\n            } else {\n              childMml.mError('There should not be children for ' + childMml.kind + ' nodes', this.options['verify'], true);\n            }\n          }\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n  };\n\n  MathMLCompile.prototype.addText = function (mml, child) {\n    var text = this.adaptor.value(child);\n\n    if ((mml.isToken || mml.getProperty('isChars')) && mml.arity) {\n      if (mml.isToken) {\n        text = Entities.translate(text);\n        text = this.trimSpace(text);\n      }\n\n      mml.appendChild(this.factory.create('text').setText(text));\n    } else if (text.match(/\\S/)) {\n      this.error('Unexpected text node \"' + text + '\"');\n    }\n  };\n\n  MathMLCompile.prototype.checkClass = function (mml, node) {\n    var e_4, _a;\n\n    var classList = [];\n\n    try {\n      for (var _b = __values(this.filterClassList(this.adaptor.allClasses(node))), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var name_4 = _c.value;\n\n        if (name_4.substr(0, 4) === 'MJX-') {\n          if (name_4 === 'MJX-variant') {\n            mml.setProperty('variantForm', true);\n          } else if (name_4.substr(0, 11) !== 'MJX-TeXAtom') {\n            mml.attributes.set('mathvariant', this.fixCalligraphic(name_4.substr(3)));\n          }\n        } else {\n          classList.push(name_4);\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    if (classList.length) {\n      mml.attributes.set('class', classList.join(' '));\n    }\n  };\n\n  MathMLCompile.prototype.fixCalligraphic = function (variant) {\n    return variant.replace(/caligraphic/, 'calligraphic');\n  };\n\n  MathMLCompile.prototype.markMrows = function (mml) {\n    if (mml.isKind('mrow') && !mml.isInferred && mml.childNodes.length >= 2) {\n      var first = mml.childNodes[0];\n      var last = mml.childNodes[mml.childNodes.length - 1];\n\n      if (first.isKind('mo') && first.attributes.get('fence') && first.attributes.get('stretchy') && last.isKind('mo') && last.attributes.get('fence') && last.attributes.get('stretchy')) {\n        if (first.childNodes.length) {\n          mml.setProperty('open', first.getText());\n        }\n\n        if (last.childNodes.length) {\n          mml.setProperty('close', last.getText());\n        }\n      }\n    }\n  };\n\n  MathMLCompile.prototype.trimSpace = function (text) {\n    return text.replace(/[\\t\\n\\r]/g, ' ').replace(/^ +/, '').replace(/ +$/, '').replace(/  +/g, ' ');\n  };\n\n  MathMLCompile.prototype.error = function (message) {\n    throw new Error(message);\n  };\n\n  MathMLCompile.OPTIONS = {\n    MmlFactory: null,\n    fixMisplacedChildren: true,\n    verify: __assign({}, MmlNode_js_1.AbstractMmlNode.verifyDefaults),\n    translateEntities: true\n  };\n  return MathMLCompile;\n}();\n\nexports.MathMLCompile = MathMLCompile;","map":{"version":3,"mappings":"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","names":["options","Class","constructor","OPTIONS","MathMLCompile","mmlFactory","factory","node","mml","makeNode","verifyTree","setInheritedAttributes","walkTree","markMrows","adaptor","limits","kind","replace","texClass","getAttribute","filterAttribute","type","filterClassList","allClasses","_c","name_1","match","substr","getNodeClass","error","create","setProperty","attributes","setInherited","MmlNode_js_1","addAttributes","checkClass","addChildren","ignoreVariant","allAttributes","attr","name_2","name","value","set","val","toLowerCase","_name","list","arity","childNodes","child","name_3","addText","isKind","appendChild","setXML","childMml","length","mError","text","isToken","getProperty","Entities","translate","trimSpace","setText","classList","name_4","fixCalligraphic","push","join","variant","isInferred","first","last","get","getText","message","Error","MmlFactory","fixMisplacedChildren","verify","verifyDefaults","translateEntities","exports"],"sourceRoot":"","sources":["../../../ts/input/mathml/MathMLCompile.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}