{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nvar originalSetItem = localStorage.setItem;\n\nlocalStorage.setItem = function () {\n  var event = new Event('storageChange');\n  document.dispatchEvent(event);\n  originalSetItem.apply(this, arguments);\n};\n\nvar originalRemoveItem = localStorage.removeItem;\n\nlocalStorage.removeItem = function () {\n  var event = new Event('storageChange');\n  document.dispatchEvent(event);\n  originalRemoveItem.apply(this, arguments);\n};\n\nfunction useLocalStorage(key) {\n  var storageItem = localStorage.getItem(key);\n\n  var _React$useState = React.useState(!!storageItem ? JSON.parse(storageItem) : null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      storedValue = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  var setLocalItem = function setLocalItem() {\n    /** local storage update is not that fast */\n\n    /** it makes sure that we are getting the new value  */\n    setTimeout(function () {\n      var itemValueFromStorage = localStorage.getItem(key);\n      var value = itemValueFromStorage && JSON.parse(itemValueFromStorage);\n      setValue(value);\n    }, 50);\n  };\n\n  var setStoredValue = function setStoredValue(value) {\n    var parsedValue = typeof value === 'object' ? JSON.stringify(value) : value;\n    localStorage.setItem(key, parsedValue);\n  };\n\n  React.useEffect(function () {\n    document.addEventListener('storageChange', setLocalItem, false);\n    return function () {\n      return document.removeEventListener('storageChange', setLocalItem);\n    };\n  }, []);\n  return {\n    storedValue: storedValue,\n    setStoredValue: setStoredValue\n  };\n}\n\nexport default useLocalStorage;","map":{"version":3,"names":["React","originalSetItem","localStorage","setItem","event","Event","document","dispatchEvent","apply","arguments","originalRemoveItem","removeItem","useLocalStorage","key","storageItem","getItem","useState","JSON","parse","storedValue","setValue","setLocalItem","setTimeout","itemValueFromStorage","value","setStoredValue","parsedValue","stringify","useEffect","addEventListener","removeEventListener"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/storageHook.js"],"sourcesContent":["import * as React from 'react'\r\n\r\nconst originalSetItem = localStorage.setItem\r\nlocalStorage.setItem = function() {\r\n  const event = new Event('storageChange')\r\n  document.dispatchEvent(event)\r\n  originalSetItem.apply(this, arguments)\r\n}\r\nconst originalRemoveItem = localStorage.removeItem\r\nlocalStorage.removeItem = function() {\r\n  const event = new Event('storageChange')\r\n  document.dispatchEvent(event)\r\n  originalRemoveItem.apply(this, arguments)\r\n}\r\n\r\nfunction useLocalStorage(key) {\r\n  const storageItem = localStorage.getItem(key)\r\n\r\n  const [storedValue, setValue] = React.useState(\r\n    !!storageItem ? JSON.parse(storageItem) : null\r\n  )\r\n\r\n  const setLocalItem = () => {\r\n    /** local storage update is not that fast */\r\n    /** it makes sure that we are getting the new value  */\r\n    setTimeout(() => {\r\n      const itemValueFromStorage = localStorage.getItem(key)\r\n      const value = itemValueFromStorage && JSON.parse(itemValueFromStorage)\r\n      setValue(value)\r\n    }, 50)\r\n  }\r\n\r\n  const setStoredValue = (value) => {\r\n    const parsedValue = typeof value === 'object' ? JSON.stringify(value) : value\r\n    localStorage.setItem(key, parsedValue)\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    document.addEventListener(\r\n      'storageChange',\r\n      setLocalItem,\r\n      false\r\n    )\r\n\r\n    return () => document.removeEventListener('storageChange', setLocalItem)\r\n  }, [])\r\n\r\n  return { storedValue, setStoredValue }\r\n}\r\n\r\nexport default useLocalStorage;"],"mappings":";AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAEA,IAAMC,eAAe,GAAGC,YAAY,CAACC,OAArC;;AACAD,YAAY,CAACC,OAAb,GAAuB,YAAW;EAChC,IAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAU,eAAV,CAAd;EACAC,QAAQ,CAACC,aAAT,CAAuBH,KAAvB;EACAH,eAAe,CAACO,KAAhB,CAAsB,IAAtB,EAA4BC,SAA5B;AACD,CAJD;;AAKA,IAAMC,kBAAkB,GAAGR,YAAY,CAACS,UAAxC;;AACAT,YAAY,CAACS,UAAb,GAA0B,YAAW;EACnC,IAAMP,KAAK,GAAG,IAAIC,KAAJ,CAAU,eAAV,CAAd;EACAC,QAAQ,CAACC,aAAT,CAAuBH,KAAvB;EACAM,kBAAkB,CAACF,KAAnB,CAAyB,IAAzB,EAA+BC,SAA/B;AACD,CAJD;;AAMA,SAASG,eAAT,CAAyBC,GAAzB,EAA8B;EAC5B,IAAMC,WAAW,GAAGZ,YAAY,CAACa,OAAb,CAAqBF,GAArB,CAApB;;EAEA,sBAAgCb,KAAK,CAACgB,QAAN,CAC9B,CAAC,CAACF,WAAF,GAAgBG,IAAI,CAACC,KAAL,CAAWJ,WAAX,CAAhB,GAA0C,IADZ,CAAhC;EAAA;EAAA,IAAOK,WAAP;EAAA,IAAoBC,QAApB;;EAIA,IAAMC,YAAY,GAAG,SAAfA,YAAe,GAAM;IACzB;;IACA;IACAC,UAAU,CAAC,YAAM;MACf,IAAMC,oBAAoB,GAAGrB,YAAY,CAACa,OAAb,CAAqBF,GAArB,CAA7B;MACA,IAAMW,KAAK,GAAGD,oBAAoB,IAAIN,IAAI,CAACC,KAAL,CAAWK,oBAAX,CAAtC;MACAH,QAAQ,CAACI,KAAD,CAAR;IACD,CAJS,EAIP,EAJO,CAAV;EAKD,CARD;;EAUA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACD,KAAD,EAAW;IAChC,IAAME,WAAW,GAAG,OAAOF,KAAP,KAAiB,QAAjB,GAA4BP,IAAI,CAACU,SAAL,CAAeH,KAAf,CAA5B,GAAoDA,KAAxE;IACAtB,YAAY,CAACC,OAAb,CAAqBU,GAArB,EAA0Ba,WAA1B;EACD,CAHD;;EAKA1B,KAAK,CAAC4B,SAAN,CAAgB,YAAM;IACpBtB,QAAQ,CAACuB,gBAAT,CACE,eADF,EAEER,YAFF,EAGE,KAHF;IAMA,OAAO;MAAA,OAAMf,QAAQ,CAACwB,mBAAT,CAA6B,eAA7B,EAA8CT,YAA9C,CAAN;IAAA,CAAP;EACD,CARD,EAQG,EARH;EAUA,OAAO;IAAEF,WAAW,EAAXA,WAAF;IAAeM,cAAc,EAAdA;EAAf,CAAP;AACD;;AAED,eAAeb,eAAf"},"metadata":{},"sourceType":"module"}