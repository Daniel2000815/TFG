{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MmlMo = void 0;\n\nvar MmlNode_js_1 = require(\"../MmlNode.js\");\n\nvar OperatorDictionary_js_1 = require(\"../OperatorDictionary.js\");\n\nvar string_js_1 = require(\"../../../util/string.js\");\n\nvar MmlMo = function (_super) {\n  __extends(MmlMo, _super);\n\n  function MmlMo() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._texClass = null;\n    _this.lspace = 5 / 18;\n    _this.rspace = 5 / 18;\n    return _this;\n  }\n\n  Object.defineProperty(MmlMo.prototype, \"texClass\", {\n    get: function get() {\n      if (this._texClass === null) {\n        var mo = this.getText();\n\n        var _a = __read(this.handleExplicitForm(this.getForms()), 3),\n            form1 = _a[0],\n            form2 = _a[1],\n            form3 = _a[2];\n\n        var OPTABLE_1 = this.constructor.OPTABLE;\n        var def = OPTABLE_1[form1][mo] || OPTABLE_1[form2][mo] || OPTABLE_1[form3][mo];\n        return def ? def[2] : MmlNode_js_1.TEXCLASS.REL;\n      }\n\n      return this._texClass;\n    },\n    set: function set(value) {\n      this._texClass = value;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MmlMo.prototype, \"kind\", {\n    get: function get() {\n      return 'mo';\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MmlMo.prototype, \"isEmbellished\", {\n    get: function get() {\n      return true;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(MmlMo.prototype, \"hasNewLine\", {\n    get: function get() {\n      return this.attributes.get('linebreak') === 'newline';\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  MmlMo.prototype.coreParent = function () {\n    var embellished = this;\n    var parent = this;\n    var math = this.factory.getNodeClass('math');\n\n    while (parent && parent.isEmbellished && parent.coreMO() === this && !(parent instanceof math)) {\n      embellished = parent;\n      parent = parent.parent;\n    }\n\n    return embellished;\n  };\n\n  MmlMo.prototype.coreText = function (parent) {\n    if (!parent) {\n      return '';\n    }\n\n    if (parent.isEmbellished) {\n      return parent.coreMO().getText();\n    }\n\n    while (((parent.isKind('mrow') || parent.isKind('TeXAtom') && parent.texClass !== MmlNode_js_1.TEXCLASS.VCENTER || parent.isKind('mstyle') || parent.isKind('mphantom')) && parent.childNodes.length === 1 || parent.isKind('munderover')) && parent.childNodes[0]) {\n      parent = parent.childNodes[0];\n    }\n\n    return parent.isToken ? parent.getText() : '';\n  };\n\n  MmlMo.prototype.hasSpacingAttributes = function () {\n    return this.attributes.isSet('lspace') || this.attributes.isSet('rspace');\n  };\n\n  Object.defineProperty(MmlMo.prototype, \"isAccent\", {\n    get: function get() {\n      var accent = false;\n      var node = this.coreParent().parent;\n\n      if (node) {\n        var key = node.isKind('mover') ? node.childNodes[node.over].coreMO() ? 'accent' : '' : node.isKind('munder') ? node.childNodes[node.under].coreMO() ? 'accentunder' : '' : node.isKind('munderover') ? this === node.childNodes[node.over].coreMO() ? 'accent' : this === node.childNodes[node.under].coreMO() ? 'accentunder' : '' : '';\n\n        if (key) {\n          var value = node.attributes.getExplicit(key);\n          accent = value !== undefined ? accent : this.attributes.get('accent');\n        }\n      }\n\n      return accent;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  MmlMo.prototype.setTeXclass = function (prev) {\n    var _a = this.attributes.getList('form', 'fence'),\n        form = _a.form,\n        fence = _a.fence;\n\n    if (this.getProperty('texClass') === undefined && (this.attributes.isSet('lspace') || this.attributes.isSet('rspace'))) {\n      return null;\n    }\n\n    if (fence && this.texClass === MmlNode_js_1.TEXCLASS.REL) {\n      if (form === 'prefix') {\n        this.texClass = MmlNode_js_1.TEXCLASS.OPEN;\n      }\n\n      if (form === 'postfix') {\n        this.texClass = MmlNode_js_1.TEXCLASS.CLOSE;\n      }\n    }\n\n    return this.adjustTeXclass(prev);\n  };\n\n  MmlMo.prototype.adjustTeXclass = function (prev) {\n    var texClass = this.texClass;\n    var prevClass = this.prevClass;\n\n    if (texClass === MmlNode_js_1.TEXCLASS.NONE) {\n      return prev;\n    }\n\n    if (prev) {\n      if (prev.getProperty('autoOP') && (texClass === MmlNode_js_1.TEXCLASS.BIN || texClass === MmlNode_js_1.TEXCLASS.REL)) {\n        prevClass = prev.texClass = MmlNode_js_1.TEXCLASS.ORD;\n      }\n\n      prevClass = this.prevClass = prev.texClass || MmlNode_js_1.TEXCLASS.ORD;\n      this.prevLevel = this.attributes.getInherited('scriptlevel');\n    } else {\n      prevClass = this.prevClass = MmlNode_js_1.TEXCLASS.NONE;\n    }\n\n    if (texClass === MmlNode_js_1.TEXCLASS.BIN && (prevClass === MmlNode_js_1.TEXCLASS.NONE || prevClass === MmlNode_js_1.TEXCLASS.BIN || prevClass === MmlNode_js_1.TEXCLASS.OP || prevClass === MmlNode_js_1.TEXCLASS.REL || prevClass === MmlNode_js_1.TEXCLASS.OPEN || prevClass === MmlNode_js_1.TEXCLASS.PUNCT)) {\n      this.texClass = MmlNode_js_1.TEXCLASS.ORD;\n    } else if (prevClass === MmlNode_js_1.TEXCLASS.BIN && (texClass === MmlNode_js_1.TEXCLASS.REL || texClass === MmlNode_js_1.TEXCLASS.CLOSE || texClass === MmlNode_js_1.TEXCLASS.PUNCT)) {\n      prev.texClass = this.prevClass = MmlNode_js_1.TEXCLASS.ORD;\n    } else if (texClass === MmlNode_js_1.TEXCLASS.BIN) {\n      var child = this;\n      var parent_1 = this.parent;\n\n      while (parent_1 && parent_1.parent && parent_1.isEmbellished && (parent_1.childNodes.length === 1 || !parent_1.isKind('mrow') && parent_1.core() === child)) {\n        child = parent_1;\n        parent_1 = parent_1.parent;\n      }\n\n      if (parent_1.childNodes[parent_1.childNodes.length - 1] === child) {\n        this.texClass = MmlNode_js_1.TEXCLASS.ORD;\n      }\n    }\n\n    return this;\n  };\n\n  MmlMo.prototype.setInheritedAttributes = function (attributes, display, level, prime) {\n    if (attributes === void 0) {\n      attributes = {};\n    }\n\n    if (display === void 0) {\n      display = false;\n    }\n\n    if (level === void 0) {\n      level = 0;\n    }\n\n    if (prime === void 0) {\n      prime = false;\n    }\n\n    _super.prototype.setInheritedAttributes.call(this, attributes, display, level, prime);\n\n    var mo = this.getText();\n    this.checkOperatorTable(mo);\n    this.checkPseudoScripts(mo);\n    this.checkPrimes(mo);\n    this.checkMathAccent(mo);\n  };\n\n  MmlMo.prototype.checkOperatorTable = function (mo) {\n    var e_1, _a;\n\n    var _b = __read(this.handleExplicitForm(this.getForms()), 3),\n        form1 = _b[0],\n        form2 = _b[1],\n        form3 = _b[2];\n\n    this.attributes.setInherited('form', form1);\n    var OPTABLE = this.constructor.OPTABLE;\n    var def = OPTABLE[form1][mo] || OPTABLE[form2][mo] || OPTABLE[form3][mo];\n\n    if (def) {\n      if (this.getProperty('texClass') === undefined) {\n        this.texClass = def[2];\n      }\n\n      try {\n        for (var _c = __values(Object.keys(def[3] || {})), _d = _c.next(); !_d.done; _d = _c.next()) {\n          var name_1 = _d.value;\n          this.attributes.setInherited(name_1, def[3][name_1]);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n\n      this.lspace = (def[0] + 1) / 18;\n      this.rspace = (def[1] + 1) / 18;\n    } else {\n      var range = (0, OperatorDictionary_js_1.getRange)(mo);\n\n      if (range) {\n        if (this.getProperty('texClass') === undefined) {\n          this.texClass = range[2];\n        }\n\n        var spacing = this.constructor.MMLSPACING[range[2]];\n        this.lspace = (spacing[0] + 1) / 18;\n        this.rspace = (spacing[1] + 1) / 18;\n      }\n    }\n  };\n\n  MmlMo.prototype.getForms = function () {\n    var core = this;\n    var parent = this.parent;\n    var Parent = this.Parent;\n\n    while (Parent && Parent.isEmbellished) {\n      core = parent;\n      parent = Parent.parent;\n      Parent = Parent.Parent;\n    }\n\n    if (parent && parent.isKind('mrow') && parent.nonSpaceLength() !== 1) {\n      if (parent.firstNonSpace() === core) {\n        return ['prefix', 'infix', 'postfix'];\n      }\n\n      if (parent.lastNonSpace() === core) {\n        return ['postfix', 'infix', 'prefix'];\n      }\n    }\n\n    return ['infix', 'prefix', 'postfix'];\n  };\n\n  MmlMo.prototype.handleExplicitForm = function (forms) {\n    if (this.attributes.isSet('form')) {\n      var form_1 = this.attributes.get('form');\n      forms = [form_1].concat(forms.filter(function (name) {\n        return name !== form_1;\n      }));\n    }\n\n    return forms;\n  };\n\n  MmlMo.prototype.checkPseudoScripts = function (mo) {\n    var PSEUDOSCRIPTS = this.constructor.pseudoScripts;\n    if (!mo.match(PSEUDOSCRIPTS)) return;\n    var parent = this.coreParent().Parent;\n    var isPseudo = !parent || !(parent.isKind('msubsup') && !parent.isKind('msub'));\n    this.setProperty('pseudoscript', isPseudo);\n\n    if (isPseudo) {\n      this.attributes.setInherited('lspace', 0);\n      this.attributes.setInherited('rspace', 0);\n    }\n  };\n\n  MmlMo.prototype.checkPrimes = function (mo) {\n    var PRIMES = this.constructor.primes;\n    if (!mo.match(PRIMES)) return;\n    var REMAP = this.constructor.remapPrimes;\n    var primes = (0, string_js_1.unicodeString)((0, string_js_1.unicodeChars)(mo).map(function (c) {\n      return REMAP[c];\n    }));\n    this.setProperty('primes', primes);\n  };\n\n  MmlMo.prototype.checkMathAccent = function (mo) {\n    var parent = this.Parent;\n    if (this.getProperty('mathaccent') !== undefined || !parent || !parent.isKind('munderover')) return;\n    var base = parent.childNodes[0];\n    if (base.isEmbellished && base.coreMO() === this) return;\n    var MATHACCENT = this.constructor.mathaccents;\n\n    if (mo.match(MATHACCENT)) {\n      this.setProperty('mathaccent', true);\n    }\n  };\n\n  MmlMo.defaults = __assign(__assign({}, MmlNode_js_1.AbstractMmlTokenNode.defaults), {\n    form: 'infix',\n    fence: false,\n    separator: false,\n    lspace: 'thickmathspace',\n    rspace: 'thickmathspace',\n    stretchy: false,\n    symmetric: false,\n    maxsize: 'infinity',\n    minsize: '0em',\n    largeop: false,\n    movablelimits: false,\n    accent: false,\n    linebreak: 'auto',\n    lineleading: '1ex',\n    linebreakstyle: 'before',\n    indentalign: 'auto',\n    indentshift: '0',\n    indenttarget: '',\n    indentalignfirst: 'indentalign',\n    indentshiftfirst: 'indentshift',\n    indentalignlast: 'indentalign',\n    indentshiftlast: 'indentshift'\n  });\n  MmlMo.MMLSPACING = OperatorDictionary_js_1.MMLSPACING;\n  MmlMo.OPTABLE = OperatorDictionary_js_1.OPTABLE;\n  MmlMo.pseudoScripts = new RegExp(['^[\"\\'*`', \"\\xAA\", \"\\xB0\", \"\\xB2-\\xB4\", \"\\xB9\", \"\\xBA\", \"\\u2018-\\u201F\", \"\\u2032-\\u2037\\u2057\", \"\\u2070\\u2071\", \"\\u2074-\\u207F\", \"\\u2080-\\u208E\", ']+$'].join(''));\n  MmlMo.primes = new RegExp(['^[\"\\'`', \"\\u2018-\\u201F\", ']+$'].join(''));\n  MmlMo.remapPrimes = {\n    0x0022: 0x2033,\n    0x0027: 0x2032,\n    0x0060: 0x2035,\n    0x2018: 0x2035,\n    0x2019: 0x2032,\n    0x201A: 0x2032,\n    0x201B: 0x2035,\n    0x201C: 0x2036,\n    0x201D: 0x2033,\n    0x201E: 0x2033,\n    0x201F: 0x2036\n  };\n  MmlMo.mathaccents = new RegExp(['^[', \"\\xB4\\u0301\\u02CA\", \"`\\u0300\\u02CB\", \"\\xA8\\u0308\", \"~\\u0303\\u02DC\", \"\\xAF\\u0304\\u02C9\", \"\\u02D8\\u0306\", \"\\u02C7\\u030C\", \"^\\u0302\\u02C6\", \"\\u2192\\u20D7\", \"\\u02D9\\u0307\", \"\\u02DA\\u030A\", \"\\u20DB\", \"\\u20DC\", ']$'].join(''));\n  return MmlMo;\n}(MmlNode_js_1.AbstractMmlTokenNode);\n\nexports.MmlMo = MmlMo;","map":{"version":3,"mappings":"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","names":["__extends","_this","Object","MmlMo","_texClass","mo","getText","handleExplicitForm","getForms","form1","form2","form3","OPTABLE_1","constructor","OPTABLE","def","MmlNode_js_1","REL","value","attributes","get","embellished","parent","math","factory","getNodeClass","isEmbellished","coreMO","isKind","texClass","VCENTER","childNodes","length","isToken","isSet","accent","node","coreParent","key","over","under","getExplicit","undefined","prev","getList","form","fence","getProperty","OPEN","CLOSE","adjustTeXclass","prevClass","NONE","BIN","ORD","prevLevel","getInherited","OP","PUNCT","child","parent_1","core","display","level","prime","_super","setInheritedAttributes","call","checkOperatorTable","checkPseudoScripts","checkPrimes","checkMathAccent","setInherited","keys","_d","name_1","lspace","rspace","range","spacing","MMLSPACING","Parent","nonSpaceLength","firstNonSpace","lastNonSpace","forms","form_1","concat","filter","name","PSEUDOSCRIPTS","pseudoScripts","match","isPseudo","setProperty","PRIMES","primes","REMAP","remapPrimes","map","c","base","MATHACCENT","mathaccents","__assign","defaults","separator","stretchy","symmetric","maxsize","minsize","largeop","movablelimits","linebreak","lineleading","linebreakstyle","indentalign","indentshift","indenttarget","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast","OperatorDictionary_js_1","RegExp","join","exports"],"sourceRoot":"","sources":["../../../../ts/core/MmlTree/MmlNodes/mo.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}