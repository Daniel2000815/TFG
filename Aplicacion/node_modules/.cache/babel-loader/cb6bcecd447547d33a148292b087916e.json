{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\CustomNodes\\\\PrimitiveNode.js\";\nimport React, { useEffect } from 'react';\nimport CustomNode from '../CustomNodes/CustomNode';\nimport FloatInput from '../CustomComponents/FloatInput.js';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport useLocalStorage from '../storageHook';\nimport newId from '../uniqueIdHook';\nvar theme = createTheme({\n  palette: {\n    primary: {\n      light: '#92bcff',\n      main: '#609dff',\n      dark: '#166cf5',\n      contrastText: 'white'\n    }\n  }\n});\nexport default function PrimitiveNode(_ref) {\n  var data = _ref.data,\n      id = _ref.id;\n\n  var _React$useState = React.useState('sphere'),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      primitive = _React$useState2[0],\n      setPrimitive = _React$useState2[1];\n\n  var _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      sdf = _React$useState4[0],\n      setSdf = _React$useState4[1];\n\n  var _React$useState5 = React.useState([1.0, 1.0, 1.0]),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      inputs = _React$useState6[0],\n      setInputs = _React$useState6[1];\n\n  var _React$useState7 = React.useState(['Radius', '', '']),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      inputLabels = _React$useState8[0],\n      setInputLabels = _React$useState8[1];\n\n  var _useLocalStorage = useLocalStorage('user_implicits', {}),\n      _useLocalStorage2 = _slicedToArray(_useLocalStorage, 1),\n      storage = _useLocalStorage2[0];\n\n  var handleInputChange = function handleInputChange(newVal, idx) {\n    var newInputs = _toConsumableArray(inputs);\n\n    newInputs[idx] = newVal;\n    setInputs(newInputs);\n  };\n\n  useEffect(function () {\n    if (!storage[primitive]) return;\n    var parameters = storage[primitive].parameters;\n    console.log('TYPE: ' + typeof parameters[0].defaultVal);\n    setInputs(Object.keys(parameters).map(function (k) {\n      return parameters[k].defaultVal;\n    }));\n    setInputLabels(Object.keys(parameters).map(function (k) {\n      return parameters[k].label;\n    })); // setInputs(Array(parameters.length).fill().map((_, idx) => parameters[idx].defaultVal));\n\n    console.log(parameters);\n    console.log(primitive);\n  }, [primitive]);\n  useEffect(function () {\n    if (!storage[primitive]) return;\n    var parameters = storage[primitive].parameters;\n    console.log(inputs);\n    setSdf(\"\".concat(primitive, \"(p \").concat(parameters.length > 0 ? ',' : '').concat(parameters.map(function (p, idx) {\n      return \"\".concat(inputs[idx].toFixed(4));\n    }).join(','), \")\"));\n  }, [inputs]);\n  return /*#__PURE__*/React.createElement(ThemeProvider, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CustomNode, {\n    title: 'Primitive',\n    id: id,\n    data: data,\n    dropdownOptions: Object.keys(storage),\n    body: /*#__PURE__*/React.createElement(React.Fragment, null, inputs.map(function (input, idx) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: newId('floatInputContainer_'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FloatInput, {\n        val: inputs[idx],\n        handleChange: function handleChange(newVal) {\n          return handleInputChange(newVal, idx);\n        },\n        label: inputLabels[0],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 19\n        }\n      }));\n    })),\n    onChangeOption: setPrimitive,\n    sdf: sdf,\n    currOption: primitive,\n    nInputs: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"names":["React","useEffect","CustomNode","FloatInput","createTheme","ThemeProvider","useLocalStorage","newId","theme","palette","primary","light","main","dark","contrastText","PrimitiveNode","data","id","useState","primitive","setPrimitive","sdf","setSdf","inputs","setInputs","inputLabels","setInputLabels","storage","handleInputChange","newVal","idx","newInputs","parameters","console","log","defaultVal","Object","keys","map","k","label","length","p","toFixed","join","input"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/CustomNodes/PrimitiveNode.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport CustomNode from '../CustomNodes/CustomNode';\r\nimport FloatInput from '../CustomComponents/FloatInput.js';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport useLocalStorage from '../storageHook';\r\nimport newId from '../uniqueIdHook';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      light: '#92bcff',\r\n      main: '#609dff',\r\n      dark: '#166cf5',\r\n      contrastText: 'white',\r\n    },\r\n  },\r\n});\r\n\r\nexport default function PrimitiveNode({ data, id }) {\r\n  const [primitive, setPrimitive] = React.useState('sphere');\r\n  const [sdf, setSdf] = React.useState('');\r\n  const [inputs, setInputs] = React.useState([1.0, 1.0, 1.0]);\r\n  const [inputLabels, setInputLabels] = React.useState(['Radius', '', '']);\r\n  const [storage] = useLocalStorage('user_implicits', {});\r\n\r\n  const handleInputChange = (newVal, idx) => {\r\n    const newInputs = [...inputs];\r\n    newInputs[idx] = newVal;\r\n\r\n    setInputs(newInputs);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!storage[primitive])\r\n      return;\r\n\r\n    const parameters = storage[primitive].parameters;\r\n\r\n    console.log('TYPE: ' + typeof parameters[0].defaultVal);\r\n    setInputs(\r\n      Object.keys(parameters).map(function (k) {\r\n        return parameters[k].defaultVal;\r\n      })\r\n    );\r\n    setInputLabels(\r\n      Object.keys(parameters).map(function (k) {\r\n        return parameters[k].label;\r\n      })\r\n    );\r\n\r\n    // setInputs(Array(parameters.length).fill().map((_, idx) => parameters[idx].defaultVal));\r\n    console.log(parameters);\r\n    console.log(primitive);\r\n\r\n  }, [primitive]);\r\n\r\n  useEffect(() => {\r\n    if (!storage[primitive])\r\n      return;\r\n\r\n    const parameters = storage[primitive].parameters;\r\n    console.log(inputs);\r\n    setSdf(\r\n      `${primitive}(p ${parameters.length > 0 ? ',' : ''}${parameters\r\n        .map((p, idx) => `${inputs[idx].toFixed(4)}`)\r\n        .join(',')})`\r\n    );\r\n  }, [inputs]);\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CustomNode\r\n        title={'Primitive'}\r\n        id={id}\r\n        data={data}\r\n        dropdownOptions={Object.keys(storage)}\r\n        body={\r\n          <>\r\n            {inputs.map(function (input, idx) {\r\n              return (\r\n                <div key={newId('floatInputContainer_')}>\r\n                  <FloatInput\r\n                    val={inputs[idx]}\r\n                    handleChange={(newVal) => handleInputChange(newVal, idx)}\r\n                    label={inputLabels[0]}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </>\r\n        }\r\n        onChangeOption={setPrimitive}\r\n        sdf={sdf}\r\n        currOption={primitive}\r\n        nInputs={0}\r\n      />\r\n    </ThemeProvider>\r\n  );\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,UAAP,MAAuB,mCAAvB;AACA,SAASC,WAAT,EAAsBC,aAAtB,QAA2C,sBAA3C;AACA,OAAOC,eAAP,MAA4B,gBAA5B;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AAEA,IAAMC,KAAK,GAAGJ,WAAW,CAAC;EACxBK,OAAO,EAAE;IACPC,OAAO,EAAE;MACPC,KAAK,EAAE,SADA;MAEPC,IAAI,EAAE,SAFC;MAGPC,IAAI,EAAE,SAHC;MAIPC,YAAY,EAAE;IAJP;EADF;AADe,CAAD,CAAzB;AAWA,eAAe,SAASC,aAAT,OAAqC;EAAA,IAAZC,IAAY,QAAZA,IAAY;EAAA,IAANC,EAAM,QAANA,EAAM;;EAClD,sBAAkCjB,KAAK,CAACkB,QAAN,CAAe,QAAf,CAAlC;EAAA;EAAA,IAAOC,SAAP;EAAA,IAAkBC,YAAlB;;EACA,uBAAsBpB,KAAK,CAACkB,QAAN,CAAe,EAAf,CAAtB;EAAA;EAAA,IAAOG,GAAP;EAAA,IAAYC,MAAZ;;EACA,uBAA4BtB,KAAK,CAACkB,QAAN,CAAe,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAf,CAA5B;EAAA;EAAA,IAAOK,MAAP;EAAA,IAAeC,SAAf;;EACA,uBAAsCxB,KAAK,CAACkB,QAAN,CAAe,CAAC,QAAD,EAAW,EAAX,EAAe,EAAf,CAAf,CAAtC;EAAA;EAAA,IAAOO,WAAP;EAAA,IAAoBC,cAApB;;EACA,uBAAkBpB,eAAe,CAAC,gBAAD,EAAmB,EAAnB,CAAjC;EAAA;EAAA,IAAOqB,OAAP;;EAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,MAAD,EAASC,GAAT,EAAiB;IACzC,IAAMC,SAAS,sBAAOR,MAAP,CAAf;;IACAQ,SAAS,CAACD,GAAD,CAAT,GAAiBD,MAAjB;IAEAL,SAAS,CAACO,SAAD,CAAT;EACD,CALD;;EAOA9B,SAAS,CAAC,YAAM;IACd,IAAI,CAAC0B,OAAO,CAACR,SAAD,CAAZ,EACE;IAEF,IAAMa,UAAU,GAAGL,OAAO,CAACR,SAAD,CAAP,CAAmBa,UAAtC;IAEAC,OAAO,CAACC,GAAR,CAAY,WAAW,OAAOF,UAAU,CAAC,CAAD,CAAV,CAAcG,UAA5C;IACAX,SAAS,CACPY,MAAM,CAACC,IAAP,CAAYL,UAAZ,EAAwBM,GAAxB,CAA4B,UAAUC,CAAV,EAAa;MACvC,OAAOP,UAAU,CAACO,CAAD,CAAV,CAAcJ,UAArB;IACD,CAFD,CADO,CAAT;IAKAT,cAAc,CACZU,MAAM,CAACC,IAAP,CAAYL,UAAZ,EAAwBM,GAAxB,CAA4B,UAAUC,CAAV,EAAa;MACvC,OAAOP,UAAU,CAACO,CAAD,CAAV,CAAcC,KAArB;IACD,CAFD,CADY,CAAd,CAZc,CAkBd;;IACAP,OAAO,CAACC,GAAR,CAAYF,UAAZ;IACAC,OAAO,CAACC,GAAR,CAAYf,SAAZ;EAED,CAtBQ,EAsBN,CAACA,SAAD,CAtBM,CAAT;EAwBAlB,SAAS,CAAC,YAAM;IACd,IAAI,CAAC0B,OAAO,CAACR,SAAD,CAAZ,EACE;IAEF,IAAMa,UAAU,GAAGL,OAAO,CAACR,SAAD,CAAP,CAAmBa,UAAtC;IACAC,OAAO,CAACC,GAAR,CAAYX,MAAZ;IACAD,MAAM,WACDH,SADC,gBACca,UAAU,CAACS,MAAX,GAAoB,CAApB,GAAwB,GAAxB,GAA8B,EAD5C,SACiDT,UAAU,CAC5DM,GADkD,CAC9C,UAACI,CAAD,EAAIZ,GAAJ;MAAA,iBAAeP,MAAM,CAACO,GAAD,CAAN,CAAYa,OAAZ,CAAoB,CAApB,CAAf;IAAA,CAD8C,EAElDC,IAFkD,CAE7C,GAF6C,CADjD,OAAN;EAKD,CAXQ,EAWN,CAACrB,MAAD,CAXM,CAAT;EAaA,oBACE,oBAAC,aAAD;IAAe,KAAK,EAAEf,KAAtB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE,oBAAC,UAAD;IACE,KAAK,EAAE,WADT;IAEE,EAAE,EAAES,EAFN;IAGE,IAAI,EAAED,IAHR;IAIE,eAAe,EAAEoB,MAAM,CAACC,IAAP,CAAYV,OAAZ,CAJnB;IAKE,IAAI,eACF,0CACGJ,MAAM,CAACe,GAAP,CAAW,UAAUO,KAAV,EAAiBf,GAAjB,EAAsB;MAChC,oBACE;QAAK,GAAG,EAAEvB,KAAK,CAAC,sBAAD,CAAf;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,gBACE,oBAAC,UAAD;QACE,GAAG,EAAEgB,MAAM,CAACO,GAAD,CADb;QAEE,YAAY,EAAE,sBAACD,MAAD;UAAA,OAAYD,iBAAiB,CAACC,MAAD,EAASC,GAAT,CAA7B;QAAA,CAFhB;QAGE,KAAK,EAAEL,WAAW,CAAC,CAAD,CAHpB;QAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MAAA,EADF,CADF;IASD,CAVA,CADH,CANJ;IAoBE,cAAc,EAAEL,YApBlB;IAqBE,GAAG,EAAEC,GArBP;IAsBE,UAAU,EAAEF,SAtBd;IAuBE,OAAO,EAAE,CAvBX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,CADF;AA6BD"},"metadata":{},"sourceType":"module"}