{"ast":null,"code":"\"use strict\";\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar MmlNode_js_1 = require(\"../../core/MmlTree/MmlNode.js\");\n\nvar NodeUtil_js_1 = __importDefault(require(\"./NodeUtil.js\"));\n\nvar FilterUtil;\n\n(function (FilterUtil) {\n  FilterUtil.cleanStretchy = function (arg) {\n    var e_1, _a;\n\n    var options = arg.data;\n\n    try {\n      for (var _b = __values(options.getList('fixStretchy')), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var mo = _c.value;\n\n        if (NodeUtil_js_1.default.getProperty(mo, 'fixStretchy')) {\n          var symbol = NodeUtil_js_1.default.getForm(mo);\n\n          if (symbol && symbol[3] && symbol[3]['stretchy']) {\n            NodeUtil_js_1.default.setAttribute(mo, 'stretchy', false);\n          }\n\n          var parent_1 = mo.parent;\n\n          if (!NodeUtil_js_1.default.getTexClass(mo) && (!symbol || !symbol[2])) {\n            var texAtom = options.nodeFactory.create('node', 'TeXAtom', [mo]);\n            parent_1.replaceChild(texAtom, mo);\n            texAtom.inheritAttributesFrom(mo);\n          }\n\n          NodeUtil_js_1.default.removeProperties(mo, 'fixStretchy');\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  FilterUtil.cleanAttributes = function (arg) {\n    var node = arg.data.root;\n    node.walkTree(function (mml, _d) {\n      var e_2, _a;\n\n      var attribs = mml.attributes;\n\n      if (!attribs) {\n        return;\n      }\n\n      var keep = new Set((attribs.get('mjx-keep-attrs') || '').split(/ /));\n      delete attribs.getAllAttributes()['mjx-keep-attrs'];\n\n      try {\n        for (var _b = __values(attribs.getExplicitNames()), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n\n          if (!keep.has(key) && attribs.attributes[key] === mml.attributes.getInherited(key)) {\n            delete attribs.attributes[key];\n          }\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }, {});\n  };\n\n  FilterUtil.combineRelations = function (arg) {\n    var e_3, _a, e_4, _b;\n\n    var remove = [];\n\n    try {\n      for (var _c = __values(arg.data.getList('mo')), _e = _c.next(); !_e.done; _e = _c.next()) {\n        var mo = _e.value;\n\n        if (mo.getProperty('relationsCombined') || !mo.parent || mo.parent && !NodeUtil_js_1.default.isType(mo.parent, 'mrow') || NodeUtil_js_1.default.getTexClass(mo) !== MmlNode_js_1.TEXCLASS.REL) {\n          continue;\n        }\n\n        var mml = mo.parent;\n        var m2 = void 0;\n        var children = mml.childNodes;\n        var next = children.indexOf(mo) + 1;\n        var variantForm = NodeUtil_js_1.default.getProperty(mo, 'variantForm');\n\n        while (next < children.length && (m2 = children[next]) && NodeUtil_js_1.default.isType(m2, 'mo') && NodeUtil_js_1.default.getTexClass(m2) === MmlNode_js_1.TEXCLASS.REL) {\n          if (variantForm === NodeUtil_js_1.default.getProperty(m2, 'variantForm') && _compareExplicit(mo, m2)) {\n            NodeUtil_js_1.default.appendChildren(mo, NodeUtil_js_1.default.getChildren(m2));\n\n            _copyExplicit(['stretchy', 'rspace'], mo, m2);\n\n            try {\n              for (var _f = (e_4 = void 0, __values(m2.getPropertyNames())), _g = _f.next(); !_g.done; _g = _f.next()) {\n                var name_1 = _g.value;\n                mo.setProperty(name_1, m2.getProperty(name_1));\n              }\n            } catch (e_4_1) {\n              e_4 = {\n                error: e_4_1\n              };\n            } finally {\n              try {\n                if (_g && !_g.done && (_b = _f.return)) _b.call(_f);\n              } finally {\n                if (e_4) throw e_4.error;\n              }\n            }\n\n            children.splice(next, 1);\n            remove.push(m2);\n            m2.parent = null;\n            m2.setProperty('relationsCombined', true);\n          } else {\n            if (mo.attributes.getExplicit('rspace') == null) {\n              NodeUtil_js_1.default.setAttribute(mo, 'rspace', '0pt');\n            }\n\n            if (m2.attributes.getExplicit('lspace') == null) {\n              NodeUtil_js_1.default.setAttribute(m2, 'lspace', '0pt');\n            }\n\n            break;\n          }\n        }\n\n        mo.attributes.setInherited('form', mo.getForms()[0]);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_e && !_e.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    arg.data.removeFromList('mo', remove);\n  };\n\n  var _copyExplicit = function _copyExplicit(attrs, node1, node2) {\n    var attr1 = node1.attributes;\n    var attr2 = node2.attributes;\n    attrs.forEach(function (x) {\n      var attr = attr2.getExplicit(x);\n\n      if (attr != null) {\n        attr1.set(x, attr);\n      }\n    });\n  };\n\n  var _compareExplicit = function _compareExplicit(node1, node2) {\n    var e_5, _a;\n\n    var filter = function filter(attr, space) {\n      var exp = attr.getExplicitNames();\n      return exp.filter(function (x) {\n        return x !== space && (x !== 'stretchy' || attr.getExplicit('stretchy'));\n      });\n    };\n\n    var attr1 = node1.attributes;\n    var attr2 = node2.attributes;\n    var exp1 = filter(attr1, 'lspace');\n    var exp2 = filter(attr2, 'rspace');\n\n    if (exp1.length !== exp2.length) {\n      return false;\n    }\n\n    try {\n      for (var exp1_1 = __values(exp1), exp1_1_1 = exp1_1.next(); !exp1_1_1.done; exp1_1_1 = exp1_1.next()) {\n        var name_2 = exp1_1_1.value;\n\n        if (attr1.getExplicit(name_2) !== attr2.getExplicit(name_2)) {\n          return false;\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (exp1_1_1 && !exp1_1_1.done && (_a = exp1_1.return)) _a.call(exp1_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    return true;\n  };\n\n  var _cleanSubSup = function _cleanSubSup(options, low, up) {\n    var e_6, _a;\n\n    var remove = [];\n\n    try {\n      for (var _b = __values(options.getList('m' + low + up)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var mml = _c.value;\n        var children = mml.childNodes;\n\n        if (children[mml[low]] && children[mml[up]]) {\n          continue;\n        }\n\n        var parent_2 = mml.parent;\n        var newNode = children[mml[low]] ? options.nodeFactory.create('node', 'm' + low, [children[mml.base], children[mml[low]]]) : options.nodeFactory.create('node', 'm' + up, [children[mml.base], children[mml[up]]]);\n        NodeUtil_js_1.default.copyAttributes(mml, newNode);\n\n        if (parent_2) {\n          parent_2.replaceChild(newNode, mml);\n        } else {\n          options.root = newNode;\n        }\n\n        remove.push(mml);\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    options.removeFromList('m' + low + up, remove);\n  };\n\n  FilterUtil.cleanSubSup = function (arg) {\n    var options = arg.data;\n\n    if (options.error) {\n      return;\n    }\n\n    _cleanSubSup(options, 'sub', 'sup');\n\n    _cleanSubSup(options, 'under', 'over');\n  };\n\n  var _moveLimits = function _moveLimits(options, underover, subsup) {\n    var e_7, _a;\n\n    var remove = [];\n\n    try {\n      for (var _b = __values(options.getList(underover)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var mml = _c.value;\n\n        if (mml.attributes.get('displaystyle')) {\n          continue;\n        }\n\n        var base = mml.childNodes[mml.base];\n        var mo = base.coreMO();\n\n        if (base.getProperty('movablelimits') && !mo.attributes.getExplicit('movablelimits')) {\n          var node = options.nodeFactory.create('node', subsup, mml.childNodes);\n          NodeUtil_js_1.default.copyAttributes(mml, node);\n\n          if (mml.parent) {\n            mml.parent.replaceChild(node, mml);\n          } else {\n            options.root = node;\n          }\n\n          remove.push(mml);\n        }\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n\n    options.removeFromList(underover, remove);\n  };\n\n  FilterUtil.moveLimits = function (arg) {\n    var options = arg.data;\n\n    _moveLimits(options, 'munderover', 'msubsup');\n\n    _moveLimits(options, 'munder', 'msub');\n\n    _moveLimits(options, 'mover', 'msup');\n  };\n\n  FilterUtil.setInherited = function (arg) {\n    arg.data.root.setInheritedAttributes({}, arg.math['display'], 0, false);\n  };\n})(FilterUtil || (FilterUtil = {}));\n\nexports.default = FilterUtil;","map":{"version":3,"mappings":"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","names":["FilterUtil","arg","options","data","getList","_c","mo","NodeUtil_js_1","getProperty","symbol","getForm","setAttribute","parent_1","parent","getTexClass","texAtom","nodeFactory","create","replaceChild","inheritAttributesFrom","removeProperties","node","root","walkTree","mml","_d","attribs","attributes","keep","Set","get","split","getAllAttributes","getExplicitNames","key","has","getInherited","remove","_e","isType","MmlNode_js_1","REL","m2","children","childNodes","next","indexOf","variantForm","length","_compareExplicit","appendChildren","getChildren","_copyExplicit","getPropertyNames","_g","name_1","setProperty","splice","push","getExplicit","setInherited","getForms","removeFromList","attrs","node1","node2","attr1","attr2","forEach","attr","x","set","filter","space","exp","exp1","exp2","exp1_1_1","name_2","_cleanSubSup","low","up","parent_2","newNode","base","copyAttributes","error","_moveLimits","underover","subsup","coreMO","setInheritedAttributes","math","exports"],"sourceRoot":"","sources":["../../../ts/input/tex/FilterUtil.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}