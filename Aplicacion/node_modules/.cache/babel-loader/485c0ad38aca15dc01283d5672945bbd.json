{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonOutputJax = void 0;\n\nvar OutputJax_js_1 = require(\"../../core/OutputJax.js\");\n\nvar MathItem_js_1 = require(\"../../core/MathItem.js\");\n\nvar Options_js_1 = require(\"../../util/Options.js\");\n\nvar lengths_js_1 = require(\"../../util/lengths.js\");\n\nvar Styles_js_1 = require(\"../../util/Styles.js\");\n\nvar StyleList_js_1 = require(\"../../util/StyleList.js\");\n\nvar CommonOutputJax = function (_super) {\n  __extends(CommonOutputJax, _super);\n\n  function CommonOutputJax(options, defaultFactory, defaultFont) {\n    if (options === void 0) {\n      options = null;\n    }\n\n    if (defaultFactory === void 0) {\n      defaultFactory = null;\n    }\n\n    if (defaultFont === void 0) {\n      defaultFont = null;\n    }\n\n    var _this = this;\n\n    var _a = __read((0, Options_js_1.separateOptions)(options, defaultFont.OPTIONS), 2),\n        jaxOptions = _a[0],\n        fontOptions = _a[1];\n\n    _this = _super.call(this, jaxOptions) || this;\n    _this.factory = _this.options.wrapperFactory || new defaultFactory();\n    _this.factory.jax = _this;\n    _this.cssStyles = _this.options.cssStyles || new StyleList_js_1.CssStyles();\n    _this.font = _this.options.font || new defaultFont(fontOptions);\n    _this.unknownCache = new Map();\n    return _this;\n  }\n\n  CommonOutputJax.prototype.typeset = function (math, html) {\n    this.setDocument(html);\n    var node = this.createNode();\n    this.toDOM(math, node, html);\n    return node;\n  };\n\n  CommonOutputJax.prototype.createNode = function () {\n    var jax = this.constructor.NAME;\n    return this.html('mjx-container', {\n      'class': 'MathJax',\n      jax: jax\n    });\n  };\n\n  CommonOutputJax.prototype.setScale = function (node) {\n    var scale = this.math.metrics.scale * this.options.scale;\n\n    if (scale !== 1) {\n      this.adaptor.setStyle(node, 'fontSize', (0, lengths_js_1.percent)(scale));\n    }\n  };\n\n  CommonOutputJax.prototype.toDOM = function (math, node, html) {\n    if (html === void 0) {\n      html = null;\n    }\n\n    this.setDocument(html);\n    this.math = math;\n    this.pxPerEm = math.metrics.ex / this.font.params.x_height;\n    math.root.setTeXclass(null);\n    this.setScale(node);\n    this.nodeMap = new Map();\n    this.container = node;\n    this.processMath(math.root, node);\n    this.nodeMap = null;\n    this.executeFilters(this.postFilters, math, html, node);\n  };\n\n  CommonOutputJax.prototype.getBBox = function (math, html) {\n    this.setDocument(html);\n    this.math = math;\n    math.root.setTeXclass(null);\n    this.nodeMap = new Map();\n    var bbox = this.factory.wrap(math.root).getOuterBBox();\n    this.nodeMap = null;\n    return bbox;\n  };\n\n  CommonOutputJax.prototype.getMetrics = function (html) {\n    var e_1, _a;\n\n    this.setDocument(html);\n    var adaptor = this.adaptor;\n    var maps = this.getMetricMaps(html);\n\n    try {\n      for (var _b = __values(html.math), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var math = _c.value;\n        var parent_1 = adaptor.parent(math.start.node);\n\n        if (math.state() < MathItem_js_1.STATE.METRICS && parent_1) {\n          var map = maps[math.display ? 1 : 0];\n\n          var _d = map.get(parent_1),\n              em = _d.em,\n              ex = _d.ex,\n              containerWidth = _d.containerWidth,\n              lineWidth = _d.lineWidth,\n              scale = _d.scale,\n              family = _d.family;\n\n          math.setMetrics(em, ex, containerWidth, lineWidth, scale);\n\n          if (this.options.mtextInheritFont) {\n            math.outputData.mtextFamily = family;\n          }\n\n          if (this.options.merrorInheritFont) {\n            math.outputData.merrorFamily = family;\n          }\n\n          math.state(MathItem_js_1.STATE.METRICS);\n        }\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  CommonOutputJax.prototype.getMetricsFor = function (node, display) {\n    var getFamily = this.options.mtextInheritFont || this.options.merrorInheritFont;\n    var test = this.getTestElement(node, display);\n    var metrics = this.measureMetrics(test, getFamily);\n    this.adaptor.remove(test);\n    return metrics;\n  };\n\n  CommonOutputJax.prototype.getMetricMaps = function (html) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d, e_6, _e;\n\n    var adaptor = this.adaptor;\n    var domMaps = [new Map(), new Map()];\n\n    try {\n      for (var _f = __values(html.math), _g = _f.next(); !_g.done; _g = _f.next()) {\n        var math = _g.value;\n        var node = adaptor.parent(math.start.node);\n\n        if (node && math.state() < MathItem_js_1.STATE.METRICS) {\n          var map = domMaps[math.display ? 1 : 0];\n\n          if (!map.has(node)) {\n            map.set(node, this.getTestElement(node, math.display));\n          }\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    var getFamily = this.options.mtextInheritFont || this.options.merrorInheritFont;\n    var maps = [new Map(), new Map()];\n\n    try {\n      for (var _h = __values(maps.keys()), _j = _h.next(); !_j.done; _j = _h.next()) {\n        var i = _j.value;\n\n        try {\n          for (var _k = (e_4 = void 0, __values(domMaps[i].keys())), _l = _k.next(); !_l.done; _l = _k.next()) {\n            var node = _l.value;\n            maps[i].set(node, this.measureMetrics(domMaps[i].get(node), getFamily));\n          }\n        } catch (e_4_1) {\n          e_4 = {\n            error: e_4_1\n          };\n        } finally {\n          try {\n            if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n          } finally {\n            if (e_4) throw e_4.error;\n          }\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    try {\n      for (var _m = __values(maps.keys()), _o = _m.next(); !_o.done; _o = _m.next()) {\n        var i = _o.value;\n\n        try {\n          for (var _p = (e_6 = void 0, __values(domMaps[i].values())), _q = _p.next(); !_q.done; _q = _p.next()) {\n            var node = _q.value;\n            adaptor.remove(node);\n          }\n        } catch (e_6_1) {\n          e_6 = {\n            error: e_6_1\n          };\n        } finally {\n          try {\n            if (_q && !_q.done && (_e = _p.return)) _e.call(_p);\n          } finally {\n            if (e_6) throw e_6.error;\n          }\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (_o && !_o.done && (_d = _m.return)) _d.call(_m);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    return maps;\n  };\n\n  CommonOutputJax.prototype.getTestElement = function (node, display) {\n    var adaptor = this.adaptor;\n\n    if (!this.testInline) {\n      this.testInline = this.html('mjx-test', {\n        style: {\n          display: 'inline-block',\n          width: '100%',\n          'font-style': 'normal',\n          'font-weight': 'normal',\n          'font-size': '100%',\n          'font-size-adjust': 'none',\n          'text-indent': 0,\n          'text-transform': 'none',\n          'letter-spacing': 'normal',\n          'word-spacing': 'normal',\n          overflow: 'hidden',\n          height: '1px',\n          'margin-right': '-1px'\n        }\n      }, [this.html('mjx-left-box', {\n        style: {\n          display: 'inline-block',\n          width: 0,\n          'float': 'left'\n        }\n      }), this.html('mjx-ex-box', {\n        style: {\n          position: 'absolute',\n          overflow: 'hidden',\n          width: '1px',\n          height: '60ex'\n        }\n      }), this.html('mjx-right-box', {\n        style: {\n          display: 'inline-block',\n          width: 0,\n          'float': 'right'\n        }\n      })]);\n      this.testDisplay = adaptor.clone(this.testInline);\n      adaptor.setStyle(this.testDisplay, 'display', 'table');\n      adaptor.setStyle(this.testDisplay, 'margin-right', '');\n      adaptor.setStyle(adaptor.firstChild(this.testDisplay), 'display', 'none');\n      var right = adaptor.lastChild(this.testDisplay);\n      adaptor.setStyle(right, 'display', 'table-cell');\n      adaptor.setStyle(right, 'width', '10000em');\n      adaptor.setStyle(right, 'float', '');\n    }\n\n    return adaptor.append(node, adaptor.clone(display ? this.testDisplay : this.testInline));\n  };\n\n  CommonOutputJax.prototype.measureMetrics = function (node, getFamily) {\n    var adaptor = this.adaptor;\n    var family = getFamily ? adaptor.fontFamily(node) : '';\n    var em = adaptor.fontSize(node);\n\n    var _a = __read(adaptor.nodeSize(adaptor.childNode(node, 1)), 2),\n        w = _a[0],\n        h = _a[1];\n\n    var ex = w ? h / 60 : em * this.options.exFactor;\n    var containerWidth = !w ? 1000000 : adaptor.getStyle(node, 'display') === 'table' ? adaptor.nodeSize(adaptor.lastChild(node))[0] - 1 : adaptor.nodeBBox(adaptor.lastChild(node)).left - adaptor.nodeBBox(adaptor.firstChild(node)).left - 2;\n    var scale = Math.max(this.options.minScale, this.options.matchFontHeight ? ex / this.font.params.x_height / em : 1);\n    var lineWidth = 1000000;\n    return {\n      em: em,\n      ex: ex,\n      containerWidth: containerWidth,\n      lineWidth: lineWidth,\n      scale: scale,\n      family: family\n    };\n  };\n\n  CommonOutputJax.prototype.styleSheet = function (html) {\n    var e_7, _a;\n\n    this.setDocument(html);\n    this.cssStyles.clear();\n    this.cssStyles.addStyles(this.constructor.commonStyles);\n\n    if ('getStyles' in html) {\n      try {\n        for (var _b = __values(html.getStyles()), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var styles = _c.value;\n          this.cssStyles.addStyles(styles);\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    this.addWrapperStyles(this.cssStyles);\n    this.addFontStyles(this.cssStyles);\n    var sheet = this.html('style', {\n      id: 'MJX-styles'\n    }, [this.text('\\n' + this.cssStyles.cssText + '\\n')]);\n    return sheet;\n  };\n\n  CommonOutputJax.prototype.addFontStyles = function (styles) {\n    styles.addStyles(this.font.styles);\n  };\n\n  CommonOutputJax.prototype.addWrapperStyles = function (styles) {\n    var e_8, _a;\n\n    try {\n      for (var _b = __values(this.factory.getKinds()), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var kind = _c.value;\n        this.addClassStyles(this.factory.getNodeClass(kind), styles);\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n  };\n\n  CommonOutputJax.prototype.addClassStyles = function (CLASS, styles) {\n    styles.addStyles(CLASS.styles);\n  };\n\n  CommonOutputJax.prototype.setDocument = function (html) {\n    if (html) {\n      this.document = html;\n      this.adaptor.document = html.document;\n    }\n  };\n\n  CommonOutputJax.prototype.html = function (type, def, content, ns) {\n    if (def === void 0) {\n      def = {};\n    }\n\n    if (content === void 0) {\n      content = [];\n    }\n\n    return this.adaptor.node(type, def, content, ns);\n  };\n\n  CommonOutputJax.prototype.text = function (text) {\n    return this.adaptor.text(text);\n  };\n\n  CommonOutputJax.prototype.fixed = function (m, n) {\n    if (n === void 0) {\n      n = 3;\n    }\n\n    if (Math.abs(m) < .0006) {\n      return '0';\n    }\n\n    return m.toFixed(n).replace(/\\.?0+$/, '');\n  };\n\n  CommonOutputJax.prototype.measureText = function (text, variant, font) {\n    if (font === void 0) {\n      font = ['', false, false];\n    }\n\n    var node = this.unknownText(text, variant);\n\n    if (variant === '-explicitFont') {\n      var styles = this.cssFontStyles(font);\n      this.adaptor.setAttributes(node, {\n        style: styles\n      });\n    }\n\n    return this.measureTextNodeWithCache(node, text, variant, font);\n  };\n\n  CommonOutputJax.prototype.measureTextNodeWithCache = function (text, chars, variant, font) {\n    if (font === void 0) {\n      font = ['', false, false];\n    }\n\n    if (variant === '-explicitFont') {\n      variant = [font[0], font[1] ? 'T' : 'F', font[2] ? 'T' : 'F', ''].join('-');\n    }\n\n    if (!this.unknownCache.has(variant)) {\n      this.unknownCache.set(variant, new Map());\n    }\n\n    var map = this.unknownCache.get(variant);\n    var cached = map.get(chars);\n    if (cached) return cached;\n    var bbox = this.measureTextNode(text);\n    map.set(chars, bbox);\n    return bbox;\n  };\n\n  CommonOutputJax.prototype.measureXMLnode = function (xml) {\n    var adaptor = this.adaptor;\n    var content = this.html('mjx-xml-block', {\n      style: {\n        display: 'inline-block'\n      }\n    }, [adaptor.clone(xml)]);\n    var base = this.html('mjx-baseline', {\n      style: {\n        display: 'inline-block',\n        width: 0,\n        height: 0\n      }\n    });\n    var style = {\n      position: 'absolute',\n      display: 'inline-block',\n      'font-family': 'initial',\n      'line-height': 'normal'\n    };\n    var node = this.html('mjx-measure-xml', {\n      style: style\n    }, [base, content]);\n    adaptor.append(adaptor.parent(this.math.start.node), this.container);\n    adaptor.append(this.container, node);\n    var em = this.math.metrics.em * this.math.metrics.scale;\n\n    var _a = adaptor.nodeBBox(content),\n        left = _a.left,\n        right = _a.right,\n        bottom = _a.bottom,\n        top = _a.top;\n\n    var w = (right - left) / em;\n    var h = (adaptor.nodeBBox(base).top - top) / em;\n    var d = (bottom - top) / em - h;\n    adaptor.remove(this.container);\n    adaptor.remove(node);\n    return {\n      w: w,\n      h: h,\n      d: d\n    };\n  };\n\n  CommonOutputJax.prototype.cssFontStyles = function (font, styles) {\n    if (styles === void 0) {\n      styles = {};\n    }\n\n    var _a = __read(font, 3),\n        family = _a[0],\n        italic = _a[1],\n        bold = _a[2];\n\n    styles['font-family'] = this.font.getFamily(family);\n    if (italic) styles['font-style'] = 'italic';\n    if (bold) styles['font-weight'] = 'bold';\n    return styles;\n  };\n\n  CommonOutputJax.prototype.getFontData = function (styles) {\n    if (!styles) {\n      styles = new Styles_js_1.Styles();\n    }\n\n    return [this.font.getFamily(styles.get('font-family')), styles.get('font-style') === 'italic', styles.get('font-weight') === 'bold'];\n  };\n\n  CommonOutputJax.NAME = 'Common';\n  CommonOutputJax.OPTIONS = __assign(__assign({}, OutputJax_js_1.AbstractOutputJax.OPTIONS), {\n    scale: 1,\n    minScale: .5,\n    mtextInheritFont: false,\n    merrorInheritFont: false,\n    mtextFont: '',\n    merrorFont: 'serif',\n    mathmlSpacing: false,\n    skipAttributes: {},\n    exFactor: .5,\n    displayAlign: 'center',\n    displayIndent: '0',\n    wrapperFactory: null,\n    font: null,\n    cssStyles: null\n  });\n  CommonOutputJax.commonStyles = {};\n  return CommonOutputJax;\n}(OutputJax_js_1.AbstractOutputJax);\n\nexports.CommonOutputJax = CommonOutputJax;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBA;;AAEA;;AAGA;;AAGA;;AACA;;AACA;;AAmCA;EAMUA;;EA0GR,yBAAYC,OAAZ,EACYC,cADZ,EAEYC,WAFZ,EAEkC;IAFtB;MAAAF;IAA0B;;IAC1B;MAAAC;IAAkD;;IAClD;MAAAC;IAAsB;;IAFlC;;IAGQ,gBAA4B,kCAAgBF,OAAhB,EAAyBE,WAAW,CAACC,OAArC,CAA5B,EAAyE,CAAzE;IAAA,IAACC,UAAU,QAAX;IAAA,IAAaC,WAAW,QAAxB;;YACNC,kBAAMF,UAAN,KAAiB;IACjBG,KAAI,CAACC,OAAL,GAAeD,KAAI,CAACP,OAAL,CAAaS,cAAb,IACb,IAAIR,cAAJ,EADF;IAGAM,KAAI,CAACC,OAAL,CAAaE,GAAb,GAAmBH,KAAnB;IACAA,KAAI,CAACI,SAAL,GAAiBJ,KAAI,CAACP,OAAL,CAAaW,SAAb,IAA0B,IAAIC,wBAAJ,EAA3C;IACAL,KAAI,CAACM,IAAL,GAAYN,KAAI,CAACP,OAAL,CAAaa,IAAb,IAAqB,IAAIX,WAAJ,CAAgBG,WAAhB,CAAjC;IACAE,KAAI,CAACO,YAAL,GAAoB,IAAIC,GAAJ,EAApB;;EACD;;EAYMC,oCAAP,UAAeC,IAAf,EAAwCC,IAAxC,EAAmE;IACjE,KAAKC,WAAL,CAAiBD,IAAjB;IACA,IAAIE,IAAI,GAAG,KAAKC,UAAL,EAAX;IACA,KAAKC,KAAL,CAAWL,IAAX,EAAiBG,IAAjB,EAAuBF,IAAvB;IACA,OAAOE,IAAP;EACD,CALM;;EAUGJ,uCAAV;IACE,IAAMN,GAAG,GAAI,KAAKa,WAAL,CAA4CC,IAAzD;IACA,OAAO,KAAKN,IAAL,CAAU,eAAV,EAA2B;MAAC,SAAS,SAAV;MAAqBR,GAAG,EAAEA;IAA1B,CAA3B,CAAP;EACD,CAHS;;EAQAM,qCAAV,UAAmBI,IAAnB,EAA0B;IACxB,IAAMK,KAAK,GAAG,KAAKR,IAAL,CAAUS,OAAV,CAAkBD,KAAlB,GAA0B,KAAKzB,OAAL,CAAayB,KAArD;;IACA,IAAIA,KAAK,KAAK,CAAd,EAAiB;MACf,KAAKE,OAAL,CAAaC,QAAb,CAAsBR,IAAtB,EAA4B,UAA5B,EAAwC,0BAAQK,KAAR,CAAxC;IACD;EACF,CALS;;EAqBHT,kCAAP,UAAaC,IAAb,EAAsCG,IAAtC,EAA+CF,IAA/C,EAAiF;IAAlC;MAAAA;IAAkC;;IAC/E,KAAKC,WAAL,CAAiBD,IAAjB;IACA,KAAKD,IAAL,GAAYA,IAAZ;IACA,KAAKY,OAAL,GAAeZ,IAAI,CAACS,OAAL,CAAaI,EAAb,GAAkB,KAAKjB,IAAL,CAAUkB,MAAV,CAAiBC,QAAlD;IACAf,IAAI,CAACgB,IAAL,CAAUC,WAAV,CAAsB,IAAtB;IACA,KAAKC,QAAL,CAAcf,IAAd;IACA,KAAKgB,OAAL,GAAe,IAAIrB,GAAJ,EAAf;IACA,KAAKsB,SAAL,GAAiBjB,IAAjB;IACA,KAAKkB,WAAL,CAAiBrB,IAAI,CAACgB,IAAtB,EAA4Bb,IAA5B;IACA,KAAKgB,OAAL,GAAe,IAAf;IACA,KAAKG,cAAL,CAAoB,KAAKC,WAAzB,EAAsCvB,IAAtC,EAA4CC,IAA5C,EAAkDE,IAAlD;EACD,CAXM;;EA2BAJ,oCAAP,UAAeC,IAAf,EAAwCC,IAAxC,EAAmE;IACjE,KAAKC,WAAL,CAAiBD,IAAjB;IACA,KAAKD,IAAL,GAAYA,IAAZ;IACAA,IAAI,CAACgB,IAAL,CAAUC,WAAV,CAAsB,IAAtB;IACA,KAAKE,OAAL,GAAe,IAAIrB,GAAJ,EAAf;IACA,IAAI0B,IAAI,GAAG,KAAKjC,OAAL,CAAakC,IAAb,CAAkBzB,IAAI,CAACgB,IAAvB,EAA6BU,YAA7B,EAAX;IACA,KAAKP,OAAL,GAAe,IAAf;IACA,OAAOK,IAAP;EACD,CARM;;EAeAzB,uCAAP,UAAkBE,IAAlB,EAA6C;;;IAC3C,KAAKC,WAAL,CAAiBD,IAAjB;IACA,IAAMS,OAAO,GAAG,KAAKA,OAArB;IACA,IAAMiB,IAAI,GAAG,KAAKC,aAAL,CAAmB3B,IAAnB,CAAb;;;MACA,KAAmB,sBAAI,CAACD,IAAL,GAAS6B,cAA5B,EAA4B,QAA5B,EAA4BA,cAA5B,EAA8B;QAAzB,IAAM7B,IAAI,WAAV;QACH,IAAM8B,QAAM,GAAGpB,OAAO,CAACqB,MAAR,CAAe/B,IAAI,CAACgC,KAAL,CAAW7B,IAA1B,CAAf;;QACA,IAAIH,IAAI,CAACiC,KAAL,KAAeC,oBAAMC,OAArB,IAAgCL,QAApC,EAA4C;UAC1C,IAAMM,GAAG,GAAGT,IAAI,CAAC3B,IAAI,CAACqC,OAAL,GAAe,CAAf,GAAmB,CAApB,CAAhB;;UACM,SAAqDD,GAAG,CAACE,GAAJ,CAAQR,QAAR,CAArD;UAAA,IAACS,EAAE,QAAH;UAAA,IAAK1B,EAAE,QAAP;UAAA,IAAS2B,cAAc,oBAAvB;UAAA,IAAyBC,SAAS,eAAlC;UAAA,IAAoCjC,KAAK,WAAzC;UAAA,IAA2CkC,MAAM,YAAjD;;UACN1C,IAAI,CAAC2C,UAAL,CAAgBJ,EAAhB,EAAoB1B,EAApB,EAAwB2B,cAAxB,EAAwCC,SAAxC,EAAmDjC,KAAnD;;UACA,IAAI,KAAKzB,OAAL,CAAa6D,gBAAjB,EAAmC;YACjC5C,IAAI,CAAC6C,UAAL,CAAgBC,WAAhB,GAA8BJ,MAA9B;UACD;;UACD,IAAI,KAAK3D,OAAL,CAAagE,iBAAjB,EAAoC;YAClC/C,IAAI,CAAC6C,UAAL,CAAgBG,YAAhB,GAA+BN,MAA/B;UACD;;UACD1C,IAAI,CAACiC,KAAL,CAAWC,oBAAMC,OAAjB;QACD;MACF;;;;;;;;;;;;EACF,CAnBM;;EA0BApC,0CAAP,UAAqBI,IAArB,EAA8BkC,OAA9B,EAA8C;IAC5C,IAAMY,SAAS,GAAI,KAAKlE,OAAL,CAAa6D,gBAAb,IAAiC,KAAK7D,OAAL,CAAagE,iBAAjE;IACA,IAAMG,IAAI,GAAG,KAAKC,cAAL,CAAoBhD,IAApB,EAA0BkC,OAA1B,CAAb;IACA,IAAM5B,OAAO,GAAG,KAAK2C,cAAL,CAAoBF,IAApB,EAA0BD,SAA1B,CAAhB;IACA,KAAKvC,OAAL,CAAa2C,MAAb,CAAoBH,IAApB;IACA,OAAOzC,OAAP;EACD,CANM;;EAcGV,0CAAV,UAAwBE,IAAxB,EAAmD;;;IACjD,IAAMS,OAAO,GAAG,KAAKA,OAArB;IACA,IAAM4C,OAAO,GAAG,CAAC,IAAIxD,GAAJ,EAAD,EAA+B,IAAIA,GAAJ,EAA/B,CAAhB;;;MAQA,KAAmB,sBAAI,CAACE,IAAL,GAASuD,cAA5B,EAA4B,QAA5B,EAA4BA,cAA5B,EAA8B;QAAzB,IAAMvD,IAAI,WAAV;QACH,IAAMG,IAAI,GAAGO,OAAO,CAACqB,MAAR,CAAe/B,IAAI,CAACgC,KAAL,CAAW7B,IAA1B,CAAb;;QACA,IAAIA,IAAI,IAAIH,IAAI,CAACiC,KAAL,KAAeC,oBAAMC,OAAjC,EAA0C;UACxC,IAAMC,GAAG,GAAGkB,OAAO,CAACtD,IAAI,CAACqC,OAAL,GAAe,CAAf,GAAmB,CAApB,CAAnB;;UACA,IAAI,CAACD,GAAG,CAACoB,GAAJ,CAAQrD,IAAR,CAAL,EAAoB;YAClBiC,GAAG,CAACqB,GAAJ,CAAQtD,IAAR,EAAc,KAAKgD,cAAL,CAAoBhD,IAApB,EAA0BH,IAAI,CAACqC,OAA/B,CAAd;UACD;QACF;MACF;;;;;;;;;;;;;IAID,IAAMY,SAAS,GAAG,KAAKlE,OAAL,CAAa6D,gBAAb,IAAiC,KAAK7D,OAAL,CAAagE,iBAAhE;IACA,IAAMpB,IAAI,GAAG,CAAC,IAAI7B,GAAJ,EAAD,EAA4B,IAAIA,GAAJ,EAA5B,CAAb;;;MACA,KAAgB,sBAAI,CAAC4D,IAAL,KAAWC,cAA3B,EAA2B,QAA3B,EAA2BA,cAA3B,EAA6B;QAAxB,IAAMC,CAAC,WAAP;;;UACH,KAAmB,wCAAO,CAACA,CAAD,CAAP,CAAWF,IAAX,MAAiBG,cAApC,EAAoC,QAApC,EAAoCA,cAApC,EAAsC;YAAjC,IAAM1D,IAAI,WAAV;YACHwB,IAAI,CAACiC,CAAD,CAAJ,CAAQH,GAAR,CAAYtD,IAAZ,EAAkB,KAAKiD,cAAL,CAAoBE,OAAO,CAACM,CAAD,CAAP,CAAWtB,GAAX,CAAenC,IAAf,CAApB,EAA0C8C,SAA1C,CAAlB;UACD;;;;;;;;;;;;MACF;;;;;;;;;;;;;;MAID,KAAgB,sBAAI,CAACS,IAAL,KAAWI,cAA3B,EAA2B,QAA3B,EAA2BA,cAA3B,EAA6B;QAAxB,IAAMF,CAAC,WAAP;;;UACH,KAAmB,wCAAO,CAACA,CAAD,CAAP,CAAWG,MAAX,MAAmBC,cAAtC,EAAsC,QAAtC,EAAsCA,cAAtC,EAAwC;YAAnC,IAAM7D,IAAI,WAAV;YACHO,OAAO,CAAC2C,MAAR,CAAelD,IAAf;UACD;;;;;;;;;;;;MACF;;;;;;;;;;;;;IACD,OAAOwB,IAAP;EACD,CAtCS;;EA4CA5B,2CAAV,UAAyBI,IAAzB,EAAkCkC,OAAlC,EAAkD;IAChD,IAAM3B,OAAO,GAAG,KAAKA,OAArB;;IACA,IAAI,CAAC,KAAKuD,UAAV,EAAsB;MACpB,KAAKA,UAAL,GAAkB,KAAKhE,IAAL,CAAU,UAAV,EAAsB;QAACiE,KAAK,EAAE;UAC9C7B,OAAO,EAAa,cAD0B;UAE9C8B,KAAK,EAAe,MAF0B;UAG9C,cAAoB,QAH0B;UAI9C,eAAoB,QAJ0B;UAK9C,aAAoB,MAL0B;UAM9C,oBAAoB,MAN0B;UAO9C,eAAoB,CAP0B;UAQ9C,kBAAoB,MAR0B;UAS9C,kBAAoB,QAT0B;UAU9C,gBAAoB,QAV0B;UAW9CC,QAAQ,EAAY,QAX0B;UAY9CC,MAAM,EAAc,KAZ0B;UAa9C,gBAAoB;QAb0B;MAAR,CAAtB,EAcd,CACF,KAAKpE,IAAL,CAAU,cAAV,EAA0B;QAACiE,KAAK,EAAE;UAChC7B,OAAO,EAAE,cADuB;UAEhC8B,KAAK,EAAE,CAFyB;UAGhC,SAAS;QAHuB;MAAR,CAA1B,CADE,EAMF,KAAKlE,IAAL,CAAU,YAAV,EAAwB;QAACiE,KAAK,EAAE;UAC9BI,QAAQ,EAAE,UADoB;UAE9BF,QAAQ,EAAE,QAFoB;UAG9BD,KAAK,EAAE,KAHuB;UAGhBE,MAAM,EAAE;QAHQ;MAAR,CAAxB,CANE,EAWF,KAAKpE,IAAL,CAAU,eAAV,EAA2B;QAACiE,KAAK,EAAE;UACjC7B,OAAO,EAAE,cADwB;UAEjC8B,KAAK,EAAE,CAF0B;UAGjC,SAAS;QAHwB;MAAR,CAA3B,CAXE,CAdc,CAAlB;MA+BA,KAAKI,WAAL,GAAmB7D,OAAO,CAAC8D,KAAR,CAAc,KAAKP,UAAnB,CAAnB;MACAvD,OAAO,CAACC,QAAR,CAAiB,KAAK4D,WAAtB,EAAmC,SAAnC,EAA8C,OAA9C;MACA7D,OAAO,CAACC,QAAR,CAAiB,KAAK4D,WAAtB,EAAmC,cAAnC,EAAmD,EAAnD;MACA7D,OAAO,CAACC,QAAR,CAAiBD,OAAO,CAAC+D,UAAR,CAAmB,KAAKF,WAAxB,CAAjB,EAA4D,SAA5D,EAAuE,MAAvE;MACA,IAAMG,KAAK,GAAGhE,OAAO,CAACiE,SAAR,CAAkB,KAAKJ,WAAvB,CAAd;MACA7D,OAAO,CAACC,QAAR,CAAiB+D,KAAjB,EAAwB,SAAxB,EAAmC,YAAnC;MACAhE,OAAO,CAACC,QAAR,CAAiB+D,KAAjB,EAAwB,OAAxB,EAAiC,SAAjC;MACAhE,OAAO,CAACC,QAAR,CAAiB+D,KAAjB,EAAwB,OAAxB,EAAiC,EAAjC;IACD;;IACD,OAAOhE,OAAO,CAACkE,MAAR,CAAezE,IAAf,EAAqBO,OAAO,CAAC8D,KAAR,CAAcnC,OAAO,GAAG,KAAKkC,WAAR,GAAsB,KAAKN,UAAhD,CAArB,CAAP;EACD,CA5CS;;EAmDAlE,2CAAV,UAAyBI,IAAzB,EAAkC8C,SAAlC,EAAoD;IAClD,IAAMvC,OAAO,GAAG,KAAKA,OAArB;IACA,IAAMgC,MAAM,GAAIO,SAAS,GAAGvC,OAAO,CAACmE,UAAR,CAAmB1E,IAAnB,CAAH,GAA8B,EAAvD;IACA,IAAMoC,EAAE,GAAG7B,OAAO,CAACoE,QAAR,CAAiB3E,IAAjB,CAAX;;IACM,gBAASO,OAAO,CAACqE,QAAR,CAAiBrE,OAAO,CAACsE,SAAR,CAAkB7E,IAAlB,EAAwB,CAAxB,CAAjB,CAAT,EAA0D,CAA1D;IAAA,IAAC8E,CAAC,QAAF;IAAA,IAAIC,CAAC,QAAL;;IACN,IAAMrE,EAAE,GAAIoE,CAAC,GAAGC,CAAC,GAAG,EAAP,GAAY3C,EAAE,GAAG,KAAKxD,OAAL,CAAaoG,QAA3C;IACA,IAAM3C,cAAc,GAAI,CAACyC,CAAD,GAAK,OAAL,GAAevE,OAAO,CAAC0E,QAAR,CAAiBjF,IAAjB,EAAuB,SAAvB,MAAsC,OAAtC,GACfO,OAAO,CAACqE,QAAR,CAAiBrE,OAAO,CAACiE,SAAR,CAAkBxE,IAAlB,CAAjB,EAA+C,CAA/C,IAAoD,CADrC,GAEfO,OAAO,CAAC2E,QAAR,CAAiB3E,OAAO,CAACiE,SAAR,CAAkBxE,IAAlB,CAAjB,EAA+CmF,IAA/C,GACA5E,OAAO,CAAC2E,QAAR,CAAiB3E,OAAO,CAAC+D,UAAR,CAAmBtE,IAAnB,CAAjB,EAAgDmF,IADhD,GACuD,CAH/E;IAIA,IAAM9E,KAAK,GAAG+E,IAAI,CAACC,GAAL,CAAS,KAAKzG,OAAL,CAAa0G,QAAtB,EACS,KAAK1G,OAAL,CAAa2G,eAAb,GAA+B7E,EAAE,GAAG,KAAKjB,IAAL,CAAUkB,MAAV,CAAiBC,QAAtB,GAAiCwB,EAAhE,GAAqE,CAD9E,CAAd;IAEA,IAAME,SAAS,GAAG,OAAlB;IACA,OAAO;MAACF,EAAE,IAAH;MAAK1B,EAAE,IAAP;MAAS2B,cAAc,gBAAvB;MAAyBC,SAAS,WAAlC;MAAoCjC,KAAK,OAAzC;MAA2CkC,MAAM;IAAjD,CAAP;EACD,CAdS;;EAqBH3C,uCAAP,UAAkBE,IAAlB,EAA6C;;;IAC3C,KAAKC,WAAL,CAAiBD,IAAjB;IAIA,KAAKP,SAAL,CAAeiG,KAAf;IACA,KAAKjG,SAAL,CAAekG,SAAf,CAA0B,KAAKtF,WAAL,CAA4CuF,YAAtE;;IAIA,IAAI,eAAe5F,IAAnB,EAAyB;;QACvB,KAAqB,kBAAEA,IAAY,CAAC6F,SAAb,EAAF,GAA6CjE,cAAlE,EAAkE,QAAlE,EAAkEA,cAAlE,EAAoE;UAA/D,IAAMkE,MAAM,WAAZ;UACH,KAAKrG,SAAL,CAAekG,SAAf,CAAyBG,MAAzB;QACD;;;;;;;;;;;;IACF;;IAID,KAAKC,gBAAL,CAAsB,KAAKtG,SAA3B;IACA,KAAKuG,aAAL,CAAmB,KAAKvG,SAAxB;IAIA,IAAMwG,KAAK,GAAG,KAAKjG,IAAL,CAAU,OAAV,EAAmB;MAACkG,EAAE,EAAE;IAAL,CAAnB,EAAuC,CAAC,KAAKC,IAAL,CAAU,OAAO,KAAK1G,SAAL,CAAe2G,OAAtB,GAAgC,IAA1C,CAAD,CAAvC,CAAd;IACA,OAAOH,KAAP;EACD,CAzBM;;EA8BGnG,0CAAV,UAAwBgG,MAAxB,EAAyC;IACvCA,MAAM,CAACH,SAAP,CAAiB,KAAKhG,IAAL,CAAUmG,MAA3B;EACD,CAFS;;EAOAhG,6CAAV,UAA2BgG,MAA3B,EAA4C;;;;MAC1C,KAAmB,uBAAKxG,OAAL,CAAa+G,QAAb,KAAuBzE,cAA1C,EAA0C,QAA1C,EAA0CA,cAA1C,EAA4C;QAAvC,IAAM0E,IAAI,WAAV;QACH,KAAKC,cAAL,CAAoB,KAAKjH,OAAL,CAAakH,YAAb,CAA0BF,IAA1B,CAApB,EAAqDR,MAArD;MACD;;;;;;;;;;;;EACF,CAJS;;EAUAhG,2CAAV,UAAyB2G,KAAzB,EAAsDX,MAAtD,EAAuE;IACrEA,MAAM,CAACH,SAAP,CAAiBc,KAAK,CAACX,MAAvB;EACD,CAFS;;EASAhG,wCAAV,UAAsBE,IAAtB,EAAiD;IAC/C,IAAIA,IAAJ,EAAU;MACR,KAAK0G,QAAL,GAAgB1G,IAAhB;MACA,KAAKS,OAAL,CAAaiG,QAAb,GAAwB1G,IAAI,CAAC0G,QAA7B;IACD;EACF,CALS;;EAcH5G,iCAAP,UAAY6G,IAAZ,EAA0BC,GAA1B,EAAgDC,OAAhD,EAAyEC,EAAzE,EAAoF;IAA1D;MAAAF;IAAoB;;IAAE;MAAAC;IAAuB;;IACrE,OAAO,KAAKpG,OAAL,CAAaP,IAAb,CAAkByG,IAAlB,EAAwBC,GAAxB,EAA6BC,OAA7B,EAAsCC,EAAtC,CAAP;EACD,CAFM;;EASAhH,iCAAP,UAAYqG,IAAZ,EAAwB;IACtB,OAAO,KAAK1F,OAAL,CAAa0F,IAAb,CAAkBA,IAAlB,CAAP;EACD,CAFM;;EASArG,kCAAP,UAAaiH,CAAb,EAAwBC,CAAxB,EAAqC;IAAb;MAAAA;IAAa;;IACnC,IAAI1B,IAAI,CAAC2B,GAAL,CAASF,CAAT,IAAc,KAAlB,EAAyB;MACvB,OAAO,GAAP;IACD;;IACD,OAAOA,CAAC,CAACG,OAAF,CAAUF,CAAV,EAAaG,OAAb,CAAqB,QAArB,EAA+B,EAA/B,CAAP;EACD,CALM;;EA8BArH,wCAAP,UAAmBqG,IAAnB,EAAiCiB,OAAjC,EAAkDzH,IAAlD,EAAwF;IAAtC;MAAAA,QAAqB,EAArB,EAAyB,KAAzB,EAAgC,KAAhC;IAAsC;;IACtF,IAAMO,IAAI,GAAG,KAAKmH,WAAL,CAAiBlB,IAAjB,EAAuBiB,OAAvB,CAAb;;IACA,IAAIA,OAAO,KAAK,eAAhB,EAAiC;MAC/B,IAAMtB,MAAM,GAAG,KAAKwB,aAAL,CAAmB3H,IAAnB,CAAf;MACA,KAAKc,OAAL,CAAa8G,aAAb,CAA2BrH,IAA3B,EAAiC;QAAC+D,KAAK,EAAE6B;MAAR,CAAjC;IACD;;IACD,OAAO,KAAK0B,wBAAL,CAA8BtH,IAA9B,EAAoCiG,IAApC,EAA0CiB,OAA1C,EAAmDzH,IAAnD,CAAP;EACD,CAPM;;EAmBAG,qDAAP,UACEqG,IADF,EACWsB,KADX,EAC0BL,OAD1B,EAEEzH,IAFF,EAEwC;IAAtC;MAAAA,QAAqB,EAArB,EAAyB,KAAzB,EAAgC,KAAhC;IAAsC;;IAEtC,IAAIyH,OAAO,KAAK,eAAhB,EAAiC;MAC/BA,OAAO,GAAG,CAACzH,IAAI,CAAC,CAAD,CAAL,EAAUA,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAV,GAAgB,GAA1B,EAA+BA,IAAI,CAAC,CAAD,CAAJ,GAAU,GAAV,GAAgB,GAA/C,EAAoD,EAApD,EAAwD+H,IAAxD,CAA6D,GAA7D,CAAV;IACD;;IACD,IAAI,CAAC,KAAK9H,YAAL,CAAkB2D,GAAlB,CAAsB6D,OAAtB,CAAL,EAAqC;MACnC,KAAKxH,YAAL,CAAkB4D,GAAlB,CAAsB4D,OAAtB,EAA+B,IAAIvH,GAAJ,EAA/B;IACD;;IACD,IAAMsC,GAAG,GAAG,KAAKvC,YAAL,CAAkByC,GAAlB,CAAsB+E,OAAtB,CAAZ;IACA,IAAMO,MAAM,GAAGxF,GAAG,CAACE,GAAJ,CAAQoF,KAAR,CAAf;IACA,IAAIE,MAAJ,EAAY,OAAOA,MAAP;IACZ,IAAMpG,IAAI,GAAG,KAAKqG,eAAL,CAAqBzB,IAArB,CAAb;IACAhE,GAAG,CAACqB,GAAJ,CAAQiE,KAAR,EAAelG,IAAf;IACA,OAAOA,IAAP;EACD,CAhBM;;EAiCAzB,2CAAP,UAAsB+H,GAAtB,EAA4B;IAC1B,IAAMpH,OAAO,GAAG,KAAKA,OAArB;IACA,IAAMoG,OAAO,GAAI,KAAK7G,IAAL,CAAU,eAAV,EAA2B;MAACiE,KAAK,EAAE;QAAC7B,OAAO,EAAE;MAAV;IAAR,CAA3B,EAA+D,CAAC3B,OAAO,CAAC8D,KAAR,CAAcsD,GAAd,CAAD,CAA/D,CAAjB;IACA,IAAMC,IAAI,GAAG,KAAK9H,IAAL,CAAU,cAAV,EAA0B;MAACiE,KAAK,EAAE;QAAC7B,OAAO,EAAE,cAAV;QAA0B8B,KAAK,EAAE,CAAjC;QAAoCE,MAAM,EAAE;MAA5C;IAAR,CAA1B,CAAb;IACA,IAAMH,KAAK,GAAG;MACZI,QAAQ,EAAE,UADE;MAEZjC,OAAO,EAAE,cAFG;MAGZ,eAAe,SAHH;MAIZ,eAAe;IAJH,CAAd;IAMA,IAAMlC,IAAI,GAAG,KAAKF,IAAL,CAAU,iBAAV,EAA6B;MAACiE,KAAK;IAAN,CAA7B,EAAsC,CAAC6D,IAAD,EAAOjB,OAAP,CAAtC,CAAb;IACApG,OAAO,CAACkE,MAAR,CAAelE,OAAO,CAACqB,MAAR,CAAe,KAAK/B,IAAL,CAAUgC,KAAV,CAAgB7B,IAA/B,CAAf,EAAqD,KAAKiB,SAA1D;IACAV,OAAO,CAACkE,MAAR,CAAe,KAAKxD,SAApB,EAA+BjB,IAA/B;IACA,IAAMoC,EAAE,GAAG,KAAKvC,IAAL,CAAUS,OAAV,CAAkB8B,EAAlB,GAAuB,KAAKvC,IAAL,CAAUS,OAAV,CAAkBD,KAApD;;IACM,SAA6BE,OAAO,CAAC2E,QAAR,CAAiByB,OAAjB,CAA7B;IAAA,IAACxB,IAAI,UAAL;IAAA,IAAOZ,KAAK,WAAZ;IAAA,IAAcsD,MAAM,YAApB;IAAA,IAAsBC,GAAG,SAAzB;;IACN,IAAMhD,CAAC,GAAG,CAACP,KAAK,GAAGY,IAAT,IAAiB/C,EAA3B;IACA,IAAM2C,CAAC,GAAG,CAACxE,OAAO,CAAC2E,QAAR,CAAiB0C,IAAjB,EAAuBE,GAAvB,GAA6BA,GAA9B,IAAqC1F,EAA/C;IACA,IAAM2F,CAAC,GAAG,CAACF,MAAM,GAAGC,GAAV,IAAiB1F,EAAjB,GAAsB2C,CAAhC;IACAxE,OAAO,CAAC2C,MAAR,CAAe,KAAKjC,SAApB;IACAV,OAAO,CAAC2C,MAAR,CAAelD,IAAf;IACA,OAAO;MAAC8E,CAAC,GAAF;MAAIC,CAAC,GAAL;MAAOgD,CAAC;IAAR,CAAP;EACD,CArBM;;EA4BAnI,0CAAP,UAAqBH,IAArB,EAAwCmG,MAAxC,EAA8D;IAAtB;MAAAA;IAAsB;;IACtD,gBAAyBnG,IAAzB,EAA6B,CAA7B;IAAA,IAAC8C,MAAM,QAAP;IAAA,IAASyF,MAAM,QAAf;IAAA,IAAiBC,IAAI,QAArB;;IACNrC,MAAM,CAAC,aAAD,CAAN,GAAwB,KAAKnG,IAAL,CAAUqD,SAAV,CAAoBP,MAApB,CAAxB;IACA,IAAIyF,MAAJ,EAAYpC,MAAM,CAAC,YAAD,CAAN,GAAuB,QAAvB;IACZ,IAAIqC,IAAJ,EAAUrC,MAAM,CAAC,aAAD,CAAN,GAAwB,MAAxB;IACV,OAAOA,MAAP;EACD,CANM;;EAYAhG,wCAAP,UAAmBgG,MAAnB,EAAiC;IAC/B,IAAI,CAACA,MAAL,EAAa;MACXA,MAAM,GAAG,IAAIsC,kBAAJ,EAAT;IACD;;IACD,OAAO,CAAC,KAAKzI,IAAL,CAAUqD,SAAV,CAAoB8C,MAAM,CAACzD,GAAP,CAAW,aAAX,CAApB,CAAD,EACCyD,MAAM,CAACzD,GAAP,CAAW,YAAX,MAA6B,QAD9B,EAECyD,MAAM,CAACzD,GAAP,CAAW,aAAX,MAA8B,MAF/B,CAAP;EAGD,CAPM;;EA5jBOvC,uBAAe,QAAf;EAKAA,0BAAOuI,sBACdC,iCAAkBrJ,OADJ,GACW;IAC9BsB,KAAK,EAAE,CADuB;IAE9BiF,QAAQ,EAAE,EAFoB;IAG9B7C,gBAAgB,EAAE,KAHY;IAI9BG,iBAAiB,EAAE,KAJW;IAK9ByF,SAAS,EAAE,EALmB;IAM9BC,UAAU,EAAE,OANkB;IAO9BC,aAAa,EAAE,KAPe;IAQ9BC,cAAc,EAAE,EARc;IAS9BxD,QAAQ,EAAE,EAToB;IAU9ByD,YAAY,EAAE,QAVgB;IAW9BC,aAAa,EAAE,GAXe;IAY9BrJ,cAAc,EAAE,IAZc;IAa9BI,IAAI,EAAE,IAbwB;IAc9BF,SAAS,EAAE;EAdmB,CADX,CAAP;EAqBAK,+BAA6B,EAA7B;EA2iBhB;AAAC,CAhlBD,CAMUwI,gCANV;;AAAsBO","names":["__extends","options","defaultFactory","defaultFont","OPTIONS","jaxOptions","fontOptions","_super","_this","factory","wrapperFactory","jax","cssStyles","StyleList_js_1","font","unknownCache","Map","CommonOutputJax","math","html","setDocument","node","createNode","toDOM","constructor","NAME","scale","metrics","adaptor","setStyle","pxPerEm","ex","params","x_height","root","setTeXclass","setScale","nodeMap","container","processMath","executeFilters","postFilters","bbox","wrap","getOuterBBox","maps","getMetricMaps","_c","parent_1","parent","start","state","MathItem_js_1","METRICS","map","display","get","em","containerWidth","lineWidth","family","setMetrics","mtextInheritFont","outputData","mtextFamily","merrorInheritFont","merrorFamily","getFamily","test","getTestElement","measureMetrics","remove","domMaps","_g","has","set","keys","_j","i","_l","_o","values","_q","testInline","style","width","overflow","height","position","testDisplay","clone","firstChild","right","lastChild","append","fontFamily","fontSize","nodeSize","childNode","w","h","exFactor","getStyle","nodeBBox","left","Math","max","minScale","matchFontHeight","clear","addStyles","commonStyles","getStyles","styles","addWrapperStyles","addFontStyles","sheet","id","text","cssText","getKinds","kind","addClassStyles","getNodeClass","CLASS","document","type","def","content","ns","m","n","abs","toFixed","replace","variant","unknownText","cssFontStyles","setAttributes","measureTextNodeWithCache","chars","join","cached","measureTextNode","xml","base","bottom","top","d","italic","bold","Styles_js_1","__assign","OutputJax_js_1","mtextFont","merrorFont","mathmlSpacing","skipAttributes","displayAlign","displayIndent","exports"],"sourceRoot":"","sources":["../../../ts/output/common/OutputJax.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}