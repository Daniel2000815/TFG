{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.subtract = void 0;\n\nvar add_1 = require(\"./add\");\n\nvar Errors_1 = require(\"../../../Core/Errors\");\n\nvar Matrix_1 = require(\"../../../Types/Matrix\");\n\nvar Utils_1 = require(\"../../../Core/Utils\");\n/**\n * Gets called when the parser finds the - operator. Not the prefix operator. See this.add\n * @param {Symbol} a\n * @param {Symbol} b\n * @returns {Symbol}\n */\n\n\nfunction subtract(a, b) {\n  var aIsSymbol = (0, Utils_1.isSymbol)(a),\n      bIsSymbol = (0, Utils_1.isSymbol)(b);\n\n  if (aIsSymbol && bIsSymbol) {\n    if (a.unit || b.unit) {\n      return deps.Unit.subtract(a, b);\n    }\n\n    return (0, add_1.add)(a, b.negate());\n  } else {\n    if (bIsSymbol && (0, Utils_1.isVector)(a)) {\n      b = a.map(function (x) {\n        return subtract(x, b.clone());\n      });\n    } else if (aIsSymbol && (0, Utils_1.isVector)(b)) {\n      b = b.map(function (x) {\n        return subtract(a.clone(), x);\n      });\n    } else if ((0, Utils_1.isVector)(a) && (0, Utils_1.isVector)(b)) {\n      if (a.dimensions() === b.dimensions()) b = a.subtract(b);else (0, Errors_1.err)('Unable to subtract vectors. Dimensions do not match.');\n    } else if ((0, Utils_1.isMatrix)(a) && (0, Utils_1.isVector)(b)) {\n      if (b.elements.length === a.rows()) {\n        var M = new Matrix_1.Matrix(),\n            l = a.cols();\n        b.each(function (e, i) {\n          var row = [];\n\n          for (var j = 0; j < l; j++) {\n            row.push(subtract(a.elements[i - 1][j].clone(), e.clone()));\n          }\n\n          M.elements.push(row);\n        });\n        return M;\n      } else (0, Errors_1.err)('Dimensions must match!');\n    } else if ((0, Utils_1.isVector)(a) && (0, Utils_1.isMatrix)(b)) {\n      var M = b.clone().negate();\n      return (0, add_1.add)(M, a);\n    } else if ((0, Utils_1.isMatrix)(a) && (0, Utils_1.isMatrix)(b)) {\n      b = a.subtract(b);\n    } else if ((0, Utils_1.isMatrix)(a) && bIsSymbol) {\n      var M = new Matrix_1.Matrix();\n      a.each(function (x, i, j) {\n        M.set(i, j, subtract(x, b.clone()));\n      });\n      b = M;\n    } else if (aIsSymbol && (0, Utils_1.isMatrix)(b)) {\n      var M = new Matrix_1.Matrix();\n      b.each(function (x, i, j) {\n        M.set(i, j, subtract(a.clone(), x));\n      });\n      b = M;\n    }\n\n    return b;\n  }\n}\n\nexports.subtract = subtract;","map":{"version":3,"mappings":"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","names":["subtract","a","b","aIsSymbol","bIsSymbol","unit","deps","Unit","negate","map","x","clone","dimensions","elements","length","rows","M","Matrix_1","l","cols","each","e","i","row","j","push","set","exports"],"sourceRoot":"","sources":["../../../../src/Functions/Core/operations/subtract.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}