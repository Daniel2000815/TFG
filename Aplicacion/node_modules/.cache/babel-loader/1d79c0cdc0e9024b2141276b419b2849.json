{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState } from 'react';\nexport default function useLocalStorage(key, initValue) {\n  var _useState = useState(function () {\n    var value = localStorage.getItem(key);\n\n    if (value !== null) {\n      return JSON.parse(value);\n    }\n\n    localStorage.setItem(key, JSON.stringify(initValue));\n    window.dispatchEvent(new Event(\"storage\"));\n    return initValue;\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  useEffect(function () {\n    localStorage.setItem(key, state);\n    window.dispatchEvent(new Event(\"storage\"));\n  }, [key, state]);\n  useEffect(function () {\n    var listenStorageChange = function listenStorageChange() {\n      setState(function () {\n        var value = localStorage.getItem(key);\n\n        if (value !== null) {\n          return JSON.parse(value);\n        }\n\n        localStorage.setItem(key, JSON.stringify(initValue));\n        window.dispatchEvent(new Event(\"storage\"));\n        return initValue;\n      });\n    };\n\n    window.addEventListener(\"storage\", listenStorageChange);\n    return function () {\n      return window.removeEventListener(\"storage\", listenStorageChange);\n    };\n  }, []);\n  return [state, setState];\n}","map":{"version":3,"names":["useEffect","useState","useLocalStorage","key","initValue","value","localStorage","getItem","JSON","parse","setItem","stringify","window","dispatchEvent","Event","state","setState","listenStorageChange","addEventListener","removeEventListener"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/storageHook.js"],"sourcesContent":["import { useEffect, useState } from 'react'\r\n\r\nexport default function useLocalStorage(key, initValue) {\r\n  const [state, setState] = useState(() => {\r\n    const value = localStorage.getItem(key);\r\n    if (value !== null) {\r\n      return JSON.parse(value);\r\n    }\r\n\r\n    localStorage.setItem(key, JSON.stringify(initValue));\r\n    window.dispatchEvent(new Event(\"storage\"));\r\n    return initValue;\r\n  });\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(key, state);\r\n    window.dispatchEvent(new Event(\"storage\"));\r\n  }, [key, state]);\r\n\r\n  useEffect(() => {\r\n    const listenStorageChange = () => {\r\n      setState(() => {\r\n        const value = localStorage.getItem(key);\r\n        if (value !== null) {\r\n          return JSON.parse(value);\r\n        }\r\n\r\n        localStorage.setItem(key, JSON.stringify(initValue));\r\n        window.dispatchEvent(new Event(\"storage\"));\r\n        return initValue;\r\n      });\r\n    };\r\n    window.addEventListener(\"storage\", listenStorageChange);\r\n    return () => window.removeEventListener(\"storage\", listenStorageChange);\r\n  }, []);\r\n\r\n  return [state, setState];\r\n}"],"mappings":";AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AAEA,eAAe,SAASC,eAAT,CAAyBC,GAAzB,EAA8BC,SAA9B,EAAyC;EACtD,gBAA0BH,QAAQ,CAAC,YAAM;IACvC,IAAMI,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqBJ,GAArB,CAAd;;IACA,IAAIE,KAAK,KAAK,IAAd,EAAoB;MAClB,OAAOG,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAP;IACD;;IAEDC,YAAY,CAACI,OAAb,CAAqBP,GAArB,EAA0BK,IAAI,CAACG,SAAL,CAAeP,SAAf,CAA1B;IACAQ,MAAM,CAACC,aAAP,CAAqB,IAAIC,KAAJ,CAAU,SAAV,CAArB;IACA,OAAOV,SAAP;EACD,CATiC,CAAlC;EAAA;EAAA,IAAOW,KAAP;EAAA,IAAcC,QAAd;;EAWAhB,SAAS,CAAC,YAAM;IACdM,YAAY,CAACI,OAAb,CAAqBP,GAArB,EAA0BY,KAA1B;IACAH,MAAM,CAACC,aAAP,CAAqB,IAAIC,KAAJ,CAAU,SAAV,CAArB;EACD,CAHQ,EAGN,CAACX,GAAD,EAAMY,KAAN,CAHM,CAAT;EAKAf,SAAS,CAAC,YAAM;IACd,IAAMiB,mBAAmB,GAAG,SAAtBA,mBAAsB,GAAM;MAChCD,QAAQ,CAAC,YAAM;QACb,IAAMX,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqBJ,GAArB,CAAd;;QACA,IAAIE,KAAK,KAAK,IAAd,EAAoB;UAClB,OAAOG,IAAI,CAACC,KAAL,CAAWJ,KAAX,CAAP;QACD;;QAEDC,YAAY,CAACI,OAAb,CAAqBP,GAArB,EAA0BK,IAAI,CAACG,SAAL,CAAeP,SAAf,CAA1B;QACAQ,MAAM,CAACC,aAAP,CAAqB,IAAIC,KAAJ,CAAU,SAAV,CAArB;QACA,OAAOV,SAAP;MACD,CATO,CAAR;IAUD,CAXD;;IAYAQ,MAAM,CAACM,gBAAP,CAAwB,SAAxB,EAAmCD,mBAAnC;IACA,OAAO;MAAA,OAAML,MAAM,CAACO,mBAAP,CAA2B,SAA3B,EAAsCF,mBAAtC,CAAN;IAAA,CAAP;EACD,CAfQ,EAeN,EAfM,CAAT;EAiBA,OAAO,CAACF,KAAD,EAAQC,QAAR,CAAP;AACD"},"metadata":{},"sourceType":"module"}