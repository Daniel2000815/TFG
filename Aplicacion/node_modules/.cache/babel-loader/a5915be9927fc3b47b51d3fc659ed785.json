{"ast":null,"code":"import _slicedToArray from\"G:\\\\gitlab\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect}from\"react\";import CustomNode from\"../CustomNodes/CustomNode\";import FloatSlider from\"../CustomComponents/FloatSlider\";import{createTheme,ThemeProvider}from'@mui/material/styles';import Vector3Input from\"../CustomComponents/Vector3Input\";var theme=createTheme({palette:{primary:{light:'#ffd7a2',main:'#ffbb62',dark:'#fa9c21',contrastText:'white'}}});var TransformOperations={Translate:\"Translate\",Scale:\"Scale\",Rotate:\"Rotate\"};export default function TransformNode(_ref){var data=_ref.data,id=_ref.id;var _React$useState=React.useState(TransformOperations.Translate),_React$useState2=_slicedToArray(_React$useState,2),operation=_React$useState2[0],setOperation=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),sdf=_React$useState4[0],setSdf=_React$useState4[1];var _React$useState5=React.useState([0,0,0]),_React$useState6=_slicedToArray(_React$useState5,2),transformVal=_React$useState6[0],setTransformVal=_React$useState6[1];useEffect(function(){console.log(\"SE HAN MODIFICADO LOS SDF EN NODO TRANSFORM. AHORA HAY \".concat(Object.keys(data.inputs).length));var input=data.inputs[Object.keys(data.inputs)[0]];if(input){if(operation!==TransformOperations.Scale)setSdf(input.replace(\"p,\",\"sdf\".concat(operation,\"(p, vec3(\").concat(transformVal[0],\",\").concat(transformVal[1],\",\").concat(transformVal[2],\") ),\")));else{var s=\"vec3(\".concat(transformVal[0],\",\").concat(transformVal[1],\",\").concat(transformVal[2],\")\");setSdf(input.replace(\"p,\",\"(p/\".concat(s,\") * \").concat(s,\",\")));}}},[data,operation,transformVal]);return/*#__PURE__*/React.createElement(ThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(CustomNode,{title:\"Transform\",id:id,data:data,dropdownOptions:Object.values(TransformOperations),onChangeOption:setOperation,sdf:sdf,body:/*#__PURE__*/React.createElement(\"div\",{style:{margin:10}},\"Amount\",/*#__PURE__*/React.createElement(Vector3Input,{handleChange:setTransformVal}))}));}","map":{"version":3,"names":["React","useEffect","CustomNode","FloatSlider","createTheme","ThemeProvider","Vector3Input","theme","palette","primary","light","main","dark","contrastText","TransformOperations","Translate","Scale","Rotate","TransformNode","data","id","useState","operation","setOperation","sdf","setSdf","transformVal","setTransformVal","console","log","Object","keys","inputs","length","input","replace","s","values","margin"],"sources":["G:/gitlab/TFG/Aplicacion/src/CustomNodes/TransformNode.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport CustomNode from \"../CustomNodes/CustomNode\";\r\nimport FloatSlider from \"../CustomComponents/FloatSlider\";\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport Vector3Input from \"../CustomComponents/Vector3Input\";\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      light: '#ffd7a2',\r\n      main: '#ffbb62',\r\n      dark: '#fa9c21',\r\n      contrastText: 'white',\r\n    },\r\n  },\r\n});\r\n\r\nconst TransformOperations = {\r\n  Translate: \"Translate\",\r\n  Scale: \"Scale\",\r\n  Rotate: \"Rotate\"\r\n};\r\n\r\nexport default function TransformNode({ data, id }) {\r\n  const [operation, setOperation] = React.useState(TransformOperations.Translate);\r\n  const [sdf, setSdf] = React.useState(\"\");\r\n  const [transformVal, setTransformVal] = React.useState([0,0,0]);\r\n\r\n  useEffect(() => {\r\n    console.log(\r\n      `SE HAN MODIFICADO LOS SDF EN NODO TRANSFORM. AHORA HAY ${Object.keys(data.inputs).length\r\n      }`\r\n    );\r\n\r\n    let input = data.inputs[Object.keys(data.inputs)[0]];\r\n\r\n    if (input) {\r\n      if(operation !== TransformOperations.Scale)\r\n        setSdf(input.replace(\"p,\", `sdf${operation}(p, vec3(${transformVal[0]},${transformVal[1]},${transformVal[2]}) ),`));\r\n      else{\r\n        const s = `vec3(${transformVal[0]},${transformVal[1]},${transformVal[2]})`;\r\n        setSdf(input.replace(\"p,\", `(p/${s}) * ${s},`));\r\n      }\r\n\r\n    }\r\n\r\n  }, [data, operation, transformVal]);\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CustomNode\r\n        title={\"Transform\"}\r\n        id={id}\r\n        data={data}\r\n        dropdownOptions={Object.values(TransformOperations)}\r\n        onChangeOption={setOperation}\r\n        sdf={sdf}\r\n        body={\r\n          <div style={{ margin: 10 }}>\r\n            Amount\r\n            <Vector3Input handleChange={setTransformVal}/>\r\n          </div>\r\n        }\r\n      />\r\n    </ThemeProvider>\r\n  );\r\n}"],"mappings":"uJAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,WAAP,KAAuB,2BAAvB,CACA,MAAOC,YAAP,KAAwB,iCAAxB,CACA,OAASC,WAAT,CAAsBC,aAAtB,KAA2C,sBAA3C,CACA,MAAOC,aAAP,KAAyB,kCAAzB,CAEA,GAAMC,MAAK,CAAGH,WAAW,CAAC,CACxBI,OAAO,CAAE,CACPC,OAAO,CAAE,CACPC,KAAK,CAAE,SADA,CAEPC,IAAI,CAAE,SAFC,CAGPC,IAAI,CAAE,SAHC,CAIPC,YAAY,CAAE,OAJP,CADF,CADe,CAAD,CAAzB,CAWA,GAAMC,oBAAmB,CAAG,CAC1BC,SAAS,CAAE,WADe,CAE1BC,KAAK,CAAE,OAFmB,CAG1BC,MAAM,CAAE,QAHkB,CAA5B,CAMA,cAAe,SAASC,cAAT,MAAqC,IAAZC,KAAY,MAAZA,IAAY,CAANC,EAAM,MAANA,EAAM,CAClD,oBAAkCpB,KAAK,CAACqB,QAAN,CAAeP,mBAAmB,CAACC,SAAnC,CAAlC,oDAAOO,SAAP,qBAAkBC,YAAlB,qBACA,qBAAsBvB,KAAK,CAACqB,QAAN,CAAe,EAAf,CAAtB,qDAAOG,GAAP,qBAAYC,MAAZ,qBACA,qBAAwCzB,KAAK,CAACqB,QAAN,CAAe,CAAC,CAAD,CAAG,CAAH,CAAK,CAAL,CAAf,CAAxC,qDAAOK,YAAP,qBAAqBC,eAArB,qBAEA1B,SAAS,CAAC,UAAM,CACd2B,OAAO,CAACC,GAAR,kEAC4DC,MAAM,CAACC,IAAP,CAAYZ,IAAI,CAACa,MAAjB,EAAyBC,MADrF,GAKA,GAAIC,MAAK,CAAGf,IAAI,CAACa,MAAL,CAAYF,MAAM,CAACC,IAAP,CAAYZ,IAAI,CAACa,MAAjB,EAAyB,CAAzB,CAAZ,CAAZ,CAEA,GAAIE,KAAJ,CAAW,CACT,GAAGZ,SAAS,GAAKR,mBAAmB,CAACE,KAArC,CACES,MAAM,CAACS,KAAK,CAACC,OAAN,CAAc,IAAd,cAA0Bb,SAA1B,qBAA+CI,YAAY,CAAC,CAAD,CAA3D,aAAkEA,YAAY,CAAC,CAAD,CAA9E,aAAqFA,YAAY,CAAC,CAAD,CAAjG,SAAD,CAAN,CADF,IAEI,CACF,GAAMU,EAAC,gBAAWV,YAAY,CAAC,CAAD,CAAvB,aAA8BA,YAAY,CAAC,CAAD,CAA1C,aAAiDA,YAAY,CAAC,CAAD,CAA7D,KAAP,CACAD,MAAM,CAACS,KAAK,CAACC,OAAN,CAAc,IAAd,cAA0BC,CAA1B,gBAAkCA,CAAlC,MAAD,CAAN,CACD,CAEF,CAEF,CAlBQ,CAkBN,CAACjB,IAAD,CAAOG,SAAP,CAAkBI,YAAlB,CAlBM,CAAT,CAoBA,mBACE,oBAAC,aAAD,EAAe,KAAK,CAAEnB,KAAtB,eACE,oBAAC,UAAD,EACE,KAAK,CAAE,WADT,CAEE,EAAE,CAAEa,EAFN,CAGE,IAAI,CAAED,IAHR,CAIE,eAAe,CAAEW,MAAM,CAACO,MAAP,CAAcvB,mBAAd,CAJnB,CAKE,cAAc,CAAES,YALlB,CAME,GAAG,CAAEC,GANP,CAOE,IAAI,cACF,2BAAK,KAAK,CAAE,CAAEc,MAAM,CAAE,EAAV,CAAZ,wBAEE,oBAAC,YAAD,EAAc,YAAY,CAAEX,eAA5B,EAFF,CARJ,EADF,CADF,CAkBD"},"metadata":{},"sourceType":"module"}