{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\CustomNodes\\\\PrimitiveNode.js\";\nimport React, { memo, useEffect } from 'react';\nimport CustomNode from '../CustomNodes/CustomNode';\nimport FloatInput from '../CustomComponents/FloatInput.js';\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport useLocalStorage from '../storageHook';\nimport newId from '../uniqueIdHook';\nvar theme = createTheme({\n  palette: {\n    primary: {\n      light: '#92bcff',\n      main: '#609dff',\n      dark: '#166cf5',\n      contrastText: 'white'\n    }\n  }\n});\nfunction PrimitiveNode(_ref) {\n  var data = _ref.data,\n    id = _ref.id;\n  var _React$useState = React.useState('sphere'),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    primitive = _React$useState2[0],\n    setPrimitive = _React$useState2[1];\n  var _React$useState3 = React.useState(''),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    sdf = _React$useState4[0],\n    setSdf = _React$useState4[1];\n  var _React$useState5 = React.useState([1.0, 1.0, 1.0]),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    inputs = _React$useState6[0],\n    setInputs = _React$useState6[1];\n  var _React$useState7 = React.useState(['Radius', '', '']),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    inputLabels = _React$useState8[0],\n    setInputLabels = _React$useState8[1];\n  var _useLocalStorage = useLocalStorage('user_implicits', {}),\n    _useLocalStorage2 = _slicedToArray(_useLocalStorage, 1),\n    storage = _useLocalStorage2[0];\n  var handleInputChange = function handleInputChange(newVal, idx) {\n    var newInputs = _toConsumableArray(inputs);\n    newInputs[idx] = newVal;\n    setInputs(newInputs);\n  };\n  useEffect(function () {\n    if (!storage[primitive]) return;\n    var parameters = storage[primitive].parameters;\n    console.log('TYPE: ' + typeof parameters[0].defaultVal);\n    setInputs(Object.keys(parameters).map(function (k) {\n      return parameters[k].defaultVal;\n    }));\n    setInputLabels(Object.keys(parameters).map(function (k) {\n      return parameters[k].label;\n    }));\n\n    // setInputs(Array(parameters.length).fill().map((_, idx) => parameters[idx].defaultVal));\n    console.log(parameters);\n    console.log(primitive);\n  }, [primitive]);\n  useEffect(function () {\n    if (!storage[primitive]) return;\n    var parameters = storage[primitive].parameters;\n    console.log(inputs);\n    setSdf(\"\".concat(primitive, \"(p \").concat(parameters.length > 0 ? ',' : '').concat(parameters.map(function (p, idx) {\n      return \"\".concat(inputs[idx].toFixed(4));\n    }).join(','), \")\"));\n  }, [inputs]);\n  return /*#__PURE__*/React.createElement(ThemeProvider, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CustomNode, {\n    title: 'Primitive',\n    id: id,\n    data: data,\n    dropdownOptions: Object.keys(storage),\n    body: /*#__PURE__*/React.createElement(React.Fragment, null, inputs.map(function (input, idx) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: newId('floatInputContainer_'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FloatInput, {\n        val: inputs[idx],\n        handleChange: function handleChange(newVal) {\n          return handleInputChange(newVal, idx);\n        },\n        label: inputLabels[0],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 19\n        }\n      }));\n    })),\n    onChangeOption: setPrimitive,\n    sdf: sdf,\n    currOption: primitive,\n    nInputs: 0,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }\n  }));\n}\nexport default memo(PrimitiveNode);","map":{"version":3,"names":["React","memo","useEffect","CustomNode","FloatInput","createTheme","ThemeProvider","useLocalStorage","newId","theme","palette","primary","light","main","dark","contrastText","PrimitiveNode","data","id","useState","primitive","setPrimitive","sdf","setSdf","inputs","setInputs","inputLabels","setInputLabels","storage","handleInputChange","newVal","idx","newInputs","parameters","console","log","defaultVal","Object","keys","map","k","label","length","p","toFixed","join","input"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/CustomNodes/PrimitiveNode.js"],"sourcesContent":["import React, {memo, useEffect } from 'react';\r\nimport CustomNode from '../CustomNodes/CustomNode';\r\nimport FloatInput from '../CustomComponents/FloatInput.js';\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport useLocalStorage from '../storageHook';\r\nimport newId from '../uniqueIdHook';\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      light: '#92bcff',\r\n      main: '#609dff',\r\n      dark: '#166cf5',\r\n      contrastText: 'white',\r\n    },\r\n  },\r\n});\r\n\r\nfunction PrimitiveNode({ data, id }) {\r\n  const [primitive, setPrimitive] = React.useState('sphere');\r\n  const [sdf, setSdf] = React.useState('');\r\n  const [inputs, setInputs] = React.useState([1.0, 1.0, 1.0]);\r\n  const [inputLabels, setInputLabels] = React.useState(['Radius', '', '']);\r\n  const [storage] = useLocalStorage('user_implicits', {});\r\n\r\n  const handleInputChange = (newVal, idx) => {\r\n    const newInputs = [...inputs];\r\n    newInputs[idx] = newVal;\r\n\r\n    setInputs(newInputs);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!storage[primitive])\r\n      return;\r\n\r\n    const parameters = storage[primitive].parameters;\r\n\r\n    console.log('TYPE: ' + typeof parameters[0].defaultVal);\r\n    setInputs(\r\n      Object.keys(parameters).map(function (k) {\r\n        return parameters[k].defaultVal;\r\n      })\r\n    );\r\n    setInputLabels(\r\n      Object.keys(parameters).map(function (k) {\r\n        return parameters[k].label;\r\n      })\r\n    );\r\n\r\n    // setInputs(Array(parameters.length).fill().map((_, idx) => parameters[idx].defaultVal));\r\n    console.log(parameters);\r\n    console.log(primitive);\r\n\r\n  }, [primitive]);\r\n\r\n  useEffect(() => {\r\n    if (!storage[primitive])\r\n      return;\r\n\r\n    const parameters = storage[primitive].parameters;\r\n    console.log(inputs);\r\n    setSdf(\r\n      `${primitive}(p ${parameters.length > 0 ? ',' : ''}${parameters\r\n        .map((p, idx) => `${inputs[idx].toFixed(4)}`)\r\n        .join(',')})`\r\n    );\r\n  }, [inputs]);\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CustomNode\r\n        title={'Primitive'}\r\n        id={id}\r\n        data={data}\r\n        dropdownOptions={Object.keys(storage)}\r\n        body={\r\n          <>\r\n            {inputs.map(function (input, idx) {\r\n              return (\r\n                <div key={newId('floatInputContainer_')}>\r\n                  <FloatInput\r\n                    val={inputs[idx]}\r\n                    handleChange={(newVal) => handleInputChange(newVal, idx)}\r\n                    label={inputLabels[0]}\r\n                  />\r\n                </div>\r\n              );\r\n            })}\r\n          </>\r\n        }\r\n        onChangeOption={setPrimitive}\r\n        sdf={sdf}\r\n        currOption={primitive}\r\n        nInputs={0}\r\n      />\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default memo(PrimitiveNode);"],"mappings":"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"},"metadata":{},"sourceType":"module"}