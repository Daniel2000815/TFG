{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.retryAfter = exports.handleRetriesFor = void 0;\n\nfunction handleRetriesFor(code) {\n  return new Promise(function run(ok, fail) {\n    try {\n      ok(code());\n    } catch (err) {\n      if (err.retry && err.retry instanceof Promise) {\n        err.retry.then(function () {\n          return run(ok, fail);\n        }).catch(function (perr) {\n          return fail(perr);\n        });\n      } else if (err.restart && err.restart.isCallback) {\n        MathJax.Callback.After(function () {\n          return run(ok, fail);\n        }, err.restart);\n      } else {\n        fail(err);\n      }\n    }\n  });\n}\n\nexports.handleRetriesFor = handleRetriesFor;\n\nfunction retryAfter(promise) {\n  var err = new Error('MathJax retry');\n  err.retry = promise;\n  throw err;\n}\n\nexports.retryAfter = retryAfter;","map":{"version":3,"mappings":";;;;;;;AAqEA,SAAgBA,gBAAhB,CAAiCC,IAAjC,EAA+C;EAC7C,OAAO,IAAIC,OAAJ,CAAY,SAASC,GAAT,CAAaC,EAAb,EAA2BC,IAA3B,EAAyC;IAC1D,IAAI;MACFD,EAAE,CAACH,IAAI,EAAL,CAAF;IACD,CAFD,CAEE,OAAOK,GAAP,EAAY;MACZ,IAAIA,GAAG,CAACC,KAAJ,IAAaD,GAAG,CAACC,KAAJ,YAAqBL,OAAtC,EAA+C;QAC7CI,GAAG,CAACC,KAAJ,CAAUC,IAAV,CAAe;UAAM,UAAG,CAACJ,EAAD,EAAKC,IAAL,CAAH;QAAa,CAAlC,EACUI,KADV,CACgB,UAACC,IAAD,EAAY;UAAK,WAAI,CAACA,IAAD,CAAJ;QAAU,CAD3C;MAED,CAHD,MAGO,IAAIJ,GAAG,CAACK,OAAJ,IAAeL,GAAG,CAACK,OAAJ,CAAYC,UAA/B,EAA2C;QAEhDC,OAAO,CAACC,QAAR,CAAiBC,KAAjB,CAAuB;UAAM,UAAG,CAACX,EAAD,EAAKC,IAAL,CAAH;QAAa,CAA1C,EAA4CC,GAAG,CAACK,OAAhD;MACD,CAHM,MAGA;QACLN,IAAI,CAACC,GAAD,CAAJ;MACD;IACF;EACF,CAdM,CAAP;AAeD;;AAhBDU;;AA4BA,SAAgBC,UAAhB,CAA2BC,OAA3B,EAAgD;EAC9C,IAAIZ,GAAG,GAAG,IAAIa,KAAJ,CAAU,eAAV,CAAV;EACAb,GAAG,CAACC,KAAJ,GAAYW,OAAZ;EACA,MAAMZ,GAAN;AACD;;AAJDU","names":["handleRetriesFor","code","Promise","run","ok","fail","err","retry","then","catch","perr","restart","isCallback","MathJax","Callback","After","exports","retryAfter","promise","Error"],"sourceRoot":"","sources":["../../ts/util/Retries.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}