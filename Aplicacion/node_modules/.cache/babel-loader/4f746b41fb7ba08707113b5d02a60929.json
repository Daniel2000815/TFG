{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\BooleanNode.js\";\nimport React, { useEffect, useContext } from \"react\";\nimport { Handle } from \"react-flow-renderer\";\nimport Shader from \"./Shader\";\nimport { fs } from \"./fragmentShader\";\nimport Dropdown from \"./Dropdown\";\nimport CustomHandle from \"./CustomHandle\";\nimport GraphContext from \"./GraphContext.js\";\nvar BooleanOperations = {\n  Union: \"Union\",\n  Difference: \"Difference\",\n  Intersection: \"Intersection\"\n};\nexport default function BooleanNode(_ref) {\n  var data = _ref.data,\n      id = _ref.id;\n\n  var _React$useState = React.useState(BooleanOperations.Union),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      operation = _React$useState2[0],\n      setOperation = _React$useState2[1];\n\n  var _React$useState3 = React.useState(data.sdf),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      sdf = _React$useState4[0],\n      setSdf = _React$useState4[1];\n\n  var sharedFunctions = useContext(GraphContext);\n  useEffect(function () {\n    console.log(\"\".concat(id, \" HA RECIBIDO NUEVOS DATOS:\"));\n    console.log(JSON.stringify(data));\n  }, [data]);\n  useEffect(function () {\n    console.log(\"SDF DE \".concat(id, \" MODIFICADO\"));\n    sharedFunctions.updateNodeSdf(id, sdf);\n  }, [sdf]);\n  useEffect(function () {\n    console.log(\"SE HAN MODIFICADO LOS SDF EN NODO BOOLEANO. AHORA HAY \".concat(Object.keys(data.inputs).length));\n    var inputs = \"\".concat(Object.keys(data.inputs).map(function (key) {\n      return \"\".concat(data.inputs[key]);\n    }).join(', '));\n    console.log(inputs);\n    if (operation === BooleanOperations.Union) setSdf(\"min(\".concat(inputs, \")\"));else if (operation === BooleanOperations.Intersection) setSdf(\"max(\".concat(inputs, \")\"));else if (operation === BooleanOperations.Difference) setSdf(\"max(-\".concat(inputs, \")\"));\n  }, [data, operation]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-node\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-node-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, \"Boolean\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }\n  }, \"ID: \".concat(id)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }\n  }, \"CHILDREN: \", Object.keys(data.children).map(function (key) {\n    return \"\".concat(data.children[key]);\n  }).join(', ')), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, \"SDF: \", sdf), /*#__PURE__*/React.createElement(Dropdown, {\n    value: operation,\n    onChange: setOperation,\n    items: Object.values(BooleanOperations),\n    label: \"Operation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CustomHandle, {\n    id: \"0\",\n    type: \"target\",\n    onConnect: function onConnect(params) {\n      return console.log(\"handle ss\", params);\n    },\n    style: {\n      top: \"45%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CustomHandle, {\n    id: \"1\",\n    type: \"target\",\n    onConnect: function onConnect(params) {\n      return data.updateBooleanPrimitive(params.source, params.target);\n    },\n    style: {\n      top: \"55%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CustomHandle, {\n    id: \"2\",\n    type: \"source\",\n    onConnect: function onConnect(params) {\n      return console.log(\"handle onsConnect\", params);\n    },\n    style: {\n      top: \"50%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Shader, {\n    shader: fs(\"\".concat(sdf)),\n    uniforms: {\n      color: {\n        type: \"3fv\",\n        value: [1.0, 1.0, 0.0]\n      }\n    },\n    style: {\n      margin: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"names":["React","useEffect","useContext","Handle","Shader","fs","Dropdown","CustomHandle","GraphContext","BooleanOperations","Union","Difference","Intersection","BooleanNode","data","id","useState","operation","setOperation","sdf","setSdf","sharedFunctions","console","log","JSON","stringify","updateNodeSdf","Object","keys","inputs","length","map","key","join","children","values","params","top","updateBooleanPrimitive","source","target","color","type","value","margin"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/BooleanNode.js"],"sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport { Handle } from \"react-flow-renderer\";\r\nimport Shader from \"./Shader\";\r\nimport { fs } from \"./fragmentShader\";\r\nimport Dropdown from \"./Dropdown\";\r\nimport CustomHandle from \"./CustomHandle\";\r\nimport GraphContext from \"./GraphContext.js\";\r\n\r\nconst BooleanOperations = {\r\n  Union: \"Union\",\r\n  Difference: \"Difference\",\r\n  Intersection: \"Intersection\",\r\n};\r\n\r\n\r\n\r\nexport default function BooleanNode({ data, id }) {\r\n  const [operation, setOperation] = React.useState(BooleanOperations.Union);\r\n  const [sdf, setSdf] = React.useState(data.sdf);\r\n  const sharedFunctions = useContext(GraphContext);\r\n  \r\n  useEffect(() => {\r\n    console.log(`${id} HA RECIBIDO NUEVOS DATOS:`);\r\n    console.log(JSON.stringify(data));\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    console.log(`SDF DE ${id} MODIFICADO`);\r\n    sharedFunctions.updateNodeSdf(id, sdf);\r\n  }, [sdf]);\r\n\r\n  useEffect(() => {\r\n    console.log(`SE HAN MODIFICADO LOS SDF EN NODO BOOLEANO. AHORA HAY ${Object.keys(data.inputs).length}`);\r\n    const inputs = `${Object.keys(data.inputs).map(key => `${data.inputs[key]}`).join(', ')}`;\r\n    console.log(inputs);\r\n    if(operation===BooleanOperations.Union)\r\n      setSdf(`min(${inputs})`)\r\n    else if(operation===BooleanOperations.Intersection)\r\n      setSdf(`max(${inputs})`)\r\n    else if(operation===BooleanOperations.Difference)\r\n      setSdf(`max(-${inputs})`)\r\n\r\n  }, [data, operation]);\r\n\r\n  return (\r\n    <div className=\"custom-node\">\r\n      <div className=\"custom-node-header\">Boolean</div>\r\n      <p>{`ID: ${id}`}</p>\r\n      <p>CHILDREN: {Object.keys(data.children).map(key => `${data.children[key]}`).join(', ')}</p>\r\n      <p>SDF: {sdf}</p>\r\n\r\n      <Dropdown\r\n        value={operation}\r\n        onChange={setOperation}\r\n        items={Object.values(BooleanOperations)}\r\n        label=\"Operation\"\r\n      />\r\n\r\n      <CustomHandle id={\"0\"} type=\"target\" onConnect={(params) => console.log(\"handle ss\", params)} style={{ top: \"45%\" }}/>\r\n      <CustomHandle id={\"1\"} type=\"target\" onConnect={(params) => data.updateBooleanPrimitive(params.source, params.target)} style={{ top: \"55%\" }}/>\r\n      <CustomHandle id={\"2\"} type=\"source\" onConnect={(params) => console.log(\"handle onsConnect\", params)} style={{ top: \"50%\" }}/>\r\n\r\n      <Shader\r\n        shader={fs(`${sdf}`)}\r\n        uniforms={{ color: { type: \"3fv\", value: [1.0, 1.0, 0.0] } }}\r\n        style={{ margin: \"10px\" }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}