{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonMunderoverMixin = exports.CommonMoverMixin = exports.CommonMunderMixin = void 0;\n\nfunction CommonMunderMixin(Base) {\n  return function (_super) {\n    __extends(class_1, _super);\n\n    function class_1() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var _this = _super.apply(this, __spreadArray([], __read(args), false)) || this;\n\n      _this.stretchChildren();\n\n      return _this;\n    }\n\n    Object.defineProperty(class_1.prototype, \"scriptChild\", {\n      get: function get() {\n        return this.childNodes[this.node.under];\n      },\n      enumerable: false,\n      configurable: true\n    });\n\n    class_1.prototype.computeBBox = function (bbox, recompute) {\n      if (recompute === void 0) {\n        recompute = false;\n      }\n\n      if (this.hasMovableLimits()) {\n        _super.prototype.computeBBox.call(this, bbox, recompute);\n\n        return;\n      }\n\n      bbox.empty();\n      var basebox = this.baseChild.getOuterBBox();\n      var underbox = this.scriptChild.getOuterBBox();\n      var v = this.getUnderKV(basebox, underbox)[1];\n      var delta = this.isLineBelow ? 0 : this.getDelta(true);\n\n      var _a = __read(this.getDeltaW([basebox, underbox], [0, -delta]), 2),\n          bw = _a[0],\n          uw = _a[1];\n\n      bbox.combine(basebox, bw, 0);\n      bbox.combine(underbox, uw, v);\n      bbox.d += this.font.params.big_op_spacing5;\n      bbox.clean();\n      this.setChildPWidths(recompute);\n    };\n\n    return class_1;\n  }(Base);\n}\n\nexports.CommonMunderMixin = CommonMunderMixin;\n\nfunction CommonMoverMixin(Base) {\n  return function (_super) {\n    __extends(class_2, _super);\n\n    function class_2() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var _this = _super.apply(this, __spreadArray([], __read(args), false)) || this;\n\n      _this.stretchChildren();\n\n      return _this;\n    }\n\n    Object.defineProperty(class_2.prototype, \"scriptChild\", {\n      get: function get() {\n        return this.childNodes[this.node.over];\n      },\n      enumerable: false,\n      configurable: true\n    });\n\n    class_2.prototype.computeBBox = function (bbox) {\n      if (this.hasMovableLimits()) {\n        _super.prototype.computeBBox.call(this, bbox);\n\n        return;\n      }\n\n      bbox.empty();\n      var basebox = this.baseChild.getOuterBBox();\n      var overbox = this.scriptChild.getOuterBBox();\n\n      if (this.node.attributes.get('accent')) {\n        basebox.h = Math.max(basebox.h, this.font.params.x_height * basebox.scale);\n      }\n\n      var u = this.getOverKU(basebox, overbox)[1];\n      var delta = this.isLineAbove ? 0 : this.getDelta();\n\n      var _a = __read(this.getDeltaW([basebox, overbox], [0, delta]), 2),\n          bw = _a[0],\n          ow = _a[1];\n\n      bbox.combine(basebox, bw, 0);\n      bbox.combine(overbox, ow, u);\n      bbox.h += this.font.params.big_op_spacing5;\n      bbox.clean();\n    };\n\n    return class_2;\n  }(Base);\n}\n\nexports.CommonMoverMixin = CommonMoverMixin;\n\nfunction CommonMunderoverMixin(Base) {\n  return function (_super) {\n    __extends(class_3, _super);\n\n    function class_3() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var _this = _super.apply(this, __spreadArray([], __read(args), false)) || this;\n\n      _this.stretchChildren();\n\n      return _this;\n    }\n\n    Object.defineProperty(class_3.prototype, \"underChild\", {\n      get: function get() {\n        return this.childNodes[this.node.under];\n      },\n      enumerable: false,\n      configurable: true\n    });\n    Object.defineProperty(class_3.prototype, \"overChild\", {\n      get: function get() {\n        return this.childNodes[this.node.over];\n      },\n      enumerable: false,\n      configurable: true\n    });\n    Object.defineProperty(class_3.prototype, \"subChild\", {\n      get: function get() {\n        return this.underChild;\n      },\n      enumerable: false,\n      configurable: true\n    });\n    Object.defineProperty(class_3.prototype, \"supChild\", {\n      get: function get() {\n        return this.overChild;\n      },\n      enumerable: false,\n      configurable: true\n    });\n\n    class_3.prototype.computeBBox = function (bbox) {\n      if (this.hasMovableLimits()) {\n        _super.prototype.computeBBox.call(this, bbox);\n\n        return;\n      }\n\n      bbox.empty();\n      var overbox = this.overChild.getOuterBBox();\n      var basebox = this.baseChild.getOuterBBox();\n      var underbox = this.underChild.getOuterBBox();\n\n      if (this.node.attributes.get('accent')) {\n        basebox.h = Math.max(basebox.h, this.font.params.x_height * basebox.scale);\n      }\n\n      var u = this.getOverKU(basebox, overbox)[1];\n      var v = this.getUnderKV(basebox, underbox)[1];\n      var delta = this.getDelta();\n\n      var _a = __read(this.getDeltaW([basebox, underbox, overbox], [0, this.isLineBelow ? 0 : -delta, this.isLineAbove ? 0 : delta]), 3),\n          bw = _a[0],\n          uw = _a[1],\n          ow = _a[2];\n\n      bbox.combine(basebox, bw, 0);\n      bbox.combine(overbox, ow, u);\n      bbox.combine(underbox, uw, v);\n      var z = this.font.params.big_op_spacing5;\n      bbox.h += z;\n      bbox.d += z;\n      bbox.clean();\n    };\n\n    return class_3;\n  }(Base);\n}\n\nexports.CommonMunderoverMixin = CommonMunderoverMixin;","map":{"version":3,"mappings":"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","names":["CommonMunderMixin","Base","__extends","args","_this","stretchChildren","Object","class_1","childNodes","node","under","bbox","recompute","hasMovableLimits","_super","computeBBox","call","empty","basebox","baseChild","getOuterBBox","underbox","scriptChild","v","getUnderKV","delta","isLineBelow","getDelta","getDeltaW","bw","uw","combine","d","font","params","big_op_spacing5","clean","setChildPWidths","exports","CommonMoverMixin","class_2","over","overbox","attributes","get","h","Math","max","x_height","scale","u","getOverKU","isLineAbove","ow","CommonMunderoverMixin","class_3","underChild","overChild","z"],"sourceRoot":"","sources":["../../../../ts/output/common/Wrappers/munderover.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}