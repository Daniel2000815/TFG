{"ast":null,"code":"\"use strict\";\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar NodeUtil_js_1 = __importDefault(require(\"./NodeUtil.js\"));\n\nvar TexConstants_js_1 = require(\"./TexConstants.js\");\n\nvar ParseUtil_js_1 = __importDefault(require(\"./ParseUtil.js\"));\n\nvar ParseMethods;\n\n(function (ParseMethods) {\n  function variable(parser, c) {\n    var def = ParseUtil_js_1.default.getFontDef(parser);\n    var env = parser.stack.env;\n\n    if (env.multiLetterIdentifiers && env.font !== '') {\n      c = parser.string.substr(parser.i - 1).match(env.multiLetterIdentifiers)[0];\n      parser.i += c.length - 1;\n\n      if (def.mathvariant === TexConstants_js_1.TexConstant.Variant.NORMAL && env.noAutoOP && c.length > 1) {\n        def.autoOP = false;\n      }\n    }\n\n    var node = parser.create('token', 'mi', def, c);\n    parser.Push(node);\n  }\n\n  ParseMethods.variable = variable;\n\n  function digit(parser, c) {\n    var mml;\n    var pattern = parser.configuration.options['digits'];\n    var n = parser.string.slice(parser.i - 1).match(pattern);\n    var def = ParseUtil_js_1.default.getFontDef(parser);\n\n    if (n) {\n      mml = parser.create('token', 'mn', def, n[0].replace(/[{}]/g, ''));\n      parser.i += n[0].length - 1;\n    } else {\n      mml = parser.create('token', 'mo', def, c);\n    }\n\n    parser.Push(mml);\n  }\n\n  ParseMethods.digit = digit;\n\n  function controlSequence(parser, _c) {\n    var name = parser.GetCS();\n    parser.parse('macro', [parser, name]);\n  }\n\n  ParseMethods.controlSequence = controlSequence;\n\n  function mathchar0mi(parser, mchar) {\n    var def = mchar.attributes || {\n      mathvariant: TexConstants_js_1.TexConstant.Variant.ITALIC\n    };\n    var node = parser.create('token', 'mi', def, mchar.char);\n    parser.Push(node);\n  }\n\n  ParseMethods.mathchar0mi = mathchar0mi;\n\n  function mathchar0mo(parser, mchar) {\n    var def = mchar.attributes || {};\n    def['stretchy'] = false;\n    var node = parser.create('token', 'mo', def, mchar.char);\n    NodeUtil_js_1.default.setProperty(node, 'fixStretchy', true);\n    parser.configuration.addNode('fixStretchy', node);\n    parser.Push(node);\n  }\n\n  ParseMethods.mathchar0mo = mathchar0mo;\n\n  function mathchar7(parser, mchar) {\n    var def = mchar.attributes || {\n      mathvariant: TexConstants_js_1.TexConstant.Variant.NORMAL\n    };\n\n    if (parser.stack.env['font']) {\n      def['mathvariant'] = parser.stack.env['font'];\n    }\n\n    var node = parser.create('token', 'mi', def, mchar.char);\n    parser.Push(node);\n  }\n\n  ParseMethods.mathchar7 = mathchar7;\n\n  function delimiter(parser, delim) {\n    var def = delim.attributes || {};\n    def = Object.assign({\n      fence: false,\n      stretchy: false\n    }, def);\n    var node = parser.create('token', 'mo', def, delim.char);\n    parser.Push(node);\n  }\n\n  ParseMethods.delimiter = delimiter;\n\n  function environment(parser, env, func, args) {\n    var end = args[0];\n    var mml = parser.itemFactory.create('begin').setProperties({\n      name: env,\n      end: end\n    });\n    mml = func.apply(void 0, __spreadArray([parser, mml], __read(args.slice(1)), false));\n    parser.Push(mml);\n  }\n\n  ParseMethods.environment = environment;\n})(ParseMethods || (ParseMethods = {}));\n\nexports.default = ParseMethods;","map":{"version":3,"mappings":"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","names":["ParseMethods","variable","parser","c","def","ParseUtil_js_1","getFontDef","env","stack","multiLetterIdentifiers","font","string","substr","i","match","length","mathvariant","TexConstants_js_1","Variant","NORMAL","noAutoOP","autoOP","node","create","Push","digit","mml","pattern","configuration","options","n","slice","replace","controlSequence","_c","name","GetCS","parse","mathchar0mi","mchar","attributes","ITALIC","char","mathchar0mo","NodeUtil_js_1","setProperty","addNode","mathchar7","delimiter","delim","Object","assign","fence","stretchy","environment","func","args","end","itemFactory","setProperties","__spreadArray","__read","exports"],"sourceRoot":"","sources":["../../../ts/input/tex/ParseMethods.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}