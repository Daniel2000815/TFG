{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BaseConfiguration = exports.BaseTags = exports.Other = void 0;\n\nvar Configuration_js_1 = require(\"../Configuration.js\");\n\nvar MapHandler_js_1 = require(\"../MapHandler.js\");\n\nvar TexError_js_1 = __importDefault(require(\"../TexError.js\"));\n\nvar NodeUtil_js_1 = __importDefault(require(\"../NodeUtil.js\"));\n\nvar SymbolMap_js_1 = require(\"../SymbolMap.js\");\n\nvar bitem = __importStar(require(\"./BaseItems.js\"));\n\nvar Tags_js_1 = require(\"../Tags.js\");\n\nrequire(\"./BaseMappings.js\");\n\nvar OperatorDictionary_js_1 = require(\"../../../core/MmlTree/OperatorDictionary.js\");\n\nnew SymbolMap_js_1.CharacterMap('remap', null, {\n  '-': \"\\u2212\",\n  '*': \"\\u2217\",\n  '`': \"\\u2018\"\n});\n\nfunction Other(parser, char) {\n  var font = parser.stack.env['font'];\n  var def = font ? {\n    mathvariant: parser.stack.env['font']\n  } : {};\n  var remap = MapHandler_js_1.MapHandler.getMap('remap').lookup(char);\n  var range = (0, OperatorDictionary_js_1.getRange)(char);\n  var type = range ? range[3] : 'mo';\n  var mo = parser.create('token', type, def, remap ? remap.char : char);\n  range[4] && mo.attributes.set('mathvariant', range[4]);\n\n  if (type === 'mo') {\n    NodeUtil_js_1.default.setProperty(mo, 'fixStretchy', true);\n    parser.configuration.addNode('fixStretchy', mo);\n  }\n\n  parser.Push(mo);\n}\n\nexports.Other = Other;\n\nfunction csUndefined(_parser, name) {\n  throw new TexError_js_1.default('UndefinedControlSequence', 'Undefined control sequence %1', '\\\\' + name);\n}\n\nfunction envUndefined(_parser, env) {\n  throw new TexError_js_1.default('UnknownEnv', 'Unknown environment \\'%1\\'', env);\n}\n\nfunction filterNonscript(_a) {\n  var e_1, _b;\n\n  var data = _a.data;\n\n  try {\n    for (var _c = __values(data.getList('nonscript')), _d = _c.next(); !_d.done; _d = _c.next()) {\n      var mml = _d.value;\n\n      if (mml.attributes.get('scriptlevel') > 0) {\n        var parent_1 = mml.parent;\n        parent_1.childNodes.splice(parent_1.childIndex(mml), 1);\n        data.removeFromList(mml.kind, [mml]);\n\n        if (mml.isKind('mrow')) {\n          var mstyle = mml.childNodes[0];\n          data.removeFromList('mstyle', [mstyle]);\n          data.removeFromList('mspace', mstyle.childNodes[0].childNodes);\n        }\n      } else if (mml.isKind('mrow')) {\n        mml.parent.replaceChild(mml.childNodes[0], mml);\n        data.removeFromList('mrow', [mml]);\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_d && !_d.done && (_b = _c.return)) _b.call(_c);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n}\n\nvar BaseTags = function (_super) {\n  __extends(BaseTags, _super);\n\n  function BaseTags() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return BaseTags;\n}(Tags_js_1.AbstractTags);\n\nexports.BaseTags = BaseTags;\nexports.BaseConfiguration = Configuration_js_1.Configuration.create('base', {\n  handler: {\n    character: ['command', 'special', 'letter', 'digit'],\n    delimiter: ['delimiter'],\n    macro: ['delimiter', 'macros', 'mathchar0mi', 'mathchar0mo', 'mathchar7'],\n    environment: ['environment']\n  },\n  fallback: {\n    character: Other,\n    macro: csUndefined,\n    environment: envUndefined\n  },\n  items: (_a = {}, _a[bitem.StartItem.prototype.kind] = bitem.StartItem, _a[bitem.StopItem.prototype.kind] = bitem.StopItem, _a[bitem.OpenItem.prototype.kind] = bitem.OpenItem, _a[bitem.CloseItem.prototype.kind] = bitem.CloseItem, _a[bitem.PrimeItem.prototype.kind] = bitem.PrimeItem, _a[bitem.SubsupItem.prototype.kind] = bitem.SubsupItem, _a[bitem.OverItem.prototype.kind] = bitem.OverItem, _a[bitem.LeftItem.prototype.kind] = bitem.LeftItem, _a[bitem.Middle.prototype.kind] = bitem.Middle, _a[bitem.RightItem.prototype.kind] = bitem.RightItem, _a[bitem.BeginItem.prototype.kind] = bitem.BeginItem, _a[bitem.EndItem.prototype.kind] = bitem.EndItem, _a[bitem.StyleItem.prototype.kind] = bitem.StyleItem, _a[bitem.PositionItem.prototype.kind] = bitem.PositionItem, _a[bitem.CellItem.prototype.kind] = bitem.CellItem, _a[bitem.MmlItem.prototype.kind] = bitem.MmlItem, _a[bitem.FnItem.prototype.kind] = bitem.FnItem, _a[bitem.NotItem.prototype.kind] = bitem.NotItem, _a[bitem.NonscriptItem.prototype.kind] = bitem.NonscriptItem, _a[bitem.DotsItem.prototype.kind] = bitem.DotsItem, _a[bitem.ArrayItem.prototype.kind] = bitem.ArrayItem, _a[bitem.EqnArrayItem.prototype.kind] = bitem.EqnArrayItem, _a[bitem.EquationItem.prototype.kind] = bitem.EquationItem, _a),\n  options: {\n    maxMacros: 1000,\n    baseURL: typeof document === 'undefined' || document.getElementsByTagName('base').length === 0 ? '' : String(document.location).replace(/#.*$/, '')\n  },\n  tags: {\n    base: BaseTags\n  },\n  postprocessors: [[filterNonscript, -4]]\n});","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACAA;;AACA;;AAOA,IAAIC,2BAAJ,CAAiB,OAAjB,EAA0B,IAA1B,EAAgC;EAC9B,KAAO,QADuB;EAE9B,KAAO,QAFuB;EAG9B,KAAO;AAHuB,CAAhC;;AAYA,SAAgBC,KAAhB,CAAsBC,MAAtB,EAAyCC,IAAzC,EAAqD;EACnD,IAAMC,IAAI,GAAGF,MAAM,CAACG,KAAP,CAAaC,GAAb,CAAiB,MAAjB,CAAb;EACA,IAAIC,GAAG,GAAGH,IAAI,GAEZ;IAACI,WAAW,EAAEN,MAAM,CAACG,KAAP,CAAaC,GAAb,CAAiB,MAAjB;EAAd,CAFY,GAE8B,EAF5C;EAGA,IAAMG,KAAK,GAAIC,2BAAWC,MAAX,CAAkB,OAAlB,EAA4CC,MAA5C,CAAmDT,IAAnD,CAAf;EACA,IAAMU,KAAK,GAAG,sCAASV,IAAT,CAAd;EACA,IAAMW,IAAI,GAAID,KAAK,GAAGA,KAAK,CAAC,CAAD,CAAR,GAAc,IAAjC;EAGA,IAAIE,EAAE,GAAGb,MAAM,CAACc,MAAP,CAAc,OAAd,EAAuBF,IAAvB,EAA6BP,GAA7B,EAAmCE,KAAK,GAAGA,KAAK,CAACN,IAAT,GAAgBA,IAAxD,CAAT;EACAU,KAAK,CAAC,CAAD,CAAL,IAAYE,EAAE,CAACE,UAAH,CAAcC,GAAd,CAAkB,aAAlB,EAAiCL,KAAK,CAAC,CAAD,CAAtC,CAAZ;;EACA,IAAIC,IAAI,KAAK,IAAb,EAAmB;IACjBK,sBAASC,WAAT,CAAqBL,EAArB,EAAyB,aAAzB,EAAwC,IAAxC;IACAb,MAAM,CAACmB,aAAP,CAAqBC,OAArB,CAA6B,aAA7B,EAA4CP,EAA5C;EACD;;EACDb,MAAM,CAACqB,IAAP,CAAYR,EAAZ;AACD;;AAjBDS;;AAyBA,SAASC,WAAT,CAAqBC,OAArB,EAAyCC,IAAzC,EAAqD;EAEnD,MAAM,IAAIC,qBAAJ,CAAa,0BAAb,EACc,+BADd,EAC+C,OAAOD,IADtD,CAAN;AAED;;AAQD,SAASE,YAAT,CAAsBH,OAAtB,EAA0CpB,GAA1C,EAAqD;EAEnD,MAAM,IAAIsB,qBAAJ,CAAa,YAAb,EAA2B,4BAA3B,EAAyDtB,GAAzD,CAAN;AACD;;AAMD,SAASwB,eAAT,CAAyBC,EAAzB,EAAqD;;;MAA3BC,IAAI;;;IAC5B,KAAkB,sBAAI,CAACC,OAAL,CAAa,WAAb,IAAyBC,cAA3C,EAA2C,QAA3C,EAA2CA,cAA3C,EAA6C;MAAxC,IAAMC,GAAG,WAAT;;MAKH,IAAIA,GAAG,CAAClB,UAAJ,CAAemB,GAAf,CAAmB,aAAnB,IAAoC,CAAxC,EAA2C;QAKzC,IAAMC,QAAM,GAAGF,GAAG,CAACG,MAAnB;QACAD,QAAM,CAACE,UAAP,CAAkBC,MAAlB,CAAyBH,QAAM,CAACI,UAAP,CAAkBN,GAAlB,CAAzB,EAAiD,CAAjD;QACAH,IAAI,CAACU,cAAL,CAAoBP,GAAG,CAACQ,IAAxB,EAA8B,CAACR,GAAD,CAA9B;;QAMA,IAAIA,GAAG,CAACS,MAAJ,CAAW,MAAX,CAAJ,EAAwB;UACtB,IAAMC,MAAM,GAAGV,GAAG,CAACI,UAAJ,CAAe,CAAf,CAAf;UACAP,IAAI,CAACU,cAAL,CAAoB,QAApB,EAA8B,CAACG,MAAD,CAA9B;UACAb,IAAI,CAACU,cAAL,CAAoB,QAApB,EAA8BG,MAAM,CAACN,UAAP,CAAkB,CAAlB,EAAqBA,UAAnD;QACD;MACF,CAlBD,MAkBO,IAAIJ,GAAG,CAACS,MAAJ,CAAW,MAAX,CAAJ,EAAwB;QAK7BT,GAAG,CAACG,MAAJ,CAAWQ,YAAX,CAAwBX,GAAG,CAACI,UAAJ,CAAe,CAAf,CAAxB,EAA2CJ,GAA3C;QACAH,IAAI,CAACU,cAAL,CAAoB,MAApB,EAA4B,CAACP,GAAD,CAA5B;MACD;IACF;;;;;;;;;;;;AACF;;AAOD;EAA8BY;;EAA9B;;EAA8C;;EAAD;AAAC,CAA9C,CAA8BC,sBAA9B;;AAAaxB;AAOAA,4BAAmCyB,iCAAcjC,MAAd,CAC9C,MAD8C,EACrC;EACPkC,OAAO,EAAE;IACPC,SAAS,EAAE,CAAC,SAAD,EAAY,SAAZ,EAAuB,QAAvB,EAAiC,OAAjC,CADJ;IAEPC,SAAS,EAAE,CAAC,WAAD,CAFJ;IAIPC,KAAK,EAAE,CAAC,WAAD,EAAc,QAAd,EAAwB,aAAxB,EAAuC,aAAvC,EAAsD,WAAtD,CAJA;IAKPC,WAAW,EAAE,CAAC,aAAD;EALN,CADF;EAQPC,QAAQ,EAAE;IACRJ,SAAS,EAAElD,KADH;IAERoD,KAAK,EAAE5B,WAFC;IAGR6B,WAAW,EAAEzB;EAHL,CARH;EAaP2B,KAAK,YAEHzB,GAAC0B,KAAK,CAACC,SAAN,CAAgBC,SAAhB,CAA0BhB,IAA3B,IAAkCc,KAAK,CAACC,SAFrC,EAGH3B,GAAC0B,KAAK,CAACG,QAAN,CAAeD,SAAf,CAAyBhB,IAA1B,IAAiCc,KAAK,CAACG,QAHpC,EAIH7B,GAAC0B,KAAK,CAACI,QAAN,CAAeF,SAAf,CAAyBhB,IAA1B,IAAiCc,KAAK,CAACI,QAJpC,EAKH9B,GAAC0B,KAAK,CAACK,SAAN,CAAgBH,SAAhB,CAA0BhB,IAA3B,IAAkCc,KAAK,CAACK,SALrC,EAMH/B,GAAC0B,KAAK,CAACM,SAAN,CAAgBJ,SAAhB,CAA0BhB,IAA3B,IAAkCc,KAAK,CAACM,SANrC,EAOHhC,GAAC0B,KAAK,CAACO,UAAN,CAAiBL,SAAjB,CAA2BhB,IAA5B,IAAmCc,KAAK,CAACO,UAPtC,EAQHjC,GAAC0B,KAAK,CAACQ,QAAN,CAAeN,SAAf,CAAyBhB,IAA1B,IAAiCc,KAAK,CAACQ,QARpC,EASHlC,GAAC0B,KAAK,CAACS,QAAN,CAAeP,SAAf,CAAyBhB,IAA1B,IAAiCc,KAAK,CAACS,QATpC,EAUHnC,GAAC0B,KAAK,CAACU,MAAN,CAAaR,SAAb,CAAuBhB,IAAxB,IAA+Bc,KAAK,CAACU,MAVlC,EAWHpC,GAAC0B,KAAK,CAACW,SAAN,CAAgBT,SAAhB,CAA0BhB,IAA3B,IAAkCc,KAAK,CAACW,SAXrC,EAYHrC,GAAC0B,KAAK,CAACY,SAAN,CAAgBV,SAAhB,CAA0BhB,IAA3B,IAAkCc,KAAK,CAACY,SAZrC,EAaHtC,GAAC0B,KAAK,CAACa,OAAN,CAAcX,SAAd,CAAwBhB,IAAzB,IAAgCc,KAAK,CAACa,OAbnC,EAcHvC,GAAC0B,KAAK,CAACc,SAAN,CAAgBZ,SAAhB,CAA0BhB,IAA3B,IAAkCc,KAAK,CAACc,SAdrC,EAeHxC,GAAC0B,KAAK,CAACe,YAAN,CAAmBb,SAAnB,CAA6BhB,IAA9B,IAAqCc,KAAK,CAACe,YAfxC,EAgBHzC,GAAC0B,KAAK,CAACgB,QAAN,CAAed,SAAf,CAAyBhB,IAA1B,IAAiCc,KAAK,CAACgB,QAhBpC,EAiBH1C,GAAC0B,KAAK,CAACiB,OAAN,CAAcf,SAAd,CAAwBhB,IAAzB,IAAgCc,KAAK,CAACiB,OAjBnC,EAkBH3C,GAAC0B,KAAK,CAACkB,MAAN,CAAahB,SAAb,CAAuBhB,IAAxB,IAA+Bc,KAAK,CAACkB,MAlBlC,EAmBH5C,GAAC0B,KAAK,CAACmB,OAAN,CAAcjB,SAAd,CAAwBhB,IAAzB,IAAgCc,KAAK,CAACmB,OAnBnC,EAoBH7C,GAAC0B,KAAK,CAACoB,aAAN,CAAoBlB,SAApB,CAA8BhB,IAA/B,IAAsCc,KAAK,CAACoB,aApBzC,EAqBH9C,GAAC0B,KAAK,CAACqB,QAAN,CAAenB,SAAf,CAAyBhB,IAA1B,IAAiCc,KAAK,CAACqB,QArBpC,EAsBH/C,GAAC0B,KAAK,CAACsB,SAAN,CAAgBpB,SAAhB,CAA0BhB,IAA3B,IAAkCc,KAAK,CAACsB,SAtBrC,EAuBHhD,GAAC0B,KAAK,CAACuB,YAAN,CAAmBrB,SAAnB,CAA6BhB,IAA9B,IAAqCc,KAAK,CAACuB,YAvBxC,EAwBHjD,GAAC0B,KAAK,CAACwB,YAAN,CAAmBtB,SAAnB,CAA6BhB,IAA9B,IAAqCc,KAAK,CAACwB,YAxBxC,KAbE;EAuCPC,OAAO,EAAE;IACPC,SAAS,EAAE,IADJ;IAEPC,OAAO,EAAG,OAAOC,QAAP,KAAqB,WAArB,IACAA,QAAQ,CAACC,oBAAT,CAA8B,MAA9B,EAAsCC,MAAtC,KAAiD,CADlD,GAEC,EAFD,GAEMC,MAAM,CAACH,QAAQ,CAACI,QAAV,CAAN,CAA0BC,OAA1B,CAAkC,MAAlC,EAA0C,EAA1C;EAJR,CAvCF;EA6CPC,IAAI,EAAE;IACJC,IAAI,EAAEC;EADF,CA7CC;EAgDPC,cAAc,EAAE,CAAC,CAAChE,eAAD,EAAkB,CAAC,CAAnB,CAAD;AAhDT,CADqC,CAAnC","names":["require","SymbolMap_js_1","Other","parser","char","font","stack","env","def","mathvariant","remap","MapHandler_js_1","getMap","lookup","range","type","mo","create","attributes","set","NodeUtil_js_1","setProperty","configuration","addNode","Push","exports","csUndefined","_parser","name","TexError_js_1","envUndefined","filterNonscript","_a","data","getList","_d","mml","get","parent_1","parent","childNodes","splice","childIndex","removeFromList","kind","isKind","mstyle","replaceChild","__extends","Tags_js_1","Configuration_js_1","handler","character","delimiter","macro","environment","fallback","items","bitem","StartItem","prototype","StopItem","OpenItem","CloseItem","PrimeItem","SubsupItem","OverItem","LeftItem","Middle","RightItem","BeginItem","EndItem","StyleItem","PositionItem","CellItem","MmlItem","FnItem","NotItem","NonscriptItem","DotsItem","ArrayItem","EqnArrayItem","EquationItem","options","maxMacros","baseURL","document","getElementsByTagName","length","String","location","replace","tags","base","BaseTags","postprocessors"],"sourceRoot":"","sources":["../../../../ts/input/tex/base/BaseConfiguration.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}