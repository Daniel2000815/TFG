{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.add = void 0;\n\nvar Symbol_1 = require(\"../../../Types/Symbol\");\n\nvar Errors_1 = require(\"../../../Core/Errors\");\n\nvar Settings_1 = require(\"../../../Settings\");\n\nvar Groups_1 = require(\"../../../Types/Groups\");\n\nvar Text_1 = require(\"../../../Core/Text\");\n\nvar Utils_1 = require(\"../../../Core/Utils\");\n\nvar Matrix_1 = require(\"../../../Types/Matrix\");\n\nvar index_1 = require(\"../index\");\n/**\n * Adds two symbols\n * @param {Symbol} a\n * @param {Symbol} b\n * @returns {Symbol}\n */\n\n\nfunction add(a, b) {\n  var aIsSymbol = (0, Utils_1.isSymbol)(a),\n      bIsSymbol = (0, Utils_1.isSymbol)(b); //we're dealing with two symbols\n\n  if (aIsSymbol && bIsSymbol) {\n    //forward the adding of symbols with units to the Unit module\n    if (a.unit || b.unit) {\n      return deps.Unit.add(a, b);\n    } //handle Infinity\n    //https://www.encyclopediaofmath.org/index.php/Infinity\n\n\n    if (a.isInfinity || b.isInfinity) {\n      var aneg = a.multiplier.lessThan(0),\n          bneg = b.multiplier.lessThan(0);\n\n      if (a.isInfinity && b.isInfinity && aneg !== bneg) {\n        throw new Errors_1.UndefinedError('(' + a + ')+(' + b + ') is not defined!');\n      }\n\n      var inf = Symbol_1.Symbol.infinity();\n      if (bneg) inf.negate();\n      return inf;\n    }\n\n    if (a.isComposite() && a.isLinear() && b.isComposite() && b.isLinear()) {\n      a.distributeMultiplier();\n      b.distributeMultiplier(); // Fix for issue #606\n\n      if (b.length > a.length && a.group === b.group) {\n        var _ref = [b, a];\n        a = _ref[0];\n        b = _ref[1];\n      }\n    } //no need to waste time on zeroes\n\n\n    if (a.multiplier.equals(0)) return b;\n    if (b.multiplier.equals(0)) return a;\n\n    if (a.isConstant() && b.isConstant() && Settings_1.Settings.PARSE2NUMBER) {\n      var result = new Symbol_1.Symbol(a.multiplier.add(b.multiplier).toDecimal(Settings_1.Settings.PRECISION));\n      return result;\n    }\n\n    var g1 = a.group,\n        g2 = b.group,\n        ap = a.power.toString(),\n        bp = b.power.toString(); //always keep the greater group on the left.\n\n    if (g1 < g2 || g1 === g2 && ap > bp && bp > 0) {\n      return add(b, a);\n    }\n    /*note to self: Please don't forget about this dilemma ever again. In this model Groups.PL and Groups.CB goes crazy\n     * because it doesn't know which one to prioritize. */\n    //correction to Groups.PL dilemma\n\n\n    if (g1 === Groups_1.Groups.CB && g2 === Groups_1.Groups.PL && a.value === b.value) {\n      //swap\n      var t = a;\n      a = b;\n      b = t;\n      g1 = a.group;\n      g2 = b.group;\n      ap = a.power.toString();\n      bp = b.power.toString();\n    }\n\n    var powEQ = ap === bp,\n        v1 = a.value,\n        v2 = b.value,\n        aIsComposite = a.isComposite(),\n        bIsComposite = b.isComposite(),\n        h1,\n        h2,\n        result;\n    if (aIsComposite) h1 = (0, Text_1.text)(a, 'hash');\n    if (bIsComposite) h2 = (0, Text_1.text)(b, 'hash');\n\n    if (g1 === Groups_1.Groups.CP && g2 === Groups_1.Groups.CP && b.isLinear() && !a.isLinear() && h1 !== h2) {\n      return add(b, a);\n    } //Groups.PL & Groups.PL should compare hashes and not values e.g. compare x+x^2 with x+x^3 and not x with x\n\n\n    if (g1 === Groups_1.Groups.PL && g2 === Groups_1.Groups.PL) {\n      v1 = h1;\n      v2 = h2;\n    }\n\n    var PN = g1 === Groups_1.Groups.P && g2 === Groups_1.Groups.N,\n        PNEQ = a.value === b.multiplier.toString(),\n        valEQ = v1 === v2 || h1 === h2 && h1 !== undefined || PN && PNEQ; //equal values, equal powers\n\n    if (valEQ && powEQ && g1 === g2) {\n      //make sure to convert Groups.N to something Groups.P can work with\n      if (PN) b = b.convert(Groups_1.Groups.P); //CL\n      //handle Groups.PL\n\n      if (g1 === Groups_1.Groups.PL && (g2 === Groups_1.Groups.S || g2 === Groups_1.Groups.P)) {\n        a.distributeMultiplier();\n        result = a.attach(b);\n      } else {\n        result = a; //CL\n\n        if (a.multiplier.isOne() && b.multiplier.isOne() && g1 === Groups_1.Groups.CP && a.isLinear() && b.isLinear()) {\n          for (var s in b.symbols) {\n            var x = b.symbols[s];\n            result.attach(x);\n          }\n        } else result.multiplier = result.multiplier.add(b.multiplier);\n      }\n    } //equal values uneven powers\n    else if (valEQ && g1 !== Groups_1.Groups.PL) {\n      //break the tie for e.g. (x+1)+((x+1)^2+(x+1)^3)\n      if (g1 === Groups_1.Groups.CP && g2 === Groups_1.Groups.PL) {\n        b.insert(a, 'add');\n        result = b;\n      } else {\n        result = Symbol_1.Symbol.shell(Groups_1.Groups.PL).attach([a, b]); //update the hash\n\n        result.value = g1 === Groups_1.Groups.PL ? h1 : v1;\n      }\n    } else if (aIsComposite && a.isLinear()) {\n      var canIterate = g1 === g2,\n          bothPL = g1 === Groups_1.Groups.PL && g2 === Groups_1.Groups.PL; //we can only iterate group Groups.PL if they values match\n\n      if (bothPL) canIterate = a.value === b.value; //distribute the multiplier over the entire symbol\n\n      a.distributeMultiplier();\n\n      if (b.isComposite() && b.isLinear() && canIterate) {\n        b.distributeMultiplier(); //CL\n\n        for (var s in b.symbols) {\n          var x = b.symbols[s];\n          a.attach(x);\n        }\n\n        result = a;\n      } //handle cases like 2*(x+x^2)^2+2*(x+x^2)^3+4*(x+x^2)^2\n      else if (bothPL && a.value !== h2 || g1 === Groups_1.Groups.PL && !valEQ) {\n        result = Symbol_1.Symbol.shell(Groups_1.Groups.CP).attach([a, b]);\n        result.updateHash();\n      } else {\n        result = a.attach(b);\n      }\n    } else {\n      if (g1 === Groups_1.Groups.FN && a.fname === Settings_1.Settings.SQRT && g2 !== Groups_1.Groups.EX && b.power.equals(0.5)) {\n        var m = b.multiplier.clone();\n        b = (0, index_1.sqrt)(b.toUnitMultiplier().toLinear());\n        b.multiplier = m;\n      } //fix for issue #3 and #159\n\n\n      if (a.length === 2 && b.length === 2 && (0, Utils_1.even)(a.power) && (0, Utils_1.even)(b.power)) {\n        result = add((0, index_1.expand)(a), (0, index_1.expand)(b));\n      } else {\n        result = Symbol_1.Symbol.shell(Groups_1.Groups.CP).attach([a, b]);\n        result.updateHash();\n      }\n    }\n\n    if (result.multiplier.equals(0)) result = new Symbol_1.Symbol(0); //make sure to remove unnecessary wraps\n\n    if (result.length === 1) {\n      var m = result.multiplier;\n      result = (0, Utils_1.firstObject)(result.symbols);\n      result.multiplier = result.multiplier.multiply(m);\n    }\n\n    return result;\n  } else {\n    //keep symbols to the right\n    if (bIsSymbol && !aIsSymbol) {\n      var t = a;\n      a = b;\n      b = t; //swap\n\n      t = bIsSymbol;\n      bIsSymbol = aIsSymbol;\n      aIsSymbol = t;\n    }\n\n    var bIsMatrix = (0, Utils_1.isMatrix)(b);\n\n    if (aIsSymbol && bIsMatrix) {\n      var M = new Matrix_1.Matrix();\n      b.eachElement(function (e, i, j) {\n        M.set(i, j, add(a.clone(), e));\n      });\n      b = M;\n    } else {\n      if ((0, Utils_1.isMatrix)(a) && bIsMatrix) {\n        b = a.add(b);\n      } else if (aIsSymbol && (0, Utils_1.isVector)(b)) {\n        b.each(function (x, i) {\n          i--;\n          b.elements[i] = add(a.clone(), b.elements[i]);\n        });\n      } else {\n        if ((0, Utils_1.isVector)(a) && (0, Utils_1.isVector)(b)) {\n          b.each(function (x, i) {\n            i--;\n            b.elements[i] = add(a.elements[i], b.elements[i]);\n          });\n        } else if ((0, Utils_1.isVector)(a) && (0, Utils_1.isMatrix)(b)) {\n          //try to convert a to a matrix\n          return add(b, a);\n        } else if ((0, Utils_1.isMatrix)(a) && (0, Utils_1.isVector)(b)) {\n          if (b.elements.length === a.rows()) {\n            var M = new Matrix_1.Matrix(),\n                l = a.cols();\n            b.each(function (e, i) {\n              var row = [];\n\n              for (var j = 0; j < l; j++) {\n                row.push(add(a.elements[i - 1][j].clone(), e.clone()));\n              }\n\n              M.elements.push(row);\n            });\n            return M;\n          } else (0, Errors_1.err)('Dimensions must match!');\n        }\n      }\n    }\n\n    return b;\n  }\n}\n\nexports.add = add;","map":{"version":3,"mappings":"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","names":["add","a","b","aIsSymbol","bIsSymbol","unit","deps","Unit","isInfinity","aneg","multiplier","lessThan","bneg","Errors_1","inf","Symbol_1","infinity","negate","isComposite","isLinear","distributeMultiplier","length","group","equals","isConstant","Settings_1","PARSE2NUMBER","result","toDecimal","PRECISION","g1","g2","ap","power","toString","bp","Groups_1","CB","PL","value","t","powEQ","v1","v2","aIsComposite","bIsComposite","h1","h2","CP","PN","P","N","PNEQ","valEQ","undefined","convert","S","attach","isOne","s","symbols","x","insert","shell","canIterate","bothPL","updateHash","FN","fname","SQRT","EX","m","clone","toUnitMultiplier","toLinear","multiply","bIsMatrix","M","Matrix_1","eachElement","e","i","j","set","each","elements","rows","l","cols","row","push","exports"],"sourceRoot":"","sources":["../../../../src/Functions/Core/operations/add.js"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}