{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { compareDependencies } from \"mathjs\";\nimport nerdamer from \"nerdamer\";\n\nvar Polynomial = /*#__PURE__*/function () {\n  function Polynomial(p) {\n    _classCallCheck(this, Polynomial);\n\n    this.pol = \"0\";\n    this.lc = \"0\";\n    this.coefMap = {};\n    this.varOrder = [];\n\n    try {\n      this.pol = nerdamer(p).expand().toString();\n    } catch (e) {\n      console.log(\"ERROR PARSING POLYNOMIAL \".concat(p));\n    }\n\n    this.computeCoefficients(nerdamer.tree(this.pol));\n    console.log(this.coefMap);\n  }\n\n  _createClass(Polynomial, [{\n    key: \"multiply\",\n    value: function multiply(q) {\n      var product = \"\";\n\n      for (var keyP in this.coefMap) {\n        for (var keyQ in q.coefMap) {\n          console.log(\"(\".concat(this.coefMap[keyP], \"*\").concat(keyP, \") * (\").concat(q.coefMap[keyQ], \"*\").concat(keyQ, \")\"));\n          product += \"\".concat(product.length > 0 ? '+' : '', \" (\").concat(this.coefMap[keyP], \"*\").concat(keyP, \") * (\").concat(q.coefMap[keyQ], \"*\").concat(keyQ, \")\");\n        }\n      }\n\n      this.p = nerdamer(product).expand().toString();\n      console.log(\"PRODUCT;\");\n      console.log(this.p);\n    }\n  }, {\n    key: \"strContainsChar\",\n    value: function strContainsChar(str, chars) {\n      console.log(\"COMPROBANDO \" + str);\n\n      for (var i = 0; i < str.length; i++) {\n        if (chars.includes(str[i])) return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"expGreater\",\n    value: function expGreater(a, b) {\n      return a[0] > b[0] || a[0] == b[0] && a[1] > b[1] || a[0] == b[0] && a[1] == b[1] && a[2] > a[2];\n    }\n  }, {\n    key: \"computeCoefficients\",\n    value: function computeCoefficients(node) {\n      var pol = this.nodeToString(node);\n      var vars = ['x', 'y', 'z'];\n      if (node === null || node === undefined) return;\n\n      if (!node.left && !node.right) {\n        if (['x', 'y', 'z'].includes(node.value)) this.coefMap[node.value] = \"1\";else this.coefMap[\"1\"] = pol;\n        return;\n      }\n\n      console.log(pol);\n\n      if (!this.strContainsChar(pol, vars)) {\n        console.log(\"AÃ‘ADO \" + pol);\n        this.coefMap[\"1\"] = pol;\n        return;\n      }\n\n      console.log(pol);\n      var pattern = /[+-]/;\n\n      if (!pattern.test(pol) && pol !== '') {\n        // const coef = this.nodeToString(node.left);\n        // const variable = this.nodeToString(node.right);\n        var coef = \"\";\n        var variable = \"\";\n        var writingCoef = true;\n\n        for (var i = 0; i < pol.length; i++) {\n          if (['x', 'y', 'z'].includes(pol[i])) {\n            writingCoef = false;\n            if (coef.length === 0) coef = \"1\";\n            console.log(\"HOLA:\" + coef[coef.length - 1]);\n            if (coef[coef.length - 1] === \"*\") coef = coef.slice(0, -1);\n          }\n\n          if (!['(', ')'].includes(pol[i])) {\n            if (writingCoef) coef += pol[i];else variable += pol[i];\n          }\n        }\n\n        this.coefMap[variable] = coef;\n        console.log(\"COEF: \".concat(coef, \", VAR: \").concat(variable));\n      } else {\n        this.computeCoefficients(node.left);\n        this.computeCoefficients(node.right);\n      }\n\n      if (node !== null && node !== undefined) {\n        if (node.type === 'OPERATOR' && node.value === \"*\") {\n          console.log(\"PRODUC\");\n          console.log(node.left);\n          console.log(node.right);\n        }\n      }\n\n      var monomials = Object.keys(this.coefMap);\n      var that = this;\n      monomials.sort(function (a, b) {\n        return that.expGreater(exp(a), exp(b)) ? -1 : 1;\n      });\n      this.varOrder = monomials;\n    }\n  }, {\n    key: \"toString\",\n    value: function toString() {\n      var res = \"\";\n      console.log(this.varOrder);\n      console.log(this.coefMap);\n\n      for (var i in this.varOrder) {\n        var mon = this.varOrder[i];\n        var coef = this.coefMap[mon];\n        var nextMon = i < this.varOrder.length - 1 ? this.varOrder[i + 1] : null;\n        var nextCoef = nextMon ? this.coefMap[nextMon] : '';\n        var coefNull = coef !== '1';\n        res += \"\".concat(coefNull ? coef : '', \" \").concat(coefNull ? '(' : '').concat(mon).concat(coefNull ? ')' : '', \" \").concat(i < this.varOrder.length - 1 && nextCoef[0] != '-' ? '+' : '', \" \");\n      }\n\n      return res;\n    }\n  }, {\n    key: \"nodeToString\",\n    value: function nodeToString(node) {\n      // console.log(node);\n      if (node !== null && node !== undefined) {\n        if (node.type === 'VARIABLE_OR_LITERAL') {\n          var isVariable = ['x', 'y', 'z'].includes(node.value); // console.log(\"ES LITERAL O VARIABLE: \" + node.value);\n          // console.log(node.value);\n\n          return isVariable ? node.value : parseFloat(node.value);\n        }\n\n        if (node.type === 'OPERATOR') {\n          var _node$left, _node$right;\n\n          var left = this.nodeToString(node.left);\n          var right = this.nodeToString(node.right); // console.log(\"ES OPERATOR: \" + node.value);\n          // console.log(\"OPERATOR LEFT: \" + left);\n          // console.log(\"OPERATOR RIGHT: \" + right);\n          // console.log(`DEVUELVO ${(right && left) ? `${left}${node.value}${right}` : `${node.value}${left}`}`);\n\n          var leftParenthesis = ((_node$left = node.left) === null || _node$left === void 0 ? void 0 : _node$left.type) !== \"VARIABLE_OR_LITERAL\";\n          var rightParenthesis = ((_node$right = node.right) === null || _node$right === void 0 ? void 0 : _node$right.type) !== \"VARIABLE_OR_LITERAL\"; // console.log(\"OPERATOR: \" + node.value);\n          // console.log(\"TYPEL: \" + node.left.type);\n          // console.log(\"TYPER: \" + node.right.type);\n          // console.log(`PAR.LEFT: ${leftParenthesis}, RIGHT. PAR: ${rightParenthesis}`);\n\n          var l = leftParenthesis ? \"(\".concat(left, \")\") : \"\".concat(left);\n          var r = rightParenthesis ? \"(\".concat(right, \")\") : \"\".concat(right);\n          console.log(\"RIGHT \" + r);\n          if (right && left) return \"\".concat(l).concat(node.value).concat(r);else return \"\".concat(node.value).concat(l);\n        }\n\n        if (node.type === 'FUNCTION') {\n          // console.log(\"ES F: \" + node.value);\n          var _left = this.nodeToString(node.left);\n\n          var _right = this.nodeToString(node.right); // console.log(`DEVUELVO ${left}${node.value}${right}`);\n\n\n          return \"\".concat(_left).concat(node.value).concat(_right);\n        }\n      }\n\n      return '';\n    }\n  }], [{\n    key: \"exp\",\n    value: function exp(p) {\n      var _this = this;\n\n      var split = p.split(/[-+]+/); // separa por + o -\n\n      var res = [0, 0, 0];\n      split.forEach(function (element) {\n        if (element === '') return;\n        var degs = [Number(nerdamer(\"deg(\".concat(element, \", x)\")).toString()), Number(nerdamer(\"deg(\".concat(element, \", y)\")).toString()), Number(nerdamer(\"deg(\".concat(element, \", z)\")).toString())];\n        if (_this.expGreater(degs, res)) res = degs;\n      });\n      return res;\n    }\n  }]);\n\n  return Polynomial;\n}();\n\nexport { Polynomial as default };","map":{"version":3,"names":["compareDependencies","nerdamer","Polynomial","p","pol","lc","coefMap","varOrder","expand","toString","e","console","log","computeCoefficients","tree","q","product","keyP","keyQ","length","str","chars","i","includes","a","b","node","nodeToString","vars","undefined","left","right","value","strContainsChar","pattern","test","coef","variable","writingCoef","slice","type","monomials","Object","keys","that","sort","expGreater","exp","res","mon","nextMon","nextCoef","coefNull","isVariable","parseFloat","leftParenthesis","rightParenthesis","l","r","split","forEach","element","degs","Number"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/Polynomial.js"],"sourcesContent":["import { compareDependencies } from \"mathjs\";\r\nimport nerdamer from \"nerdamer\";\r\n\r\nexport default class Polynomial {\r\n    pol = \"0\";\r\n    lc = \"0\";\r\n    coefMap = {};\r\n    varOrder = [];\r\n\r\n    constructor(p){\r\n        try{\r\n            this.pol = nerdamer(p).expand().toString();\r\n        }catch(e){\r\n            console.log(`ERROR PARSING POLYNOMIAL ${p}`);\r\n        }\r\n\r\n        this.computeCoefficients(nerdamer.tree(this.pol));\r\n\r\n        console.log(this.coefMap);\r\n\r\n    }\r\n\r\n    multiply(q){\r\n      let product= \"\";\r\n\r\n      for (let keyP in this.coefMap) {\r\n        for (let keyQ in q.coefMap) {\r\n          console.log(`(${this.coefMap[keyP]}*${keyP}) * (${q.coefMap[keyQ]}*${keyQ})`);\r\n          product += `${product.length>0 ? '+' : ''} (${this.coefMap[keyP]}*${keyP}) * (${q.coefMap[keyQ]}*${keyQ})`;\r\n        }\r\n      }\r\n\r\n      this.p = nerdamer(product).expand().toString();\r\n      console.log(\"PRODUCT;\");\r\n      console.log(this.p);\r\n    }\r\n\r\n    strContainsChar(str, chars){\r\n      console.log(\"COMPROBANDO \" + str);\r\n      for(let i=0; i<str.length; i++){\r\n        if(chars.includes(str[i]))\r\n          return true;\r\n      }\r\n\r\n      return false;\r\n    }\r\n\r\n    expGreater(a, b) {\r\n      return (\r\n        a[0] > b[0] ||\r\n        (a[0] == b[0] && a[1] > b[1]) ||\r\n        (a[0] == b[0] && a[1] == b[1] && a[2] > a[2])\r\n      );\r\n    }\r\n    \r\n    static exp(p) {\r\n      const split = p.split(/[-+]+/); // separa por + o -\r\n      let res = [0,0,0];\r\n    \r\n      split.forEach((element) => {\r\n        if (element === '') return;\r\n    \r\n        let degs = [\r\n          Number(nerdamer(`deg(${element}, x)`).toString()),\r\n          Number(nerdamer(`deg(${element}, y)`).toString()),\r\n          Number(nerdamer(`deg(${element}, z)`).toString()),\r\n        ];\r\n    \r\n        if (this.expGreater(degs, res)) res = degs;\r\n      });\r\n    \r\n      return res;\r\n    }\r\n\r\n\r\n    computeCoefficients(node){\r\n\r\n      const pol = this.nodeToString(node);\r\n      const vars = ['x', 'y', 'z'];\r\n\r\n      if(node===null || node===undefined)\r\n        return;\r\n\r\n      if(!node.left && !node.right){\r\n        if(['x','y','z'].includes(node.value))\r\n         this.coefMap[node.value] = \"1\";\r\n        else\r\n         this.coefMap[\"1\"] = pol;\r\n\r\n        return;\r\n      }\r\n\r\n      console.log(pol);\r\n      if(!this.strContainsChar(pol, vars)){\r\n        console.log(\"AÃ‘ADO \" + pol);\r\n       this.coefMap[\"1\"] = pol;\r\n        return;\r\n      }\r\n\r\n      console.log(pol);\r\n      var pattern = /[+-]/;\r\n\r\n      if(!pattern.test(pol) && pol!==''){\r\n        // const coef = this.nodeToString(node.left);\r\n        // const variable = this.nodeToString(node.right);\r\n\r\n        let coef = \"\";\r\n        let variable = \"\";\r\n        let writingCoef = true;\r\n\r\n        for(let i=0; i<pol.length; i++){\r\n          if(['x','y','z'].includes(pol[i])){\r\n            writingCoef = false;\r\n\r\n            if(coef.length === 0)\r\n              coef = \"1\";\r\n\r\n            console.log(\"HOLA:\" + coef[coef.length-1]);\r\n            if(coef[coef.length-1] === \"*\")\r\n              coef = coef.slice(0, -1);\r\n          }\r\n\r\n          \r\n          if(!['(', ')'].includes(pol[i])){\r\n            if(writingCoef) coef += pol[i];\r\n            else            variable += pol[i];\r\n          }\r\n        }\r\n\r\n       this.coefMap[variable] = coef;\r\n\r\n        console.log(`COEF: ${coef}, VAR: ${variable}`);\r\n      }\r\n      else{\r\n        this.computeCoefficients(node.left);\r\n        this.computeCoefficients(node.right);\r\n      }\r\n\r\n      if (node!==null && node!==undefined) {\r\n        if(node.type === 'OPERATOR' && node.value === \"*\"){\r\n          console.log(\"PRODUC\");\r\n          console.log(node.left);\r\n          console.log(node.right);\r\n        }\r\n      }\r\n\r\n      let monomials = Object.keys(this.coefMap);\r\n      var that = this;\r\n      monomials.sort(function(a,b){return that.expGreater(exp(a), exp(b)) ? -1 : 1});\r\n            \r\n      this.varOrder = monomials;\r\n    }\r\n\r\n    toString(){\r\n      let res = \"\";\r\n\r\n      console.log(this.varOrder);\r\n      console.log(this.coefMap);\r\n      for (let i in this.varOrder){\r\n        const mon = this.varOrder[i];\r\n        const coef = this.coefMap[mon];\r\n        const nextMon = i<this.varOrder.length-1 ? this.varOrder[i+1] : null;\r\n        const nextCoef = nextMon ? this.coefMap[nextMon] : '';\r\n        const coefNull = coef !== '1'\r\n        res += `${coefNull ? coef : ''} ${coefNull ? '(' : ''}${mon}${coefNull ? ')' : ''} ${(i<this.varOrder.length-1 && nextCoef[0] != '-') ? '+' : ''} `;\r\n      }\r\n\r\n      return res;\r\n    }\r\n\r\n    nodeToString(node) {\r\n        // console.log(node);\r\n        if (node!==null && node!==undefined) {\r\n\r\n          if (node.type === 'VARIABLE_OR_LITERAL') {\r\n            const isVariable = ['x', 'y', 'z'].includes(node.value);\r\n            // console.log(\"ES LITERAL O VARIABLE: \" + node.value);\r\n            // console.log(node.value);\r\n            return isVariable ? node.value : parseFloat(node.value);\r\n          }\r\n\r\n          if (node.type === 'OPERATOR') {\r\n            \r\n            let left = this.nodeToString(node.left);\r\n            let right = this.nodeToString(node.right);\r\n\r\n            // console.log(\"ES OPERATOR: \" + node.value);\r\n            // console.log(\"OPERATOR LEFT: \" + left);\r\n            // console.log(\"OPERATOR RIGHT: \" + right);\r\n            // console.log(`DEVUELVO ${(right && left) ? `${left}${node.value}${right}` : `${node.value}${left}`}`);\r\n\r\n            const leftParenthesis = node.left?.type!==\"VARIABLE_OR_LITERAL\";\r\n            const rightParenthesis = node.right?.type!==\"VARIABLE_OR_LITERAL\";\r\n\r\n            // console.log(\"OPERATOR: \" + node.value);\r\n            // console.log(\"TYPEL: \" + node.left.type);\r\n            // console.log(\"TYPER: \" + node.right.type);\r\n            // console.log(`PAR.LEFT: ${leftParenthesis}, RIGHT. PAR: ${rightParenthesis}`);\r\n            const l = leftParenthesis ? `(${left})` : `${left}`;\r\n            const r = rightParenthesis ? `(${right})` : `${right}`;\r\n            console.log(\"RIGHT \" + r);\r\n            if(right && left)   return `${l}${node.value}${r}`;\r\n            else                return `${node.value}${l}`;\r\n          }\r\n\r\n          if (node.type === 'FUNCTION') {\r\n            // console.log(\"ES F: \" + node.value);\r\n            let left = this.nodeToString(node.left);\r\n            let right = this.nodeToString(node.right);\r\n            \r\n            // console.log(`DEVUELVO ${left}${node.value}${right}`);\r\n            return `${left}${node.value}${right}`;\r\n            \r\n          }\r\n        }\r\n\r\n        return '';\r\n      };\r\n}"],"mappings":";;AAAA,SAASA,mBAAT,QAAoC,QAApC;AACA,OAAOC,QAAP,MAAqB,UAArB;;IAEqBC,U;EAMjB,oBAAYC,CAAZ,EAAc;IAAA;;IAAA,KALdC,GAKc,GALR,GAKQ;IAAA,KAJdC,EAIc,GAJT,GAIS;IAAA,KAHdC,OAGc,GAHJ,EAGI;IAAA,KAFdC,QAEc,GAFH,EAEG;;IACV,IAAG;MACC,KAAKH,GAAL,GAAWH,QAAQ,CAACE,CAAD,CAAR,CAAYK,MAAZ,GAAqBC,QAArB,EAAX;IACH,CAFD,CAEC,OAAMC,CAAN,EAAQ;MACLC,OAAO,CAACC,GAAR,oCAAwCT,CAAxC;IACH;;IAED,KAAKU,mBAAL,CAAyBZ,QAAQ,CAACa,IAAT,CAAc,KAAKV,GAAnB,CAAzB;IAEAO,OAAO,CAACC,GAAR,CAAY,KAAKN,OAAjB;EAEH;;;;WAED,kBAASS,CAAT,EAAW;MACT,IAAIC,OAAO,GAAE,EAAb;;MAEA,KAAK,IAAIC,IAAT,IAAiB,KAAKX,OAAtB,EAA+B;QAC7B,KAAK,IAAIY,IAAT,IAAiBH,CAAC,CAACT,OAAnB,EAA4B;UAC1BK,OAAO,CAACC,GAAR,YAAgB,KAAKN,OAAL,CAAaW,IAAb,CAAhB,cAAsCA,IAAtC,kBAAkDF,CAAC,CAACT,OAAF,CAAUY,IAAV,CAAlD,cAAqEA,IAArE;UACAF,OAAO,cAAOA,OAAO,CAACG,MAAR,GAAe,CAAf,GAAmB,GAAnB,GAAyB,EAAhC,eAAuC,KAAKb,OAAL,CAAaW,IAAb,CAAvC,cAA6DA,IAA7D,kBAAyEF,CAAC,CAACT,OAAF,CAAUY,IAAV,CAAzE,cAA4FA,IAA5F,MAAP;QACD;MACF;;MAED,KAAKf,CAAL,GAASF,QAAQ,CAACe,OAAD,CAAR,CAAkBR,MAAlB,GAA2BC,QAA3B,EAAT;MACAE,OAAO,CAACC,GAAR,CAAY,UAAZ;MACAD,OAAO,CAACC,GAAR,CAAY,KAAKT,CAAjB;IACD;;;WAED,yBAAgBiB,GAAhB,EAAqBC,KAArB,EAA2B;MACzBV,OAAO,CAACC,GAAR,CAAY,iBAAiBQ,GAA7B;;MACA,KAAI,IAAIE,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACF,GAAG,CAACD,MAAnB,EAA2BG,CAAC,EAA5B,EAA+B;QAC7B,IAAGD,KAAK,CAACE,QAAN,CAAeH,GAAG,CAACE,CAAD,CAAlB,CAAH,EACE,OAAO,IAAP;MACH;;MAED,OAAO,KAAP;IACD;;;WAED,oBAAWE,CAAX,EAAcC,CAAd,EAAiB;MACf,OACED,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CAAR,IACCD,CAAC,CAAC,CAAD,CAAD,IAAQC,CAAC,CAAC,CAAD,CAAT,IAAgBD,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CADzB,IAECD,CAAC,CAAC,CAAD,CAAD,IAAQC,CAAC,CAAC,CAAD,CAAT,IAAgBD,CAAC,CAAC,CAAD,CAAD,IAAQC,CAAC,CAAC,CAAD,CAAzB,IAAgCD,CAAC,CAAC,CAAD,CAAD,GAAOA,CAAC,CAAC,CAAD,CAH3C;IAKD;;;WAsBD,6BAAoBE,IAApB,EAAyB;MAEvB,IAAMtB,GAAG,GAAG,KAAKuB,YAAL,CAAkBD,IAAlB,CAAZ;MACA,IAAME,IAAI,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAb;MAEA,IAAGF,IAAI,KAAG,IAAP,IAAeA,IAAI,KAAGG,SAAzB,EACE;;MAEF,IAAG,CAACH,IAAI,CAACI,IAAN,IAAc,CAACJ,IAAI,CAACK,KAAvB,EAA6B;QAC3B,IAAG,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAcR,QAAd,CAAuBG,IAAI,CAACM,KAA5B,CAAH,EACC,KAAK1B,OAAL,CAAaoB,IAAI,CAACM,KAAlB,IAA2B,GAA3B,CADD,KAGC,KAAK1B,OAAL,CAAa,GAAb,IAAoBF,GAApB;QAED;MACD;;MAEDO,OAAO,CAACC,GAAR,CAAYR,GAAZ;;MACA,IAAG,CAAC,KAAK6B,eAAL,CAAqB7B,GAArB,EAA0BwB,IAA1B,CAAJ,EAAoC;QAClCjB,OAAO,CAACC,GAAR,CAAY,WAAWR,GAAvB;QACD,KAAKE,OAAL,CAAa,GAAb,IAAoBF,GAApB;QACC;MACD;;MAEDO,OAAO,CAACC,GAAR,CAAYR,GAAZ;MACA,IAAI8B,OAAO,GAAG,MAAd;;MAEA,IAAG,CAACA,OAAO,CAACC,IAAR,CAAa/B,GAAb,CAAD,IAAsBA,GAAG,KAAG,EAA/B,EAAkC;QAChC;QACA;QAEA,IAAIgC,IAAI,GAAG,EAAX;QACA,IAAIC,QAAQ,GAAG,EAAf;QACA,IAAIC,WAAW,GAAG,IAAlB;;QAEA,KAAI,IAAIhB,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAClB,GAAG,CAACe,MAAnB,EAA2BG,CAAC,EAA5B,EAA+B;UAC7B,IAAG,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAcC,QAAd,CAAuBnB,GAAG,CAACkB,CAAD,CAA1B,CAAH,EAAkC;YAChCgB,WAAW,GAAG,KAAd;YAEA,IAAGF,IAAI,CAACjB,MAAL,KAAgB,CAAnB,EACEiB,IAAI,GAAG,GAAP;YAEFzB,OAAO,CAACC,GAAR,CAAY,UAAUwB,IAAI,CAACA,IAAI,CAACjB,MAAL,GAAY,CAAb,CAA1B;YACA,IAAGiB,IAAI,CAACA,IAAI,CAACjB,MAAL,GAAY,CAAb,CAAJ,KAAwB,GAA3B,EACEiB,IAAI,GAAGA,IAAI,CAACG,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAP;UACH;;UAGD,IAAG,CAAC,CAAC,GAAD,EAAM,GAAN,EAAWhB,QAAX,CAAoBnB,GAAG,CAACkB,CAAD,CAAvB,CAAJ,EAAgC;YAC9B,IAAGgB,WAAH,EAAgBF,IAAI,IAAIhC,GAAG,CAACkB,CAAD,CAAX,CAAhB,KACgBe,QAAQ,IAAIjC,GAAG,CAACkB,CAAD,CAAf;UACjB;QACF;;QAEF,KAAKhB,OAAL,CAAa+B,QAAb,IAAyBD,IAAzB;QAECzB,OAAO,CAACC,GAAR,iBAAqBwB,IAArB,oBAAmCC,QAAnC;MACD,CA9BD,MA+BI;QACF,KAAKxB,mBAAL,CAAyBa,IAAI,CAACI,IAA9B;QACA,KAAKjB,mBAAL,CAAyBa,IAAI,CAACK,KAA9B;MACD;;MAED,IAAIL,IAAI,KAAG,IAAP,IAAeA,IAAI,KAAGG,SAA1B,EAAqC;QACnC,IAAGH,IAAI,CAACc,IAAL,KAAc,UAAd,IAA4Bd,IAAI,CAACM,KAAL,KAAe,GAA9C,EAAkD;UAChDrB,OAAO,CAACC,GAAR,CAAY,QAAZ;UACAD,OAAO,CAACC,GAAR,CAAYc,IAAI,CAACI,IAAjB;UACAnB,OAAO,CAACC,GAAR,CAAYc,IAAI,CAACK,KAAjB;QACD;MACF;;MAED,IAAIU,SAAS,GAAGC,MAAM,CAACC,IAAP,CAAY,KAAKrC,OAAjB,CAAhB;MACA,IAAIsC,IAAI,GAAG,IAAX;MACAH,SAAS,CAACI,IAAV,CAAe,UAASrB,CAAT,EAAWC,CAAX,EAAa;QAAC,OAAOmB,IAAI,CAACE,UAAL,CAAgBC,GAAG,CAACvB,CAAD,CAAnB,EAAwBuB,GAAG,CAACtB,CAAD,CAA3B,IAAkC,CAAC,CAAnC,GAAuC,CAA9C;MAAgD,CAA7E;MAEA,KAAKlB,QAAL,GAAgBkC,SAAhB;IACD;;;WAED,oBAAU;MACR,IAAIO,GAAG,GAAG,EAAV;MAEArC,OAAO,CAACC,GAAR,CAAY,KAAKL,QAAjB;MACAI,OAAO,CAACC,GAAR,CAAY,KAAKN,OAAjB;;MACA,KAAK,IAAIgB,CAAT,IAAc,KAAKf,QAAnB,EAA4B;QAC1B,IAAM0C,GAAG,GAAG,KAAK1C,QAAL,CAAce,CAAd,CAAZ;QACA,IAAMc,IAAI,GAAG,KAAK9B,OAAL,CAAa2C,GAAb,CAAb;QACA,IAAMC,OAAO,GAAG5B,CAAC,GAAC,KAAKf,QAAL,CAAcY,MAAd,GAAqB,CAAvB,GAA2B,KAAKZ,QAAL,CAAce,CAAC,GAAC,CAAhB,CAA3B,GAAgD,IAAhE;QACA,IAAM6B,QAAQ,GAAGD,OAAO,GAAG,KAAK5C,OAAL,CAAa4C,OAAb,CAAH,GAA2B,EAAnD;QACA,IAAME,QAAQ,GAAGhB,IAAI,KAAK,GAA1B;QACAY,GAAG,cAAOI,QAAQ,GAAGhB,IAAH,GAAU,EAAzB,cAA+BgB,QAAQ,GAAG,GAAH,GAAS,EAAhD,SAAqDH,GAArD,SAA2DG,QAAQ,GAAG,GAAH,GAAS,EAA5E,cAAmF9B,CAAC,GAAC,KAAKf,QAAL,CAAcY,MAAd,GAAqB,CAAvB,IAA4BgC,QAAQ,CAAC,CAAD,CAAR,IAAe,GAA5C,GAAmD,GAAnD,GAAyD,EAA3I,MAAH;MACD;;MAED,OAAOH,GAAP;IACD;;;WAED,sBAAatB,IAAb,EAAmB;MACf;MACA,IAAIA,IAAI,KAAG,IAAP,IAAeA,IAAI,KAAGG,SAA1B,EAAqC;QAEnC,IAAIH,IAAI,CAACc,IAAL,KAAc,qBAAlB,EAAyC;UACvC,IAAMa,UAAU,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB9B,QAAhB,CAAyBG,IAAI,CAACM,KAA9B,CAAnB,CADuC,CAEvC;UACA;;UACA,OAAOqB,UAAU,GAAG3B,IAAI,CAACM,KAAR,GAAgBsB,UAAU,CAAC5B,IAAI,CAACM,KAAN,CAA3C;QACD;;QAED,IAAIN,IAAI,CAACc,IAAL,KAAc,UAAlB,EAA8B;UAAA;;UAE5B,IAAIV,IAAI,GAAG,KAAKH,YAAL,CAAkBD,IAAI,CAACI,IAAvB,CAAX;UACA,IAAIC,KAAK,GAAG,KAAKJ,YAAL,CAAkBD,IAAI,CAACK,KAAvB,CAAZ,CAH4B,CAK5B;UACA;UACA;UACA;;UAEA,IAAMwB,eAAe,GAAG,eAAA7B,IAAI,CAACI,IAAL,0DAAWU,IAAX,MAAkB,qBAA1C;UACA,IAAMgB,gBAAgB,GAAG,gBAAA9B,IAAI,CAACK,KAAL,4DAAYS,IAAZ,MAAmB,qBAA5C,CAX4B,CAa5B;UACA;UACA;UACA;;UACA,IAAMiB,CAAC,GAAGF,eAAe,cAAOzB,IAAP,mBAAoBA,IAApB,CAAzB;UACA,IAAM4B,CAAC,GAAGF,gBAAgB,cAAOzB,KAAP,mBAAqBA,KAArB,CAA1B;UACApB,OAAO,CAACC,GAAR,CAAY,WAAW8C,CAAvB;UACA,IAAG3B,KAAK,IAAID,IAAZ,EAAoB,iBAAU2B,CAAV,SAAc/B,IAAI,CAACM,KAAnB,SAA2B0B,CAA3B,EAApB,KACoB,iBAAUhC,IAAI,CAACM,KAAf,SAAuByB,CAAvB;QACrB;;QAED,IAAI/B,IAAI,CAACc,IAAL,KAAc,UAAlB,EAA8B;UAC5B;UACA,IAAIV,KAAI,GAAG,KAAKH,YAAL,CAAkBD,IAAI,CAACI,IAAvB,CAAX;;UACA,IAAIC,MAAK,GAAG,KAAKJ,YAAL,CAAkBD,IAAI,CAACK,KAAvB,CAAZ,CAH4B,CAK5B;;;UACA,iBAAUD,KAAV,SAAiBJ,IAAI,CAACM,KAAtB,SAA8BD,MAA9B;QAED;MACF;;MAED,OAAO,EAAP;IACD;;;WAlKH,aAAW5B,CAAX,EAAc;MAAA;;MACZ,IAAMwD,KAAK,GAAGxD,CAAC,CAACwD,KAAF,CAAQ,OAAR,CAAd,CADY,CACoB;;MAChC,IAAIX,GAAG,GAAG,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,CAAV;MAEAW,KAAK,CAACC,OAAN,CAAc,UAACC,OAAD,EAAa;QACzB,IAAIA,OAAO,KAAK,EAAhB,EAAoB;QAEpB,IAAIC,IAAI,GAAG,CACTC,MAAM,CAAC9D,QAAQ,eAAQ4D,OAAR,UAAR,CAA+BpD,QAA/B,EAAD,CADG,EAETsD,MAAM,CAAC9D,QAAQ,eAAQ4D,OAAR,UAAR,CAA+BpD,QAA/B,EAAD,CAFG,EAGTsD,MAAM,CAAC9D,QAAQ,eAAQ4D,OAAR,UAAR,CAA+BpD,QAA/B,EAAD,CAHG,CAAX;QAMA,IAAI,KAAI,CAACqC,UAAL,CAAgBgB,IAAhB,EAAsBd,GAAtB,CAAJ,EAAgCA,GAAG,GAAGc,IAAN;MACjC,CAVD;MAYA,OAAOd,GAAP;IACD;;;;;;SArEgB9C,U"},"metadata":{},"sourceType":"module"}