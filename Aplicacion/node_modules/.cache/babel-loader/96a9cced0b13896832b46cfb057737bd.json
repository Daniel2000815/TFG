{"ast":null,"code":"import _toConsumableArray from\"G:\\\\gitlab\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"G:\\\\gitlab\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _slicedToArray from\"G:\\\\gitlab\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useRef}from\"react\";import Shader from\"../CustomComponents/Shader\";import{useTheme}from'@mui/material/styles';import{fs}from\"../ShaderStuff/fragmentShaderMovable\";import Dropdown from\"../CustomComponents/Dropdown\";import CustomHandle from\"./CustomHandle\";import GraphContext from\"../GraphContext.js\";import ToggleButton from\"../CustomComponents/ToggleButton\";export default function CustomNode(props){var _nodeStyle;var _React$useState=React.useState(true),_React$useState2=_slicedToArray(_React$useState,2),showMore=_React$useState2[0],setShowMore=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isHover=_React$useState4[0],setIsHover=_React$useState4[1];var sharedFunctions=useContext(GraphContext);var theme=useTheme();var width=200;var nodeStyle=(_nodeStyle={position:\"relative\",width:\"\".concat(width,\"px\"),display:\"flex\",flexDirection:\"column\",transition:\"border 300ms ease\",boxShadow:\"0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)\",borderRadius:\"0px 0px 0px 0px\",backgroundColor:\"#fff\"},_defineProperty(_nodeStyle,\"boxShadow\",isHover?\"0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)\":\"0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)\"),_defineProperty(_nodeStyle,\"border\",isHover?\"1px solid \".concat(theme.palette.primary.dark):\"1px solid \".concat(theme.palette.primary.main)),_defineProperty(_nodeStyle,\"&:hover\",{transition:\"box-shadow 200ms ease\",boxShadow:\"0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)\",border:\"1px solid \".concat(theme.palette.primary.dark)}),_nodeStyle);var headerStyle={height:showMore?\"20px\":\"40px\",width:\"\".concat(width,\"px\"),color:\"#EFF7FF\",borderRadius:\"5px 5px 0px 0px\",textAlign:\"center\",fontWeight:\"600\",fontSize:showMore?\"14px\":\"24px\",letterSpacing:\"0.1px\",justifyContent:\"flex-start\",backgroundColor:\"\".concat(theme.palette.primary.main)};var footerStyle={height:\"20px\",width:\"\".concat(width,\"px\"),color:\"#EFF7FF\",borderRadius:\"0px 0px 5px 5px\",backgroundColor:\"\".concat(theme.palette.primary.main)};var handleMouseEnter=function handleMouseEnter(){setIsHover(true);};var handleMouseLeave=function handleMouseLeave(){setIsHover(false);};useEffect(function(){console.log(\"SDF DE \".concat(props.id,\" MODIFICADO\"));sharedFunctions.updateNodeSdf(props.id,props.sdf);},[props.sdf]);useEffect(function(){var handleKeyDown=function handleKeyDown(e){if(e.key.toLowerCase()===\"s\")setShowMore(!showMore);};document.addEventListener('keydown',handleKeyDown);return function(){return document.removeEventListener('keydown',handleKeyDown);};},[showMore]);return/*#__PURE__*/React.createElement(\"div\",{tabIndex:\"0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"nodeHeader\",style:headerStyle},showMore?props.title:props.currOption),showMore?/*#__PURE__*/React.createElement(\"div\",{className:\"nodeBody\",onMouseEnter:handleMouseEnter,onMouseLeave:handleMouseLeave,style:nodeStyle},props.dropdownOptions?/*#__PURE__*/React.createElement(Dropdown,{defaultValue:props.dropdownOptions[0],onChange:props.onChangeOption,items:props.dropdownOptions,label:props.title}):null,showMore?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",null,\"ID: \".concat(props.id)),/*#__PURE__*/React.createElement(\"p\",null,\"CHILDREN:\",\" \",Object.keys(props.data.children).map(function(key){return\"\".concat(props.data.children[key]);}).join(\", \")),/*#__PURE__*/React.createElement(\"p\",null,\"SDF: \".concat(props.sdf)),props.body,/*#__PURE__*/React.createElement(Shader,{shader:fs(props.sdf),uniforms:{color:{type:\"3fv\",value:[1.0,1.0,0.0]}},style:{margin:\"10px\",height:\"100%\"}})):null):null,/*#__PURE__*/React.createElement(\"div\",{style:footerStyle},/*#__PURE__*/React.createElement(ToggleButton,{value:showMore,onClick:function onClick(){return setShowMore(!showMore);}})),_toConsumableArray(Array(props.nInputs)).map(function(e,i){return/*#__PURE__*/React.createElement(CustomHandle,{id:i,type:\"target\",style:{top:\"\".concat(50-(props.nInputs-1)/2*5+i*5,\"%\")}});}),/*#__PURE__*/React.createElement(CustomHandle,{id:\"2\",type:\"source\",onConnect:function onConnect(params){return console.log(\"handle onsConnect\",params);},style:{top:\"50%\"}}));}","map":{"version":3,"names":["React","useEffect","useContext","useRef","Shader","useTheme","fs","Dropdown","CustomHandle","GraphContext","ToggleButton","CustomNode","props","useState","showMore","setShowMore","isHover","setIsHover","sharedFunctions","theme","width","nodeStyle","position","display","flexDirection","transition","boxShadow","borderRadius","backgroundColor","palette","primary","dark","main","border","headerStyle","height","color","textAlign","fontWeight","fontSize","letterSpacing","justifyContent","footerStyle","handleMouseEnter","handleMouseLeave","console","log","id","updateNodeSdf","sdf","handleKeyDown","e","key","toLowerCase","document","addEventListener","removeEventListener","title","currOption","dropdownOptions","onChangeOption","Object","keys","data","children","map","join","body","type","value","margin","Array","nInputs","i","top","params"],"sources":["G:/gitlab/TFG/Aplicacion/src/CustomNodes/CustomNode.js"],"sourcesContent":["import React, { useEffect, useContext, useRef } from \"react\";\r\nimport Shader from \"../CustomComponents/Shader\";\r\nimport { useTheme } from '@mui/material/styles';\r\n\r\nimport { fs } from \"../ShaderStuff/fragmentShaderMovable\";\r\nimport Dropdown from \"../CustomComponents/Dropdown\";\r\nimport CustomHandle from \"./CustomHandle\";\r\nimport GraphContext from \"../GraphContext.js\";\r\nimport ToggleButton from \"../CustomComponents/ToggleButton\";\r\n\r\n\r\nexport default function CustomNode(props) {\r\n  const [showMore, setShowMore] = React.useState(true);\r\n  const [isHover, setIsHover] = React.useState(false);\r\n\r\n  const sharedFunctions = useContext(GraphContext);\r\n  const theme = useTheme();\r\n  const width = 200;\r\n\r\n  const nodeStyle = {\r\n    position: \"relative\",\r\n    width: `${width}px`,\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    transition: \"border 300ms ease\",\r\n    boxShadow: \"0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)\",\r\n    borderRadius: \"0px 0px 0px 0px\",\r\n    backgroundColor: \"#fff\",\r\n\r\n    boxShadow: isHover ?\r\n      \"0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)\" :\r\n      \"0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)\",\r\n\r\n    border: isHover ?\r\n      `1px solid ${theme.palette.primary.dark}` :\r\n      `1px solid ${theme.palette.primary.main}`,\r\n\r\n    \"&:hover\": {\r\n      transition: \"box-shadow 200ms ease\",\r\n      boxShadow: \"0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)\",\r\n      border: `1px solid ${theme.palette.primary.dark}`\r\n    },\r\n  }\r\n\r\n  const headerStyle = {\r\n    height: showMore ? \"20px\" : \"40px\",\r\n    width: `${width}px`,\r\n    color: \"#EFF7FF\",\r\n    borderRadius: \"5px 5px 0px 0px\",\r\n    textAlign: \"center\",\r\n    fontWeight: \"600\",\r\n    fontSize: showMore ? \"14px\" : \"24px\",\r\n    letterSpacing: \"0.1px\",\r\n    justifyContent: \"flex-start\",\r\n    backgroundColor: `${theme.palette.primary.main}`\r\n  }\r\n\r\n  const footerStyle = {\r\n    height: \"20px\",\r\n    width: `${width}px`,\r\n    color: \"#EFF7FF\",\r\n    borderRadius: \"0px 0px 5px 5px\",\r\n    backgroundColor: `${theme.palette.primary.main}`\r\n  }\r\n\r\n  const handleMouseEnter = () => {\r\n    setIsHover(true);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setIsHover(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(`SDF DE ${props.id} MODIFICADO`);\r\n    sharedFunctions.updateNodeSdf(props.id, props.sdf);\r\n  }, [props.sdf]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key.toLowerCase() === \"s\") setShowMore(!showMore);\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [showMore]);\r\n\r\n\r\n\r\n  return (\r\n    <div tabIndex=\"0\">\r\n      <div className=\"nodeHeader\" style={headerStyle}>\r\n        {showMore ? props.title : props.currOption}\r\n      </div>\r\n\r\n      {showMore ?\r\n        <div className=\"nodeBody\" onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave} style={nodeStyle}>\r\n\r\n\r\n          {props.dropdownOptions ? (\r\n            <Dropdown\r\n              defaultValue={props.dropdownOptions[0]}\r\n              onChange={props.onChangeOption}\r\n              items={props.dropdownOptions}\r\n              label={props.title}\r\n            />\r\n          ) : null}\r\n\r\n\r\n\r\n\r\n          {showMore ? (\r\n            <>\r\n              <p>{`ID: ${props.id}`}</p>\r\n              <p>\r\n                CHILDREN:{\" \"}\r\n                {Object.keys(props.data.children)\r\n                  .map((key) => `${props.data.children[key]}`)\r\n                  .join(\", \")}\r\n              </p>\r\n              <p>{`SDF: ${props.sdf}`}</p>\r\n\r\n\r\n\r\n              {props.body}\r\n              <Shader\r\n                shader={fs(props.sdf)}\r\n                uniforms={{\r\n                  color: { type: \"3fv\", value: [1.0, 1.0, 0.0] },\r\n\r\n                }}\r\n                style={{ margin: \"10px\", height: \"100%\" }}\r\n              />\r\n            </>\r\n          ) : null}\r\n\r\n\r\n\r\n\r\n        </div> : null}\r\n\r\n      <div style={footerStyle}>\r\n        <ToggleButton value={showMore} onClick={() => setShowMore(!showMore)} />\r\n      </div>\r\n\r\n      {[...Array(props.nInputs)].map((e, i) =>\r\n        <CustomHandle\r\n          id={i}\r\n          type=\"target\"\r\n          style={{ top: `${50 - ((props.nInputs - 1) / 2) * 5 + i * 5}%` }}\r\n        />\r\n      )\r\n      }\r\n\r\n      <CustomHandle\r\n        id={\"2\"}\r\n        type=\"source\"\r\n        onConnect={(params) => console.log(\"handle onsConnect\", params)}\r\n        style={{ top: \"50%\" }}\r\n\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}