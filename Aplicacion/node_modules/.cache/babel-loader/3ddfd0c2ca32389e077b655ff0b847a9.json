{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.FindMathML = void 0;\n\nvar FindMath_js_1 = require(\"../../core/FindMath.js\");\n\nvar NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nvar FindMathML = function (_super) {\n  __extends(FindMathML, _super);\n\n  function FindMathML() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  FindMathML.prototype.findMath = function (node) {\n    var set = new Set();\n    this.findMathNodes(node, set);\n    this.findMathPrefixed(node, set);\n    var html = this.adaptor.root(this.adaptor.document);\n\n    if (this.adaptor.kind(html) === 'html' && set.size === 0) {\n      this.findMathNS(node, set);\n    }\n\n    return this.processMath(set);\n  };\n\n  FindMathML.prototype.findMathNodes = function (node, set) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(this.adaptor.tags(node, 'math')), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var math = _c.value;\n        set.add(math);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  FindMathML.prototype.findMathPrefixed = function (node, set) {\n    var e_2, _a, e_3, _b;\n\n    var html = this.adaptor.root(this.adaptor.document);\n\n    try {\n      for (var _c = __values(this.adaptor.allAttributes(html)), _d = _c.next(); !_d.done; _d = _c.next()) {\n        var attr = _d.value;\n\n        if (attr.name.substr(0, 6) === 'xmlns:' && attr.value === NAMESPACE) {\n          var prefix = attr.name.substr(6);\n\n          try {\n            for (var _e = (e_3 = void 0, __values(this.adaptor.tags(node, prefix + ':math'))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var math = _f.value;\n              set.add(math);\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n  };\n\n  FindMathML.prototype.findMathNS = function (node, set) {\n    var e_4, _a;\n\n    try {\n      for (var _b = __values(this.adaptor.tags(node, 'math', NAMESPACE)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var math = _c.value;\n        set.add(math);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n  };\n\n  FindMathML.prototype.processMath = function (set) {\n    var e_5, _a;\n\n    var math = [];\n\n    try {\n      for (var _b = __values(Array.from(set)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var mml = _c.value;\n        var display = this.adaptor.getAttribute(mml, 'display') === 'block' || this.adaptor.getAttribute(mml, 'mode') === 'display';\n        var start = {\n          node: mml,\n          n: 0,\n          delim: ''\n        };\n        var end = {\n          node: mml,\n          n: 0,\n          delim: ''\n        };\n        math.push({\n          math: this.adaptor.outerHTML(mml),\n          start: start,\n          end: end,\n          display: display\n        });\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    return math;\n  };\n\n  FindMathML.OPTIONS = {};\n  return FindMathML;\n}(FindMath_js_1.AbstractFindMath);\n\nexports.FindMathML = FindMathML;","map":{"version":3,"mappings":"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","names":["NAMESPACE","__extends","FindMathML","node","set","Set","findMathNodes","findMathPrefixed","html","adaptor","root","document","kind","size","findMathNS","processMath","tags","_c","math","add","allAttributes","_d","attr","name","substr","value","prefix","_f","from","mml","display","getAttribute","start","n","delim","end","push","outerHTML","FindMath_js_1","exports"],"sourceRoot":"","sources":["../../../ts/input/mathml/FindMathML.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}