{"ast":null,"code":"import _createForOfIteratorHelper from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport _objectSpread from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\Graph.js\";\nimport React from \"react\";\nimport { useCallback, useEffect } from \"react\";\nimport ReactFlow, { addEdge, Background, useNodesState, useEdgesState, MarkerType } from \"react-flow-renderer\";\nimport PrimitiveNode from \"./PrimitiveNode.js\";\nimport BooleanNode from \"./BooleanNode.js\";\nimport ButtonEdge from \"./ButtonEdge\";\nimport ShaderNode from \"./ShaderNode.js\";\nimport TestNode from \"./TestNode.js\";\nimport \"./styles.css\";\nimport { GraphProvider } from \"./GraphContext.js\";\nvar nodeTypes = {\n  primitiveNode: PrimitiveNode,\n  booleanNode: BooleanNode\n};\nvar edgeTypes = {\n  buttonEdge: ButtonEdge\n};\nvar initialNodes = [{\n  id: \"prim-0\",\n  type: \"primitiveNode\",\n  position: {\n    x: -50,\n    y: -150\n  },\n  data: {\n    inputs: {},\n    sdf: \"\",\n    children: []\n  }\n}, {\n  id: \"prim-1\",\n  type: \"primitiveNode\",\n  position: {\n    x: -50,\n    y: 200\n  },\n  data: {\n    inputs: {},\n    sdf: \"\",\n    children: []\n  }\n}, {\n  id: \"prim-2\",\n  type: \"primitiveNode\",\n  position: {\n    x: -50,\n    y: 550\n  },\n  data: {\n    inputs: {},\n    sdf: \"\",\n    children: []\n  }\n}, {\n  id: \"node-1\",\n  type: \"booleanNode\",\n  position: {\n    x: 100,\n    y: 25\n  },\n  data: {\n    inputs: {},\n    sdf: \"\",\n    children: []\n  }\n}, {\n  id: \"node-2\",\n  type: \"booleanNode\",\n  position: {\n    x: 100,\n    y: 325\n  },\n  data: {\n    inputs: {},\n    sdf: \"\",\n    children: []\n  }\n}];\nvar initialEdges = [];\n\nvar onInit = function onInit(reactFlowInstance) {\n  return console.log(\"flow loaded:\", reactFlowInstance);\n};\n\nexport default function Graph() {\n  var _useNodesState = useNodesState(initialNodes),\n      _useNodesState2 = _slicedToArray(_useNodesState, 3),\n      nodes = _useNodesState2[0],\n      setNodes = _useNodesState2[1],\n      onNodesChange = _useNodesState2[2];\n\n  var _useEdgesState = useEdgesState([]),\n      _useEdgesState2 = _slicedToArray(_useEdgesState, 3),\n      edges = _useEdgesState2[0],\n      setEdges = _useEdgesState2[1],\n      onEdgesChange = _useEdgesState2[2];\n\n  var _React$useState = React.useState(3),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      id = _React$useState2[0],\n      setId = _React$useState2[1];\n\n  var updateNodeSdf = function updateNodeSdf(id, newSdf, parent) {\n    console.log(\"ACTUALIZADONDO SDF DE \" + id);\n\n    var nodesCopy = _toConsumableArray(nodes);\n\n    var parent = nodesCopy.find(function (node) {\n      return node.id === id;\n    });\n    parent.data = _objectSpread(_objectSpread({}, parent.data), {}, {\n      sdf: newSdf\n    });\n\n    var _iterator = _createForOfIteratorHelper(parent.data.children),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var child = _step.value;\n\n        var _iterator2 = _createForOfIteratorHelper(nodesCopy),\n            _step2;\n\n        try {\n          for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n            var node = _step2.value;\n\n            if (node.id === child) {\n              var newInputs = node.data.inputs;\n              newInputs[\"\".concat(id)] = newSdf;\n              node.data = _objectSpread(_objectSpread({}, node.data), {}, {\n                inputs: newInputs\n              });\n            }\n          }\n        } catch (err) {\n          _iterator2.e(err);\n        } finally {\n          _iterator2.f();\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    setNodes(nodesCopy);\n  };\n\n  var removeChild = function removeChild(parent, child) {\n    setNodes(function (nds) {\n      return nds.map(function (node) {\n        if (node.id === parent) {\n          console.log(\"ELIMINANDO HIJO \".concat(child, \" DE \").concat(parent));\n          var newChildren = node.data.children;\n          newChildren = newChildren.filter(function (c) {\n            return c.id != child;\n          });\n          node.data = _objectSpread(_objectSpread({}, node.data), {}, {\n            children: newChildren\n          });\n        }\n\n        if (node.id === child) {\n          console.log(\"ACTUALIZANDO \".concat(child));\n          var newInputs = node.data.inputs;\n          newInputs[\"\".concat(parent)] = \"\";\n          node.data = _objectSpread(_objectSpread({}, node.data), {}, {\n            inputs: newInputs\n          });\n        }\n\n        onNodesChange([node]);\n        return node;\n      });\n    });\n  };\n\n  var removeEdge = function removeEdge(edgeId) {\n    console.log(\"WDGES: \");\n    console.log(edges);\n    var edge = edges.find(function (e) {\n      return e.id === edgeId;\n    });\n    var newEdges = edges.filter(function (edge) {\n      console.log(edge.source);\n      return edge.id != edgeId;\n    });\n    setEdges(newEdges);\n    removeChild(edge.source, edge.target);\n  };\n\n  var sharedFunctions = {\n    updateNodeSdf: updateNodeSdf,\n    removeEdge: removeEdge\n  };\n\n  var onConnect = function onConnect(params) {\n    var sourceNode = nodes.find(function (n) {\n      return n.id === params.source;\n    }); // CREAMOS EDGE\n\n    setEdges(function (eds) {\n      return addEdge(_objectSpread(_objectSpread({}, params), {}, {\n        type: \"buttonEdge\",\n        animated: true,\n        markerEnd: {\n          type: MarkerType.Arrow,\n          color: \"#000\"\n        }\n      }), eds);\n    }); // AÃ‘ADIMOS HIJO AL PADRE\n\n    var newChildren = sourceNode.data.children;\n    newChildren.push(params.target);\n    setNodes(function (nds) {\n      return nds.map(function (node) {\n        if (node.id === params.source) {\n          console.log(\"A\\xD1ADIENDO HIJO \".concat(params.target, \" A \").concat(params.source)); // var newChildren = node.data.children;\n          // console.log(typeof newChildren);\n          // console.log(newChildren);\n          // newChildren.push(params.target);\n\n          console.log(newChildren);\n          node.data = _objectSpread(_objectSpread({}, node.data), {}, {\n            children: newChildren\n          });\n        }\n\n        if (node.id === params.target) {\n          console.log(\"INICIALIZANDO \".concat(params.source));\n          var newInputs = node.data.inputs;\n          newInputs[\"\".concat(params.source)] = sourceNode.data.sdf;\n          node.data = _objectSpread(_objectSpread({}, node.data), {}, {\n            inputs: newInputs\n          });\n        }\n\n        onNodesChange([node]);\n        return node;\n      });\n    }); // INICIAMOS HIJO\n  };\n\n  useEffect(function () {\n    console.log(\"NODOS ACTUALIZADOS\");\n    console.log(nodes);\n  }, [nodes]);\n  useEffect(function () {\n    console.log(\"NUEVO EDGE:\");\n    console.log(edges);\n  }, [edges]);\n\n  var newPrimitiveNode = function newPrimitiveNode() {\n    var xPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var yPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    setId(id + 1);\n    var nodeId = \"node-\".concat(id);\n    return {\n      id: nodeId,\n      type: \"primitiveNode\",\n      position: {\n        x: xPos,\n        y: yPos\n      },\n      data: {\n        inputs: {},\n        sdf: \"\",\n        children: []\n      }\n    };\n  };\n\n  var newBooleanNode = function newBooleanNode() {\n    var xPos = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var yPos = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    setId(id + 1);\n    return {\n      id: \"node-\".concat(id),\n      type: \"booleanNode\",\n      position: {\n        x: xPos,\n        y: yPos\n      },\n      data: {\n        inputs: {},\n        sdf: \"\",\n        children: []\n      }\n    };\n  };\n\n  var handleKey = function handleKey(e) {\n    // SPACE BAR\n    if (e.key.toLowerCase() === \"p\") {\n      var node = newPrimitiveNode();\n      nodes.push(node);\n      onNodesChange([node]); // Para actualizar\n    } else if (e.key.toLowerCase() === \"b\") {\n      var _node = newBooleanNode();\n\n      nodes.push(_node);\n      onNodesChange([_node]); // Para actualizar\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100vh\"\n    },\n    tabIndex: \"0\",\n    onKeyDown: handleKey,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(GraphProvider, {\n    value: sharedFunctions,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ReactFlow, {\n    nodes: nodes,\n    edges: edges,\n    onNodesChange: onNodesChange,\n    onEdgesChange: onEdgesChange,\n    onConnect: onConnect // onDisconnect={onDisconnect}\n    ,\n    nodeTypes: nodeTypes,\n    edgeTypes: edgeTypes,\n    onInit: onInit // onEdgeClick={(ev, edge) =>\n    //   setEdges(edges.filter((e) => e.id != edge.id))\n    // }\n    ,\n    snapToGrid: true,\n    fitView: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Background, {\n    color: \"#aaa\",\n    gap: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 11\n    }\n  }))));\n}","map":{"version":3,"names":["React","useCallback","useEffect","ReactFlow","addEdge","Background","useNodesState","useEdgesState","MarkerType","PrimitiveNode","BooleanNode","ButtonEdge","ShaderNode","TestNode","GraphProvider","nodeTypes","primitiveNode","booleanNode","edgeTypes","buttonEdge","initialNodes","id","type","position","x","y","data","inputs","sdf","children","initialEdges","onInit","reactFlowInstance","console","log","Graph","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","useState","setId","updateNodeSdf","newSdf","parent","nodesCopy","find","node","child","newInputs","removeChild","nds","map","newChildren","filter","c","removeEdge","edgeId","edge","e","newEdges","source","target","sharedFunctions","onConnect","params","sourceNode","n","eds","animated","markerEnd","Arrow","color","push","newPrimitiveNode","xPos","yPos","nodeId","newBooleanNode","handleKey","key","toLowerCase","height"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/Graph.js"],"sourcesContent":["import React from \"react\";\r\nimport { useCallback, useEffect } from \"react\";\r\nimport ReactFlow, {\r\n  addEdge,\r\n  Background,\r\n  useNodesState,\r\n  useEdgesState,\r\n  MarkerType,\r\n} from \"react-flow-renderer\";\r\nimport PrimitiveNode from \"./PrimitiveNode.js\";\r\nimport BooleanNode from \"./BooleanNode.js\";\r\nimport ButtonEdge from \"./ButtonEdge\";\r\nimport ShaderNode from \"./ShaderNode.js\";\r\nimport TestNode from \"./TestNode.js\";\r\n\r\nimport \"./styles.css\";\r\nimport { GraphProvider } from \"./GraphContext.js\";\r\n\r\nconst nodeTypes = { primitiveNode: PrimitiveNode, booleanNode: BooleanNode };\r\nconst edgeTypes = { buttonEdge: ButtonEdge };\r\n\r\nconst initialNodes = [\r\n  {\r\n    id: `prim-0`,\r\n    type: \"primitiveNode\",\r\n    position: { x: -50, y: -150 },\r\n    data: { inputs: {}, sdf: \"\", children: [] },\r\n  },\r\n  {\r\n    id: `prim-1`,\r\n    type: \"primitiveNode\",\r\n    position: { x: -50, y: 200 },\r\n    data: { inputs: {}, sdf: \"\", children: [] },\r\n  },\r\n  {\r\n    id: `prim-2`,\r\n    type: \"primitiveNode\",\r\n    position: { x: -50, y: 550 },\r\n    data: { inputs: {}, sdf: \"\", children: [] },\r\n  },\r\n  {\r\n    id: `node-1`,\r\n    type: \"booleanNode\",\r\n    position: { x: 100, y: 25 },\r\n    data: { inputs: {}, sdf: \"\", children: [] },\r\n  },\r\n  {\r\n    id: `node-2`,\r\n    type: \"booleanNode\",\r\n    position: { x: 100, y: 325 },\r\n    data: { inputs: {}, sdf: \"\", children: [] },\r\n  }\r\n];\r\n\r\nconst initialEdges = [];\r\n\r\nconst onInit = (reactFlowInstance) =>\r\n  console.log(\"flow loaded:\", reactFlowInstance);\r\n\r\nexport default function Graph() {\r\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\r\n  const [edges, setEdges, onEdgesChange] = useEdgesState([]);\r\n  const [id, setId] = React.useState(3);\r\n\r\n  const updateNodeSdf = (id, newSdf, parent) => {\r\n    console.log(\"ACTUALIZADONDO SDF DE \" + id);\r\n    var nodesCopy = [...nodes];\r\n    var parent = nodesCopy.find(node => node.id===id);\r\n    parent.data = {\r\n      ...parent.data,\r\n      sdf: newSdf,\r\n    };\r\n\r\n    for (var child of parent.data.children){\r\n      for (var node of nodesCopy){\r\n        if(node.id === child){\r\n          var newInputs = node.data.inputs;\r\n          newInputs[`${id}`] = newSdf;\r\n\r\n          node.data = {\r\n            ...node.data,\r\n            inputs: newInputs,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    setNodes(nodesCopy);\r\n\r\n  };\r\n\r\n  const removeChild = (parent, child) => {\r\n    setNodes((nds) =>\r\n      nds.map((node) => {\r\n        if (node.id === parent) {\r\n          console.log(`ELIMINANDO HIJO ${child} DE ${parent}`);\r\n\r\n          var newChildren = node.data.children;\r\n          newChildren = newChildren.filter(function (c) {\r\n            return c.id != child;\r\n          });\r\n\r\n          node.data = {\r\n            ...node.data,\r\n            children: newChildren,\r\n          };\r\n        }\r\n        if (node.id === child) {\r\n          console.log(`ACTUALIZANDO ${child}`);\r\n          var newInputs = node.data.inputs;\r\n          newInputs[`${parent}`] = \"\";\r\n          node.data = {\r\n            ...node.data,\r\n            inputs: newInputs,\r\n          };\r\n        }\r\n\r\n        onNodesChange([node]);\r\n        return node;\r\n      })\r\n    );\r\n  };\r\n\r\n  const removeEdge = (edgeId) => {\r\n      console.log(\"WDGES: \");\r\n    console.log(edges);\r\n     const edge = edges.find(e => e.id === edgeId);\r\n\r\n     var newEdges = edges.filter((edge) => {\r\n       console.log(edge.source);\r\n       return edge.id != edgeId;\r\n     });\r\n\r\n    setEdges(newEdges);\r\n     removeChild(edge.source, edge.target);\r\n  };\r\n\r\n  const sharedFunctions = {\r\n    updateNodeSdf,\r\n    removeEdge\r\n  };\r\n\r\n  const onConnect = (params) => {\r\n    const sourceNode = nodes.find((n) => n.id === params.source);\r\n\r\n    // CREAMOS EDGE\r\n    setEdges((eds) =>\r\n      addEdge(\r\n        {\r\n          ...params,\r\n          type: \"buttonEdge\",\r\n          animated: true,\r\n          markerEnd: { type: MarkerType.Arrow, color: \"#000\" },\r\n        },\r\n        eds\r\n      )\r\n    );\r\n\r\n    // AÃ‘ADIMOS HIJO AL PADRE\r\n    var newChildren = sourceNode.data.children;\r\n    newChildren.push(params.target);\r\n\r\n    setNodes((nds) =>\r\n      nds.map((node) => {\r\n        if (node.id === params.source) {\r\n          console.log(`AÃ‘ADIENDO HIJO ${params.target} A ${params.source}`);\r\n\r\n          // var newChildren = node.data.children;\r\n          // console.log(typeof newChildren);\r\n          // console.log(newChildren);\r\n          // newChildren.push(params.target);\r\n          console.log(newChildren);\r\n          node.data = {\r\n            ...node.data,\r\n            children: newChildren,\r\n          };\r\n        }\r\n        if (node.id === params.target) {\r\n          console.log(`INICIALIZANDO ${params.source}`);\r\n          var newInputs = node.data.inputs;\r\n          newInputs[`${params.source}`] = sourceNode.data.sdf;\r\n          node.data = {\r\n            ...node.data,\r\n            inputs: newInputs,\r\n          };\r\n        }\r\n\r\n        onNodesChange([node]);\r\n        return node;\r\n      })\r\n    );\r\n\r\n    // INICIAMOS HIJO\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"NODOS ACTUALIZADOS\");\r\n    console.log(nodes);\r\n  }, [nodes]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"NUEVO EDGE:\");\r\n    console.log(edges);\r\n  }, [edges]);\r\n\r\n  const newPrimitiveNode = (xPos = 0, yPos = 0) => {\r\n    setId(id + 1);\r\n    const nodeId = `node-${id}`;\r\n    return {\r\n      id: nodeId,\r\n      type: \"primitiveNode\",\r\n      position: { x: xPos, y: yPos },\r\n      data: {\r\n        inputs: {},\r\n        sdf: \"\",\r\n        children: [],\r\n      },\r\n    };\r\n  };\r\n\r\n  const newBooleanNode = (xPos = 0, yPos = 0) => {\r\n    setId(id + 1);\r\n    return {\r\n      id: `node-${id}`,\r\n      type: \"booleanNode\",\r\n      position: { x: xPos, y: yPos },\r\n      data: { inputs: {}, sdf: \"\", children: [] },\r\n    };\r\n  };\r\n\r\n  const handleKey = (e) => {\r\n    // SPACE BAR\r\n    if (e.key.toLowerCase() === \"p\") {\r\n      const node = newPrimitiveNode();\r\n      nodes.push(node);\r\n\r\n      onNodesChange([node]); // Para actualizar\r\n    } else if (e.key.toLowerCase() === \"b\") {\r\n      const node = newBooleanNode();\r\n      nodes.push(node);\r\n\r\n      onNodesChange([node]); // Para actualizar\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ height: \"100vh\" }} tabIndex=\"0\" onKeyDown={handleKey}>\r\n      <GraphProvider value={sharedFunctions}>\r\n        <ReactFlow\r\n          nodes={nodes}\r\n          edges={edges}\r\n          onNodesChange={onNodesChange}\r\n          onEdgesChange={onEdgesChange}\r\n          onConnect={onConnect}\r\n          // onDisconnect={onDisconnect}\r\n\r\n          nodeTypes={nodeTypes}\r\n          edgeTypes={edgeTypes}\r\n          onInit={onInit}\r\n          // onEdgeClick={(ev, edge) =>\r\n          //   setEdges(edges.filter((e) => e.id != edge.id))\r\n          // }\r\n          snapToGrid={true}\r\n          fitView\r\n        >\r\n          <Background color=\"#aaa\" gap={10} />\r\n        </ReactFlow>\r\n      </GraphProvider>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}