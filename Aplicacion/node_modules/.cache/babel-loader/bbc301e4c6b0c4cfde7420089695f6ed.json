{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\CustomNodes\\\\TransformNode.js\";\nimport React, { memo, useEffect } from \"react\";\nimport CustomNode from \"../CustomNodes/CustomNode\";\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\nimport Vector3Input from \"../CustomComponents/Vector3Input\";\nvar theme = createTheme({\n  palette: {\n    primary: {\n      light: '#ffd7a2',\n      main: '#ffbb62',\n      dark: '#fa9c21',\n      contrastText: 'white'\n    }\n  }\n});\nvar TransformOperations = {\n  Translate: \"Translate\",\n  Scale: \"Scale\",\n  Rotate: \"Rotate\"\n};\nfunction TransformNode(_ref) {\n  var data = _ref.data,\n    id = _ref.id;\n  var _React$useState = React.useState(TransformOperations.Translate),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    operation = _React$useState2[0],\n    setOperation = _React$useState2[1];\n  var _React$useState3 = React.useState(\"\"),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    sdf = _React$useState4[0],\n    setSdf = _React$useState4[1];\n  var _React$useState5 = React.useState([0, 0, 0]),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    transformVal = _React$useState6[0],\n    setTransformVal = _React$useState6[1];\n  useEffect(function () {\n    console.log(\"SE HAN MODIFICADO LOS SDF EN NODO TRANSFORM \".concat(id, \". AHORA HAY \").concat(Object.keys(data.inputs).length));\n    var input = data.inputs[Object.keys(data.inputs)[0]];\n    if (input) {\n      if (operation !== TransformOperations.Scale) setSdf(input.replace(\"p,\", \"sdf\".concat(operation, \"(p, vec3(\").concat(transformVal[0], \",\").concat(transformVal[1], \",\").concat(transformVal[2], \") ),\")));else {\n        var s = \"vec3(\".concat(transformVal[0], \",\").concat(transformVal[1], \",\").concat(transformVal[2], \")\");\n        setSdf(input.replace(\"p,\", \"(p/\".concat(s, \") * \").concat(s, \",\")));\n      }\n    }\n  }, [data, operation, transformVal]);\n  return /*#__PURE__*/React.createElement(ThemeProvider, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(CustomNode, {\n    title: \"Transform\",\n    id: id,\n    data: data,\n    dropdownOptions: Object.values(TransformOperations),\n    onChangeOption: setOperation,\n    sdf: sdf,\n    currOption: operation,\n    body: /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: 10\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, \"Amount\", /*#__PURE__*/React.createElement(Vector3Input, {\n      handleChange: setTransformVal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }));\n}\nexport default memo(TransformNode);","map":{"version":3,"names":["React","memo","useEffect","CustomNode","createTheme","ThemeProvider","Vector3Input","theme","palette","primary","light","main","dark","contrastText","TransformOperations","Translate","Scale","Rotate","TransformNode","data","id","useState","operation","setOperation","sdf","setSdf","transformVal","setTransformVal","console","log","Object","keys","inputs","length","input","replace","s","values","margin"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/CustomNodes/TransformNode.js"],"sourcesContent":["import React, {memo, useEffect } from \"react\";\r\nimport CustomNode from \"../CustomNodes/CustomNode\";\r\nimport { createTheme, ThemeProvider } from '@mui/material/styles';\r\nimport Vector3Input from \"../CustomComponents/Vector3Input\";\r\n\r\nconst theme = createTheme({\r\n  palette: {\r\n    primary: {\r\n      light: '#ffd7a2',\r\n      main: '#ffbb62',\r\n      dark: '#fa9c21',\r\n      contrastText: 'white',\r\n    },\r\n  },\r\n});\r\n\r\nconst TransformOperations = {\r\n  Translate: \"Translate\",\r\n  Scale: \"Scale\",\r\n  Rotate: \"Rotate\"\r\n};\r\n\r\nfunction TransformNode({ data, id }) {\r\n  const [operation, setOperation] = React.useState(TransformOperations.Translate);\r\n  const [sdf, setSdf] = React.useState(\"\");\r\n  const [transformVal, setTransformVal] = React.useState([0,0,0]);\r\n\r\n  useEffect(() => {\r\n    console.log(\r\n      `SE HAN MODIFICADO LOS SDF EN NODO TRANSFORM ${id}. AHORA HAY ${Object.keys(data.inputs).length\r\n      }`\r\n    );\r\n\r\n    let input = data.inputs[Object.keys(data.inputs)[0]];\r\n\r\n    if (input) {\r\n      if(operation !== TransformOperations.Scale)\r\n        setSdf(input.replace(\"p,\", `sdf${operation}(p, vec3(${transformVal[0]},${transformVal[1]},${transformVal[2]}) ),`));\r\n      else{\r\n        const s = `vec3(${transformVal[0]},${transformVal[1]},${transformVal[2]})`;\r\n        setSdf(input.replace(\"p,\", `(p/${s}) * ${s},`));\r\n      }\r\n\r\n    }\r\n\r\n  }, [data, operation, transformVal]);\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CustomNode\r\n        title={\"Transform\"}\r\n        id={id}\r\n        data={data}\r\n        dropdownOptions={Object.values(TransformOperations)}\r\n        onChangeOption={setOperation}\r\n        sdf={sdf}\r\n        currOption={operation}\r\n        body={\r\n          <div style={{ margin: 10 }}>\r\n            Amount\r\n            <Vector3Input handleChange={setTransformVal}/>\r\n          </div>\r\n        }\r\n      />\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\nexport default memo(TransformNode);"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,IAAI,EAAEC,SAAS,QAAQ,OAAO;AAC7C,OAAOC,UAAU,MAAM,2BAA2B;AAClD,SAASC,WAAW,EAAEC,aAAa,QAAQ,sBAAsB;AACjE,OAAOC,YAAY,MAAM,kCAAkC;AAE3D,IAAMC,KAAK,GAAGH,WAAW,CAAC;EACxBI,OAAO,EAAE;IACPC,OAAO,EAAE;MACPC,KAAK,EAAE,SAAS;MAChBC,IAAI,EAAE,SAAS;MACfC,IAAI,EAAE,SAAS;MACfC,YAAY,EAAE;IAChB;EACF;AACF,CAAC,CAAC;AAEF,IAAMC,mBAAmB,GAAG;EAC1BC,SAAS,EAAE,WAAW;EACtBC,KAAK,EAAE,OAAO;EACdC,MAAM,EAAE;AACV,CAAC;AAED,SAASC,aAAa,OAAe;EAAA,IAAZC,IAAI,QAAJA,IAAI;IAAEC,EAAE,QAAFA,EAAE;EAC/B,sBAAkCpB,KAAK,CAACqB,QAAQ,CAACP,mBAAmB,CAACC,SAAS,CAAC;IAAA;IAAxEO,SAAS;IAAEC,YAAY;EAC9B,uBAAsBvB,KAAK,CAACqB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAAjCG,GAAG;IAAEC,MAAM;EAClB,uBAAwCzB,KAAK,CAACqB,QAAQ,CAAC,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;IAAA;IAAxDK,YAAY;IAAEC,eAAe;EAEpCzB,SAAS,CAAC,YAAM;IACd0B,OAAO,CAACC,GAAG,uDACsCT,EAAE,yBAAeU,MAAM,CAACC,IAAI,CAACZ,IAAI,CAACa,MAAM,CAAC,CAACC,MAAM,EAEhG;IAED,IAAIC,KAAK,GAAGf,IAAI,CAACa,MAAM,CAACF,MAAM,CAACC,IAAI,CAACZ,IAAI,CAACa,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;IAEpD,IAAIE,KAAK,EAAE;MACT,IAAGZ,SAAS,KAAKR,mBAAmB,CAACE,KAAK,EACxCS,MAAM,CAACS,KAAK,CAACC,OAAO,CAAC,IAAI,eAAQb,SAAS,sBAAYI,YAAY,CAAC,CAAC,CAAC,cAAIA,YAAY,CAAC,CAAC,CAAC,cAAIA,YAAY,CAAC,CAAC,CAAC,UAAO,CAAC,CAAC,KAClH;QACF,IAAMU,CAAC,kBAAWV,YAAY,CAAC,CAAC,CAAC,cAAIA,YAAY,CAAC,CAAC,CAAC,cAAIA,YAAY,CAAC,CAAC,CAAC,MAAG;QAC1ED,MAAM,CAACS,KAAK,CAACC,OAAO,CAAC,IAAI,eAAQC,CAAC,iBAAOA,CAAC,OAAI,CAAC;MACjD;IAEF;EAEF,CAAC,EAAE,CAACjB,IAAI,EAAEG,SAAS,EAAEI,YAAY,CAAC,CAAC;EAEnC,oBACE,oBAAC,aAAa;IAAC,KAAK,EAAEnB,KAAM;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBAC1B,oBAAC,UAAU;IACT,KAAK,EAAE,WAAY;IACnB,EAAE,EAAEa,EAAG;IACP,IAAI,EAAED,IAAK;IACX,eAAe,EAAEW,MAAM,CAACO,MAAM,CAACvB,mBAAmB,CAAE;IACpD,cAAc,EAAES,YAAa;IAC7B,GAAG,EAAEC,GAAI;IACT,UAAU,EAAEF,SAAU;IACtB,IAAI,eACF;MAAK,KAAK,EAAE;QAAEgB,MAAM,EAAE;MAAG,CAAE;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,0BAEzB,oBAAC,YAAY;MAAC,YAAY,EAAEX,eAAgB;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAE,CAEjD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EACD,CACY;AAEpB;AAEA,eAAe1B,IAAI,CAACiB,aAAa,CAAC"},"metadata":{},"sourceType":"module"}