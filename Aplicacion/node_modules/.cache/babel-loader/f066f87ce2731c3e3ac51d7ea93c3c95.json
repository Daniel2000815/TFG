{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\Graph.js\";\nimport React from \"react\";\nimport { useCallback, useEffect } from \"react\";\nimport ReactFlow, { addEdge, Background, useNodesState, useEdgesState } from \"react-flow-renderer\";\nimport ButtonEdge from './ButtonEdge.js';\nimport ShaderNode from \"./ShaderNode.js\";\nimport \"./styles.css\";\nvar initialNodes = [{\n  id: \"node-1\",\n  type: \"shaderNode\",\n  position: {\n    x: 0,\n    y: 0\n  },\n  data: {\n    value: 123\n  }\n}, {\n  id: \"node-2\",\n  type: \"shaderNode\",\n  position: {\n    x: 250,\n    y: 0\n  },\n  data: {\n    value: 1\n  }\n}, {\n  id: \"node-3\",\n  type: \"shaderNode\",\n  position: {\n    x: 250,\n    y: -300\n  },\n  data: {\n    value: 1\n  }\n}];\nvar initialEdges = [];\nvar nodeTypes = {\n  shaderNode: ShaderNode\n};\nvar edgeTypes = {\n  buttonEdge: ButtonEdge\n};\n\nvar onInit = function onInit(reactFlowInstance) {\n  return console.log('flow loaded:', reactFlowInstance);\n};\n\nexport default function Graph() {\n  var _useNodesState = useNodesState(initialNodes),\n      _useNodesState2 = _slicedToArray(_useNodesState, 3),\n      nodes = _useNodesState2[0],\n      setNodes = _useNodesState2[1],\n      onNodesChange = _useNodesState2[2];\n\n  var _useEdgesState = useEdgesState(initialEdges),\n      _useEdgesState2 = _slicedToArray(_useEdgesState, 3),\n      edges = _useEdgesState2[0],\n      setEdges = _useEdgesState2[1],\n      onEdgesChange = _useEdgesState2[2]; // no funciona: borra todos\n\n\n  var onRemoveEdge = function onRemoveEdge(id) {\n    var arr = edges;\n    console.log(\"INTENTAS BORRAR \" + id);\n    arr.find(function (obj) {\n      return obj.id === id;\n    });\n    var index = arr.indexOf(arr[0]);\n    console.log(index);\n\n    if (index > -1) {\n      console.log(\"ecnonrado\");\n      var edge = arr[index];\n      arr.splice(index, 1);\n      setEdges(arr);\n      onEdgesChange([edge]);\n    }\n  };\n\n  var onConnect = useCallback(function (params) {\n    return setEdges(function (eds) {\n      return addEdge(_objectSpread(_objectSpread({}, params), {}, {\n        animated: true,\n        markerEnd: {\n          type: 'arrow',\n          color: '#f00'\n        },\n        type: 'buttonEdge',\n        data: {\n          onRemoveEdge: onRemoveEdge\n        }\n      }), eds);\n    });\n  }, []);\n  useEffect(function () {\n    console.log(\"ASASA\");\n    console.log(edges);\n  }, [edges]);\n\n  var newNode = function newNode() {\n    return {\n      id: \"node-\".concat(nodes.length),\n      type: \"shaderNode\",\n      position: {\n        x: 0,\n        y: 0\n      },\n      data: {\n        value: 1\n      }\n    };\n  };\n\n  var handleKey = function handleKey(e) {\n    // SPACE BAR\n    if (e.key === \" \") {\n      var node = newNode();\n      nodes.push(node);\n      onNodesChange([node]); // Para actualizar\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"100vh\"\n    },\n    tabIndex: \"0\",\n    onKeyDown: handleKey,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ReactFlow, {\n    nodes: nodes,\n    edges: edges,\n    onNodesChange: onNodesChange,\n    onEdgesChange: onEdgesChange,\n    onConnect: onConnect // onDisconnect={onDisconnect}\n    ,\n    nodeTypes: nodeTypes,\n    edgeTypes: edgeTypes,\n    onInit: onInit,\n    snapToGrid: true,\n    fitView: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Background, {\n    color: \"#aaa\",\n    gap: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"names":["React","useCallback","useEffect","ReactFlow","addEdge","Background","useNodesState","useEdgesState","ButtonEdge","ShaderNode","initialNodes","id","type","position","x","y","data","value","initialEdges","nodeTypes","shaderNode","edgeTypes","buttonEdge","onInit","reactFlowInstance","console","log","Graph","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","onRemoveEdge","arr","find","obj","index","indexOf","edge","splice","onConnect","params","eds","animated","markerEnd","color","newNode","length","handleKey","e","key","node","push","height"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/Graph.js"],"sourcesContent":["import React from \"react\";\r\nimport { useCallback, useEffect } from \"react\";\r\nimport ReactFlow, {\r\n  addEdge,\r\n  Background,\r\n  useNodesState,\r\n  useEdgesState,\r\n} from \"react-flow-renderer\";\r\nimport ButtonEdge from './ButtonEdge.js';\r\nimport ShaderNode from \"./ShaderNode.js\";\r\n\r\nimport \"./styles.css\";\r\n\r\nconst initialNodes = [\r\n  {\r\n    id: \"node-1\",\r\n    type: \"shaderNode\",\r\n    position: { x: 0, y: 0 },\r\n    data: { value: 123 }\r\n  },\r\n  {\r\n    id: \"node-2\",\r\n    type: \"shaderNode\",\r\n    position: { x: 250, y: 0 },\r\n    data: { value: 1 }\r\n  },\r\n  {\r\n    id: \"node-3\",\r\n    type: \"shaderNode\",\r\n    position: { x: 250, y: -300},\r\n    data: { value: 1 }\r\n  }\r\n];\r\n\r\nconst initialEdges = [\r\n\r\n];\r\n\r\nconst nodeTypes = { shaderNode: ShaderNode };\r\nconst edgeTypes = { buttonEdge: ButtonEdge };\r\n\r\nconst onInit = (reactFlowInstance) => console.log('flow loaded:', reactFlowInstance);\r\n\r\nexport default function Graph() {\r\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\r\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\r\n\r\n  // no funciona: borra todos\r\n  const onRemoveEdge = (id) =>{\r\n    let arr = edges;\r\n    console.log(\"INTENTAS BORRAR \" + id);\r\n    \r\n    arr.find(obj => {\r\n      return obj.id === id;\r\n    })\r\n\r\n    var index = arr.indexOf(arr[0]);\r\n    console.log(index);\r\n    if (index > -1) {\r\n      console.log(\"ecnonrado\");\r\n      const edge = arr[index];\r\n      arr.splice(index, 1);\r\n      setEdges(arr);\r\n      onEdgesChange([edge]);\r\n    }\r\n  }\r\n\r\n  const onConnect = useCallback(\r\n    (params) => setEdges(\r\n      (eds) => addEdge(\r\n        { \r\n          ...params, \r\n          animated:true, \r\n          markerEnd: { type: 'arrow', color: '#f00' }, \r\n          type: 'buttonEdge', \r\n          data: {onRemoveEdge: onRemoveEdge} \r\n        }, \r\n        eds)\r\n      ),\r\n    []\r\n  );\r\n\r\n  useEffect(() => {\r\n    console.log(\"ASASA\");\r\n    console.log(edges);\r\n  }, [edges]);\r\n\r\n  const newNode = () =>{\r\n    return {\r\n      id: `node-${nodes.length}`,\r\n      type: \"shaderNode\",\r\n      position: { x: 0, y: 0 },\r\n      data: { value: 1 }\r\n    }\r\n  }\r\n\r\n  const handleKey= (e) => {\r\n    // SPACE BAR\r\n    if (e.key === \" \") {\r\n      const node = newNode();\r\n      nodes.push(node);\r\n\r\n      onNodesChange([node]);  // Para actualizar\r\n    }\r\n\r\n  };\r\n\r\n  return (\r\n    <div style={{height: \"100vh\"}} tabIndex=\"0\" onKeyDown={handleKey}>\r\n      <ReactFlow\r\n        nodes={nodes}\r\n        edges={edges}\r\n\r\n        onNodesChange={onNodesChange}\r\n        onEdgesChange={onEdgesChange}\r\n        onConnect={onConnect}\r\n        // onDisconnect={onDisconnect}\r\n\r\n        nodeTypes={nodeTypes}\r\n        edgeTypes={edgeTypes}\r\n\r\n        onInit={onInit}\r\n\r\n        snapToGrid={true}\r\n        fitView\r\n      >\r\n        <Background color=\"#aaa\" gap={10} />\r\n        </ReactFlow>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}