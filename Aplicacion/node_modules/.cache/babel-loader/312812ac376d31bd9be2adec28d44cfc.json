{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useContext}from\"react\";import Shader from\"./Shader.js\";import{fs}from\"./fragmentShader.js\";import{useEffect}from\"react\";import Button from\"@mui/material/Button\";import KeyboardArrowDownIcon from\"@mui/icons-material/KeyboardArrowDown\";import KeyboardArrowUpIcon from\"@mui/icons-material/KeyboardArrowUp\";import FloatInput from\"./FloatInput.js\";import Dropdown from\"./Dropdown\";import GraphContext from\"./GraphContext.js\";import CustomHandle from\"./CustomHandle.js\";var Primitives={Sphere:\"Sphere\",Box:\"Box\"};export default function PrimitiveNode(_ref){var data=_ref.data,id=_ref.id;var _React$useState=React.useState(Primitives.Sphere),_React$useState2=_slicedToArray(_React$useState,2),primitive=_React$useState2[0],setPrimitive=_React$useState2[1];var _React$useState3=React.useState(data.sdf),_React$useState4=_slicedToArray(_React$useState3,2),sdf=_React$useState4[0],setSdf=_React$useState4[1];var _React$useState5=React.useState(true),_React$useState6=_slicedToArray(_React$useState5,2),showCanvas=_React$useState6[0],setShowCanvas=_React$useState6[1];var _React$useState7=React.useState(1.0),_React$useState8=_slicedToArray(_React$useState7,2),input1=_React$useState8[0],setInput1=_React$useState8[1];var _React$useState9=React.useState(1.0),_React$useState10=_slicedToArray(_React$useState9,2),input2=_React$useState10[0],setInput2=_React$useState10[1];var _React$useState11=React.useState(1.0),_React$useState12=_slicedToArray(_React$useState11,2),input3=_React$useState12[0],setInput3=_React$useState12[1];var sharedFunctions=useContext(GraphContext);var handleChange=function handleChange(newPrimitive,newSdf){if(newPrimitive==Primitives.Sphere){console.log(\"YES\");}setPrimitive(newPrimitive);setSdf(newSdf);};useEffect(function(){},[data]);useEffect(function(){sharedFunctions.updateNodeSdf(id,sdf);},[sdf]);useEffect(function(){console.log(\"ACTUALIZADO SDF\");if(primitive==Primitives.Sphere){setSdf(\"sphere(p, \".concat(input1.toFixed(4),\")\"));}else if(primitive==Primitives.Box){setSdf(\"box(p, vec3(\".concat(input1.toFixed(4),\", \").concat(input2.toFixed(4),\", \").concat(input3.toFixed(4),\"))\"));}},[primitive,input1,input2,input3]);return/*#__PURE__*/React.createElement(\"div\",{className:\"custom-node\"},/*#__PURE__*/React.createElement(\"div\",{className:\"custom-node-header\"},\"Primitive\"),/*#__PURE__*/React.createElement(Dropdown,{value:primitive,onChange:setPrimitive,items:[Primitives.Sphere,Primitives.Box],label:\"Primitives\"}),/*#__PURE__*/React.createElement(FloatInput,{val:input1,handleChange:setInput1,label:\"Radius\"}),input1,id,data.sdf,\"CHILDREN: \",data.children,/*#__PURE__*/React.createElement(CustomHandle,{type:\"source\",onConnect:function onConnect(params){return sharedFunctions.connectSdf(params.source,params.target,params);}}),showCanvas?/*#__PURE__*/React.createElement(Shader,{shader:fs(sdf),uniforms:{color:{type:\"3fv\",value:[1.0,1.0,0.0]}},style:{margin:\"10px\"}}):null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return setShowCanvas(!showCanvas);},variant:\"contained\",className:\"custom-node-creater\",size:\"small\",endIcon:showCanvas?/*#__PURE__*/React.createElement(KeyboardArrowUpIcon,null):/*#__PURE__*/React.createElement(KeyboardArrowDownIcon,null)},showCanvas?\"Hide canvas\":\"Show canvas\"));}","map":{"version":3,"names":["React","useContext","Shader","fs","useEffect","Button","KeyboardArrowDownIcon","KeyboardArrowUpIcon","FloatInput","Dropdown","GraphContext","CustomHandle","Primitives","Sphere","Box","PrimitiveNode","data","id","useState","primitive","setPrimitive","sdf","setSdf","showCanvas","setShowCanvas","input1","setInput1","input2","setInput2","input3","setInput3","sharedFunctions","handleChange","newPrimitive","newSdf","console","log","updateNodeSdf","toFixed","children","params","connectSdf","source","target","color","type","value","margin"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/PrimitiveNode.js"],"sourcesContent":["import React, {useContext} from \"react\";\r\nimport Shader from \"./Shader.js\";\r\nimport { fs } from \"./fragmentShader.js\";\r\nimport { useEffect } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\r\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\r\nimport FloatInput from \"./FloatInput.js\";\r\nimport Dropdown from \"./Dropdown\";\r\nimport GraphContext from \"./GraphContext.js\";\r\nimport CustomHandle from \"./CustomHandle.js\";\r\n\r\nconst Primitives = {\r\n  Sphere: \"Sphere\",\r\n  Box: \"Box\",\r\n};\r\n\r\nexport default function PrimitiveNode({ data, id }) {\r\n  const [primitive, setPrimitive] = React.useState(Primitives.Sphere);\r\n  const [sdf, setSdf] = React.useState(data.sdf);\r\n  const [showCanvas, setShowCanvas] = React.useState(true);\r\n  const [input1, setInput1] = React.useState(1.0);\r\n  const [input2, setInput2] = React.useState(1.0);\r\n  const [input3, setInput3] = React.useState(1.0);\r\n\r\n  const sharedFunctions = useContext(GraphContext);\r\n\r\n  const handleChange = (newPrimitive, newSdf) => {\r\n    if (newPrimitive == Primitives.Sphere) {\r\n      console.log(\"YES\");\r\n    }\r\n    setPrimitive(newPrimitive);\r\n    setSdf(newSdf);\r\n  };\r\n\r\n  useEffect(() => {\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    sharedFunctions.updateNodeSdf(id, sdf);\r\n  }, [sdf]);\r\n\r\n  useEffect(() => {\r\n    console.log(\"ACTUALIZADO SDF\");\r\n    if (primitive == Primitives.Sphere) {\r\n      setSdf(`sphere(p, ${input1.toFixed(4)})`);\r\n    } else if (primitive == Primitives.Box) {\r\n      setSdf(\r\n        `box(p, vec3(${input1.toFixed(4)}, ${input2.toFixed(\r\n          4\r\n        )}, ${input3.toFixed(4)}))`\r\n      );\r\n    }\r\n  }, [primitive, input1, input2, input3]);\r\n\r\n  return (\r\n    <div className=\"custom-node\">\r\n      <div className=\"custom-node-header\">Primitive</div>\r\n\r\n      <Dropdown value={primitive} onChange={setPrimitive} items={[Primitives.Sphere, Primitives.Box]} label=\"Primitives\"/> \r\n      <FloatInput val={input1} handleChange={setInput1} label=\"Radius\" />\r\n      {input1}\r\n      {id}\r\n      {data.sdf}\r\n      {\"CHILDREN: \"}\r\n      {data.children}\r\n\r\n      <CustomHandle type=\"source\" onConnect={(params) => sharedFunctions.connectSdf(params.source, params.target, params)}/>\r\n\r\n      {showCanvas ? (\r\n        <Shader\r\n          shader={fs(sdf)}\r\n          uniforms={{ color: { type: \"3fv\", value: [1.0, 1.0, 0.0] } }}\r\n          style={{ margin: \"10px\" }}\r\n        />\r\n      ) : null}\r\n\r\n      <Button\r\n        onClick={() => setShowCanvas(!showCanvas)}\r\n        variant=\"contained\"\r\n        className=\"custom-node-creater\"\r\n        size=\"small\"\r\n        endIcon={\r\n          showCanvas ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />\r\n        }\r\n      >\r\n        {showCanvas ? \"Hide canvas\" : \"Show canvas\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}