{"ast":null,"code":"'use strict';\n\nvar _createForOfIteratorHelper = require(\"G:\\\\gitlab\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createForOfIteratorHelper\");\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar tslib = require('tslib');\n\nvar index = require('../resize/index.cjs.js');\n\nvar info = require('./info.cjs.js');\n\nvar onScrollHandler = require('./on-scroll-handler.cjs.js');\n\nvar scrollListeners = new WeakMap();\nvar resizeListeners = new WeakMap();\nvar onScrollHandlers = new WeakMap();\n\nvar getEventTarget = function getEventTarget(element) {\n  return element === document.documentElement ? window : element;\n};\n\nfunction scroll(onScroll) {\n  var _a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var _a$container = _a.container,\n      container = _a$container === void 0 ? document.documentElement : _a$container,\n      options = tslib.__rest(_a, [\"container\"]);\n\n  var containerHandlers = onScrollHandlers.get(container);\n  /**\r\n   * Get the onScroll handlers for this container.\r\n   * If one isn't found, create a new one.\r\n   */\n\n  if (!containerHandlers) {\n    containerHandlers = new Set();\n    onScrollHandlers.set(container, containerHandlers);\n  }\n  /**\r\n   * Create a new onScroll handler for the provided callback.\r\n   */\n\n\n  var info$1 = info.createScrollInfo();\n  var containerHandler = onScrollHandler.createOnScrollHandler(container, onScroll, info$1, options);\n  containerHandlers.add(containerHandler);\n  /**\r\n   * Check if there's a scroll event listener for this container.\r\n   * If not, create one.\r\n   */\n\n  if (!scrollListeners.has(container)) {\n    var _listener = function _listener() {\n      var time = performance.now();\n\n      var _iterator = _createForOfIteratorHelper(containerHandlers),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var handler = _step.value;\n          handler.measure();\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var _iterator2 = _createForOfIteratorHelper(containerHandlers),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var _handler = _step2.value;\n\n          _handler.update(time);\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      var _iterator3 = _createForOfIteratorHelper(containerHandlers),\n          _step3;\n\n      try {\n        for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n          var _handler2 = _step3.value;\n\n          _handler2.notify();\n        }\n      } catch (err) {\n        _iterator3.e(err);\n      } finally {\n        _iterator3.f();\n      }\n    };\n\n    scrollListeners.set(container, _listener);\n    var target = getEventTarget(container);\n    window.addEventListener(\"resize\", _listener, {\n      passive: true\n    });\n\n    if (container !== document.documentElement) {\n      resizeListeners.set(container, index.resize(container, _listener));\n    }\n\n    target.addEventListener(\"scroll\", _listener, {\n      passive: true\n    });\n  }\n\n  var listener = scrollListeners.get(container);\n  var onLoadProcesss = requestAnimationFrame(listener);\n  return function () {\n    var _a;\n\n    if (typeof onScroll !== \"function\") onScroll.stop();\n    cancelAnimationFrame(onLoadProcesss);\n    /**\r\n     * Check if we even have any handlers for this container.\r\n     */\n\n    var containerHandlers = onScrollHandlers.get(container);\n    if (!containerHandlers) return;\n    containerHandlers.delete(containerHandler);\n    if (containerHandlers.size) return;\n    /**\r\n     * If no more handlers, remove the scroll listener too.\r\n     */\n\n    var listener = scrollListeners.get(container);\n    scrollListeners.delete(container);\n\n    if (listener) {\n      getEventTarget(container).removeEventListener(\"scroll\", listener);\n      (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\n      window.removeEventListener(\"resize\", listener);\n    }\n  };\n}\n\nexports.scroll = scroll;","map":{"version":3,"names":["Object","defineProperty","exports","value","tslib","require","index","info","onScrollHandler","scrollListeners","WeakMap","resizeListeners","onScrollHandlers","getEventTarget","element","document","documentElement","window","scroll","onScroll","_a","container","options","__rest","containerHandlers","get","Set","set","info$1","createScrollInfo","containerHandler","createOnScrollHandler","add","has","listener","time","performance","now","handler","measure","update","notify","target","addEventListener","passive","resize","onLoadProcesss","requestAnimationFrame","stop","cancelAnimationFrame","delete","size","removeEventListener"],"sources":["G:/gitlab/TFG/Aplicacion/node_modules/@motionone/dom/dist/gestures/scroll/index.cjs.js"],"sourcesContent":["'use strict';\r\n\r\nObject.defineProperty(exports, '__esModule', { value: true });\r\n\r\nvar tslib = require('tslib');\r\nvar index = require('../resize/index.cjs.js');\r\nvar info = require('./info.cjs.js');\r\nvar onScrollHandler = require('./on-scroll-handler.cjs.js');\r\n\r\nconst scrollListeners = new WeakMap();\r\nconst resizeListeners = new WeakMap();\r\nconst onScrollHandlers = new WeakMap();\r\nconst getEventTarget = (element) => element === document.documentElement ? window : element;\r\nfunction scroll(onScroll, _a = {}) {\r\n    var { container = document.documentElement } = _a, options = tslib.__rest(_a, [\"container\"]);\r\n    let containerHandlers = onScrollHandlers.get(container);\r\n    /**\r\n     * Get the onScroll handlers for this container.\r\n     * If one isn't found, create a new one.\r\n     */\r\n    if (!containerHandlers) {\r\n        containerHandlers = new Set();\r\n        onScrollHandlers.set(container, containerHandlers);\r\n    }\r\n    /**\r\n     * Create a new onScroll handler for the provided callback.\r\n     */\r\n    const info$1 = info.createScrollInfo();\r\n    const containerHandler = onScrollHandler.createOnScrollHandler(container, onScroll, info$1, options);\r\n    containerHandlers.add(containerHandler);\r\n    /**\r\n     * Check if there's a scroll event listener for this container.\r\n     * If not, create one.\r\n     */\r\n    if (!scrollListeners.has(container)) {\r\n        const listener = () => {\r\n            const time = performance.now();\r\n            for (const handler of containerHandlers)\r\n                handler.measure();\r\n            for (const handler of containerHandlers)\r\n                handler.update(time);\r\n            for (const handler of containerHandlers)\r\n                handler.notify();\r\n        };\r\n        scrollListeners.set(container, listener);\r\n        const target = getEventTarget(container);\r\n        window.addEventListener(\"resize\", listener, { passive: true });\r\n        if (container !== document.documentElement) {\r\n            resizeListeners.set(container, index.resize(container, listener));\r\n        }\r\n        target.addEventListener(\"scroll\", listener, { passive: true });\r\n    }\r\n    const listener = scrollListeners.get(container);\r\n    const onLoadProcesss = requestAnimationFrame(listener);\r\n    return () => {\r\n        var _a;\r\n        if (typeof onScroll !== \"function\")\r\n            onScroll.stop();\r\n        cancelAnimationFrame(onLoadProcesss);\r\n        /**\r\n         * Check if we even have any handlers for this container.\r\n         */\r\n        const containerHandlers = onScrollHandlers.get(container);\r\n        if (!containerHandlers)\r\n            return;\r\n        containerHandlers.delete(containerHandler);\r\n        if (containerHandlers.size)\r\n            return;\r\n        /**\r\n         * If no more handlers, remove the scroll listener too.\r\n         */\r\n        const listener = scrollListeners.get(container);\r\n        scrollListeners.delete(container);\r\n        if (listener) {\r\n            getEventTarget(container).removeEventListener(\"scroll\", listener);\r\n            (_a = resizeListeners.get(container)) === null || _a === void 0 ? void 0 : _a();\r\n            window.removeEventListener(\"resize\", listener);\r\n        }\r\n    };\r\n}\r\n\r\nexports.scroll = scroll;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}