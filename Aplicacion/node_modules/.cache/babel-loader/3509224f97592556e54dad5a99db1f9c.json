{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.TagsFactory = exports.AllTags = exports.NoTags = exports.AbstractTags = exports.TagInfo = exports.Label = void 0;\n\nvar TexParser_js_1 = __importDefault(require(\"./TexParser.js\"));\n\nvar Label = function () {\n  function Label(tag, id) {\n    if (tag === void 0) {\n      tag = '???';\n    }\n\n    if (id === void 0) {\n      id = '';\n    }\n\n    this.tag = tag;\n    this.id = id;\n  }\n\n  return Label;\n}();\n\nexports.Label = Label;\n\nvar TagInfo = function () {\n  function TagInfo(env, taggable, defaultTags, tag, tagId, tagFormat, noTag, labelId) {\n    if (env === void 0) {\n      env = '';\n    }\n\n    if (taggable === void 0) {\n      taggable = false;\n    }\n\n    if (defaultTags === void 0) {\n      defaultTags = false;\n    }\n\n    if (tag === void 0) {\n      tag = null;\n    }\n\n    if (tagId === void 0) {\n      tagId = '';\n    }\n\n    if (tagFormat === void 0) {\n      tagFormat = '';\n    }\n\n    if (noTag === void 0) {\n      noTag = false;\n    }\n\n    if (labelId === void 0) {\n      labelId = '';\n    }\n\n    this.env = env;\n    this.taggable = taggable;\n    this.defaultTags = defaultTags;\n    this.tag = tag;\n    this.tagId = tagId;\n    this.tagFormat = tagFormat;\n    this.noTag = noTag;\n    this.labelId = labelId;\n  }\n\n  return TagInfo;\n}();\n\nexports.TagInfo = TagInfo;\n\nvar AbstractTags = function () {\n  function AbstractTags() {\n    this.counter = 0;\n    this.allCounter = 0;\n    this.configuration = null;\n    this.ids = {};\n    this.allIds = {};\n    this.labels = {};\n    this.allLabels = {};\n    this.redo = false;\n    this.refUpdate = false;\n    this.currentTag = new TagInfo();\n    this.history = [];\n    this.stack = [];\n\n    this.enTag = function (node, tag) {\n      var nf = this.configuration.nodeFactory;\n      var cell = nf.create('node', 'mtd', [node]);\n      var row = nf.create('node', 'mlabeledtr', [tag, cell]);\n      var table = nf.create('node', 'mtable', [row], {\n        side: this.configuration.options['tagSide'],\n        minlabelspacing: this.configuration.options['tagIndent'],\n        displaystyle: true\n      });\n      return table;\n    };\n  }\n\n  AbstractTags.prototype.start = function (env, taggable, defaultTags) {\n    if (this.currentTag) {\n      this.stack.push(this.currentTag);\n    }\n\n    this.currentTag = new TagInfo(env, taggable, defaultTags);\n  };\n\n  Object.defineProperty(AbstractTags.prototype, \"env\", {\n    get: function get() {\n      return this.currentTag.env;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AbstractTags.prototype.end = function () {\n    this.history.push(this.currentTag);\n    this.currentTag = this.stack.pop();\n  };\n\n  AbstractTags.prototype.tag = function (tag, noFormat) {\n    this.currentTag.tag = tag;\n    this.currentTag.tagFormat = noFormat ? tag : this.formatTag(tag);\n    this.currentTag.noTag = false;\n  };\n\n  AbstractTags.prototype.notag = function () {\n    this.tag('', true);\n    this.currentTag.noTag = true;\n  };\n\n  Object.defineProperty(AbstractTags.prototype, \"noTag\", {\n    get: function get() {\n      return this.currentTag.noTag;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AbstractTags.prototype, \"label\", {\n    get: function get() {\n      return this.currentTag.labelId;\n    },\n    set: function set(label) {\n      this.currentTag.labelId = label;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  AbstractTags.prototype.formatUrl = function (id, base) {\n    return base + '#' + encodeURIComponent(id);\n  };\n\n  AbstractTags.prototype.formatTag = function (tag) {\n    return '(' + tag + ')';\n  };\n\n  AbstractTags.prototype.formatId = function (id) {\n    return 'mjx-eqn:' + id.replace(/\\s/g, '_');\n  };\n\n  AbstractTags.prototype.formatNumber = function (n) {\n    return n.toString();\n  };\n\n  AbstractTags.prototype.autoTag = function () {\n    if (this.currentTag.tag == null) {\n      this.counter++;\n      this.tag(this.formatNumber(this.counter), false);\n    }\n  };\n\n  AbstractTags.prototype.clearTag = function () {\n    this.label = '';\n    this.tag(null, true);\n    this.currentTag.tagId = '';\n  };\n\n  AbstractTags.prototype.getTag = function (force) {\n    if (force === void 0) {\n      force = false;\n    }\n\n    if (force) {\n      this.autoTag();\n      return this.makeTag();\n    }\n\n    var ct = this.currentTag;\n\n    if (ct.taggable && !ct.noTag) {\n      if (ct.defaultTags) {\n        this.autoTag();\n      }\n\n      if (ct.tag) {\n        return this.makeTag();\n      }\n    }\n\n    return null;\n  };\n\n  AbstractTags.prototype.resetTag = function () {\n    this.history = [];\n    this.redo = false;\n    this.refUpdate = false;\n    this.clearTag();\n  };\n\n  AbstractTags.prototype.reset = function (offset) {\n    if (offset === void 0) {\n      offset = 0;\n    }\n\n    this.resetTag();\n    this.counter = this.allCounter = offset;\n    this.allLabels = {};\n    this.allIds = {};\n  };\n\n  AbstractTags.prototype.startEquation = function (math) {\n    this.history = [];\n    this.stack = [];\n    this.clearTag();\n    this.currentTag = new TagInfo('', undefined, undefined);\n    this.labels = {};\n    this.ids = {};\n    this.counter = this.allCounter;\n    this.redo = false;\n    var recompile = math.inputData.recompile;\n\n    if (recompile) {\n      this.refUpdate = true;\n      this.counter = recompile.counter;\n    }\n  };\n\n  AbstractTags.prototype.finishEquation = function (math) {\n    if (this.redo) {\n      math.inputData.recompile = {\n        state: math.state(),\n        counter: this.allCounter\n      };\n    }\n\n    if (!this.refUpdate) {\n      this.allCounter = this.counter;\n    }\n\n    Object.assign(this.allIds, this.ids);\n    Object.assign(this.allLabels, this.labels);\n  };\n\n  AbstractTags.prototype.finalize = function (node, env) {\n    if (!env.display || this.currentTag.env || this.currentTag.tag == null) {\n      return node;\n    }\n\n    var tag = this.makeTag();\n    var table = this.enTag(node, tag);\n    return table;\n  };\n\n  AbstractTags.prototype.makeId = function () {\n    this.currentTag.tagId = this.formatId(this.configuration.options['useLabelIds'] ? this.label || this.currentTag.tag : this.currentTag.tag);\n  };\n\n  AbstractTags.prototype.makeTag = function () {\n    this.makeId();\n\n    if (this.label) {\n      this.labels[this.label] = new Label(this.currentTag.tag, this.currentTag.tagId);\n    }\n\n    var mml = new TexParser_js_1.default('\\\\text{' + this.currentTag.tagFormat + '}', {}, this.configuration).mml();\n    return this.configuration.nodeFactory.create('node', 'mtd', [mml], {\n      id: this.currentTag.tagId\n    });\n  };\n\n  return AbstractTags;\n}();\n\nexports.AbstractTags = AbstractTags;\n\nvar NoTags = function (_super) {\n  __extends(NoTags, _super);\n\n  function NoTags() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  NoTags.prototype.autoTag = function () {};\n\n  NoTags.prototype.getTag = function () {\n    return !this.currentTag.tag ? null : _super.prototype.getTag.call(this);\n  };\n\n  return NoTags;\n}(AbstractTags);\n\nexports.NoTags = NoTags;\n\nvar AllTags = function (_super) {\n  __extends(AllTags, _super);\n\n  function AllTags() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  AllTags.prototype.finalize = function (node, env) {\n    if (!env.display || this.history.find(function (x) {\n      return x.taggable;\n    })) {\n      return node;\n    }\n\n    var tag = this.getTag(true);\n    return this.enTag(node, tag);\n  };\n\n  return AllTags;\n}(AbstractTags);\n\nexports.AllTags = AllTags;\nvar TagsFactory;\n\n(function (TagsFactory) {\n  var tagsMapping = new Map([['none', NoTags], ['all', AllTags]]);\n  var defaultTags = 'none';\n  TagsFactory.OPTIONS = {\n    tags: defaultTags,\n    tagSide: 'right',\n    tagIndent: '0.8em',\n    useLabelIds: true,\n    ignoreDuplicateLabels: false\n  };\n\n  TagsFactory.add = function (name, constr) {\n    tagsMapping.set(name, constr);\n  };\n\n  TagsFactory.addTags = function (tags) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(Object.keys(tags)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var key = _c.value;\n        TagsFactory.add(key, tags[key]);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  TagsFactory.create = function (name) {\n    var constr = tagsMapping.get(name) || tagsMapping.get(defaultTags);\n\n    if (!constr) {\n      throw Error('Unknown tags class');\n    }\n\n    return new constr();\n  };\n\n  TagsFactory.setDefault = function (name) {\n    defaultTags = name;\n  };\n\n  TagsFactory.getDefault = function () {\n    return TagsFactory.create(defaultTags);\n  };\n})(TagsFactory = exports.TagsFactory || (exports.TagsFactory = {}));","map":{"version":3,"mappings":"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","names":["tag","id","exports","env","taggable","defaultTags","tagId","tagFormat","noTag","labelId","TagInfo","node","nf","configuration","nodeFactory","cell","create","row","table","side","options","minlabelspacing","displaystyle","AbstractTags","currentTag","stack","push","Object","history","pop","noFormat","formatTag","label","base","encodeURIComponent","replace","n","toString","counter","formatNumber","force","autoTag","makeTag","ct","redo","refUpdate","clearTag","offset","resetTag","allCounter","allLabels","allIds","math","undefined","labels","ids","recompile","inputData","state","assign","display","enTag","formatId","makeId","Label","mml","TexParser_js_1","__extends","NoTags","_super","getTag","call","AllTags","find","x","TagsFactory","tagsMapping","Map","tags","tagSide","tagIndent","useLabelIds","ignoreDuplicateLabels","name","constr","set","keys","_c","key","add","get","Error"],"sourceRoot":"","sources":["../../../ts/input/tex/Tags.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}