{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SVGmlabeledtr = exports.SVGmtr = void 0;\n\nvar Wrapper_js_1 = require(\"../Wrapper.js\");\n\nvar mtr_js_1 = require(\"../../common/Wrappers/mtr.js\");\n\nvar mtr_js_2 = require(\"../../common/Wrappers/mtr.js\");\n\nvar mtr_js_3 = require(\"../../../core/MmlTree/MmlNodes/mtr.js\");\n\nvar SVGmtr = function (_super) {\n  __extends(SVGmtr, _super);\n\n  function SVGmtr() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SVGmtr.prototype.toSVG = function (parent) {\n    var svg = this.standardSVGnode(parent);\n    this.placeCells(svg);\n    this.placeColor();\n  };\n\n  SVGmtr.prototype.placeCells = function (svg) {\n    var cSpace = this.parent.getColumnHalfSpacing();\n\n    var cLines = __spreadArray(__spreadArray([this.parent.fLine], __read(this.parent.cLines), false), [this.parent.fLine], false);\n\n    var cWidth = this.parent.getComputedWidths();\n    var scale = 1 / this.getBBox().rscale;\n    var x = cLines[0];\n\n    for (var i = 0; i < this.numCells; i++) {\n      var child = this.getChild(i);\n      child.toSVG(svg);\n      x += this.placeCell(child, {\n        x: x,\n        y: 0,\n        lSpace: cSpace[i] * scale,\n        rSpace: cSpace[i + 1] * scale,\n        w: cWidth[i] * scale,\n        lLine: cLines[i] * scale,\n        rLine: cLines[i + 1] * scale\n      });\n    }\n  };\n\n  SVGmtr.prototype.placeCell = function (cell, sizes) {\n    var x = sizes.x,\n        y = sizes.y,\n        lSpace = sizes.lSpace,\n        w = sizes.w,\n        rSpace = sizes.rSpace,\n        lLine = sizes.lLine,\n        rLine = sizes.rLine;\n    var scale = 1 / this.getBBox().rscale;\n\n    var _a = __read([this.H * scale, this.D * scale], 2),\n        h = _a[0],\n        d = _a[1];\n\n    var _b = __read([this.tSpace * scale, this.bSpace * scale], 2),\n        t = _b[0],\n        b = _b[1];\n\n    var _c = __read(cell.placeCell(x + lSpace, y, w, h, d), 2),\n        dx = _c[0],\n        dy = _c[1];\n\n    var W = lSpace + w + rSpace;\n    cell.placeColor(-(dx + lSpace + lLine / 2), -(d + b + dy), W + (lLine + rLine) / 2, h + d + t + b);\n    return W + rLine;\n  };\n\n  SVGmtr.prototype.placeColor = function () {\n    var scale = 1 / this.getBBox().rscale;\n    var adaptor = this.adaptor;\n    var child = this.firstChild();\n\n    if (child && adaptor.kind(child) === 'rect' && adaptor.getAttribute(child, 'data-bgcolor')) {\n      var _a = __read([this.tLine / 2 * scale, this.bLine / 2 * scale], 2),\n          TL = _a[0],\n          BL = _a[1];\n\n      var _b = __read([this.tSpace * scale, this.bSpace * scale], 2),\n          TS = _b[0],\n          BS = _b[1];\n\n      var _c = __read([this.H * scale, this.D * scale], 2),\n          H = _c[0],\n          D = _c[1];\n\n      adaptor.setAttribute(child, 'y', this.fixed(-(D + BS + BL)));\n      adaptor.setAttribute(child, 'width', this.fixed(this.parent.getWidth() * scale));\n      adaptor.setAttribute(child, 'height', this.fixed(TL + TS + H + D + BS + BL));\n    }\n  };\n\n  SVGmtr.kind = mtr_js_3.MmlMtr.prototype.kind;\n  return SVGmtr;\n}((0, mtr_js_1.CommonMtrMixin)(Wrapper_js_1.SVGWrapper));\n\nexports.SVGmtr = SVGmtr;\n\nvar SVGmlabeledtr = function (_super) {\n  __extends(SVGmlabeledtr, _super);\n\n  function SVGmlabeledtr() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  SVGmlabeledtr.prototype.toSVG = function (parent) {\n    _super.prototype.toSVG.call(this, parent);\n\n    var child = this.childNodes[0];\n\n    if (child) {\n      child.toSVG(this.parent.labels);\n    }\n  };\n\n  SVGmlabeledtr.kind = mtr_js_3.MmlMlabeledtr.prototype.kind;\n  return SVGmlabeledtr;\n}((0, mtr_js_2.CommonMlabeledtrMixin)(SVGmtr));\n\nexports.SVGmlabeledtr = SVGmlabeledtr;","map":{"version":3,"mappings":"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","names":["__extends","SVGmtr","parent","svg","standardSVGnode","placeCells","placeColor","cSpace","getColumnHalfSpacing","cLines","fLine","__read","cWidth","getComputedWidths","scale","getBBox","rscale","x","i","numCells","child","getChild","toSVG","placeCell","y","lSpace","rSpace","w","lLine","rLine","cell","sizes","H","D","h","d","tSpace","bSpace","t","b","dx","dy","W","adaptor","firstChild","kind","getAttribute","tLine","bLine","TL","BL","TS","BS","setAttribute","fixed","getWidth","mtr_js_3","prototype","Wrapper_js_1","exports","SVGmlabeledtr","_super","call","childNodes","labels"],"sourceRoot":"","sources":["../../../../ts/output/svg/Wrappers/mtr.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}