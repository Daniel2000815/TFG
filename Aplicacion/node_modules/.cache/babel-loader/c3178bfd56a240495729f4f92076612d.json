{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonTextNodeMixin = void 0;\n\nfunction CommonTextNodeMixin(Base) {\n  return function (_super) {\n    __extends(class_1, _super);\n\n    function class_1() {\n      return _super !== null && _super.apply(this, arguments) || this;\n    }\n\n    class_1.prototype.computeBBox = function (bbox, _recompute) {\n      var e_1, _a;\n\n      if (_recompute === void 0) {\n        _recompute = false;\n      }\n\n      var variant = this.parent.variant;\n      var text = this.node.getText();\n\n      if (variant === '-explicitFont') {\n        var font = this.jax.getFontData(this.parent.styles);\n\n        var _b = this.jax.measureText(text, variant, font),\n            w = _b.w,\n            h = _b.h,\n            d = _b.d;\n\n        bbox.h = h;\n        bbox.d = d;\n        bbox.w = w;\n      } else {\n        var chars = this.remappedText(text, variant);\n        bbox.empty();\n\n        try {\n          for (var chars_1 = __values(chars), chars_1_1 = chars_1.next(); !chars_1_1.done; chars_1_1 = chars_1.next()) {\n            var char = chars_1_1.value;\n\n            var _c = __read(this.getVariantChar(variant, char), 4),\n                h = _c[0],\n                d = _c[1],\n                w = _c[2],\n                data = _c[3];\n\n            if (data.unknown) {\n              var cbox = this.jax.measureText(String.fromCodePoint(char), variant);\n              w = cbox.w;\n              h = cbox.h;\n              d = cbox.d;\n            }\n\n            bbox.w += w;\n            if (h > bbox.h) bbox.h = h;\n            if (d > bbox.d) bbox.d = d;\n            bbox.ic = data.ic || 0;\n            bbox.sk = data.sk || 0;\n            bbox.dx = data.dx || 0;\n          }\n        } catch (e_1_1) {\n          e_1 = {\n            error: e_1_1\n          };\n        } finally {\n          try {\n            if (chars_1_1 && !chars_1_1.done && (_a = chars_1.return)) _a.call(chars_1);\n          } finally {\n            if (e_1) throw e_1.error;\n          }\n        }\n\n        if (chars.length > 1) {\n          bbox.sk = 0;\n        }\n\n        bbox.clean();\n      }\n    };\n\n    class_1.prototype.remappedText = function (text, variant) {\n      var c = this.parent.stretch.c;\n      return c ? [c] : this.parent.remapChars(this.unicodeChars(text, variant));\n    };\n\n    class_1.prototype.getStyles = function () {};\n\n    class_1.prototype.getVariant = function () {};\n\n    class_1.prototype.getScale = function () {};\n\n    class_1.prototype.getSpace = function () {};\n\n    return class_1;\n  }(Base);\n}\n\nexports.CommonTextNodeMixin = CommonTextNodeMixin;","map":{"version":3,"mappings":"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","names":["CommonTextNodeMixin","Base","__extends","class_1","bbox","_recompute","variant","parent","text","node","getText","font","jax","getFontData","styles","measureText","w","h","d","chars","remappedText","empty","chars_1_1","char","getVariantChar","data","unknown","cbox","String","fromCodePoint","ic","sk","dx","length","clean","c","stretch","remapChars","unicodeChars","exports"],"sourceRoot":"","sources":["../../../../ts/output/common/Wrappers/TextNode.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}