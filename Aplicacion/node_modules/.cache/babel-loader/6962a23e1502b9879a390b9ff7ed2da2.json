{"ast":null,"code":"\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n    if (ar || !(i in from)) {\n      if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n      ar[i] = from[i];\n    }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n};\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nvar _a;\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CommonMoMixin = exports.DirectionVH = void 0;\n\nvar BBox_js_1 = require(\"../../../util/BBox.js\");\n\nvar string_js_1 = require(\"../../../util/string.js\");\n\nvar FontData_js_1 = require(\"../FontData.js\");\n\nexports.DirectionVH = (_a = {}, _a[1] = 'v', _a[2] = 'h', _a);\n\nfunction CommonMoMixin(Base) {\n  return function (_super) {\n    __extends(class_1, _super);\n\n    function class_1() {\n      var args = [];\n\n      for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n      }\n\n      var _this = _super.apply(this, __spreadArray([], __read(args), false)) || this;\n\n      _this.size = null;\n      _this.isAccent = _this.node.isAccent;\n      return _this;\n    }\n\n    class_1.prototype.computeBBox = function (bbox, _recompute) {\n      if (_recompute === void 0) {\n        _recompute = false;\n      }\n\n      this.protoBBox(bbox);\n\n      if (this.node.attributes.get('symmetric') && this.stretch.dir !== 2) {\n        var d = this.getCenterOffset(bbox);\n        bbox.h += d;\n        bbox.d -= d;\n      }\n\n      if (this.node.getProperty('mathaccent') && (this.stretch.dir === 0 || this.size >= 0)) {\n        bbox.w = 0;\n      }\n    };\n\n    class_1.prototype.protoBBox = function (bbox) {\n      var stretchy = this.stretch.dir !== 0;\n\n      if (stretchy && this.size === null) {\n        this.getStretchedVariant([0]);\n      }\n\n      if (stretchy && this.size < 0) return;\n\n      _super.prototype.computeBBox.call(this, bbox);\n\n      this.copySkewIC(bbox);\n    };\n\n    class_1.prototype.getAccentOffset = function () {\n      var bbox = BBox_js_1.BBox.empty();\n      this.protoBBox(bbox);\n      return -bbox.w / 2;\n    };\n\n    class_1.prototype.getCenterOffset = function (bbox) {\n      if (bbox === void 0) {\n        bbox = null;\n      }\n\n      if (!bbox) {\n        bbox = BBox_js_1.BBox.empty();\n\n        _super.prototype.computeBBox.call(this, bbox);\n      }\n\n      return (bbox.h + bbox.d) / 2 + this.font.params.axis_height - bbox.h;\n    };\n\n    class_1.prototype.getVariant = function () {\n      if (this.node.attributes.get('largeop')) {\n        this.variant = this.node.attributes.get('displaystyle') ? '-largeop' : '-smallop';\n        return;\n      }\n\n      if (!this.node.attributes.getExplicit('mathvariant') && this.node.getProperty('pseudoscript') === false) {\n        this.variant = '-tex-variant';\n        return;\n      }\n\n      _super.prototype.getVariant.call(this);\n    };\n\n    class_1.prototype.canStretch = function (direction) {\n      if (this.stretch.dir !== 0) {\n        return this.stretch.dir === direction;\n      }\n\n      var attributes = this.node.attributes;\n      if (!attributes.get('stretchy')) return false;\n      var c = this.getText();\n      if (Array.from(c).length !== 1) return false;\n      var delim = this.font.getDelimiter(c.codePointAt(0));\n      this.stretch = delim && delim.dir === direction ? delim : FontData_js_1.NOSTRETCH;\n      return this.stretch.dir !== 0;\n    };\n\n    class_1.prototype.getStretchedVariant = function (WH, exact) {\n      var e_1, _a;\n\n      if (exact === void 0) {\n        exact = false;\n      }\n\n      if (this.stretch.dir !== 0) {\n        var D = this.getWH(WH);\n        var min = this.getSize('minsize', 0);\n        var max = this.getSize('maxsize', Infinity);\n        var mathaccent = this.node.getProperty('mathaccent');\n        D = Math.max(min, Math.min(max, D));\n        var df = this.font.params.delimiterfactor / 1000;\n        var ds = this.font.params.delimitershortfall;\n        var m = min || exact ? D : mathaccent ? Math.min(D / df, D + ds) : Math.max(D * df, D - ds);\n        var delim = this.stretch;\n        var c = delim.c || this.getText().codePointAt(0);\n        var i = 0;\n\n        if (delim.sizes) {\n          try {\n            for (var _b = __values(delim.sizes), _c = _b.next(); !_c.done; _c = _b.next()) {\n              var d = _c.value;\n\n              if (d >= m) {\n                if (mathaccent && i) {\n                  i--;\n                }\n\n                this.variant = this.font.getSizeVariant(c, i);\n                this.size = i;\n\n                if (delim.schar && delim.schar[i]) {\n                  this.stretch = __assign(__assign({}, this.stretch), {\n                    c: delim.schar[i]\n                  });\n                }\n\n                return;\n              }\n\n              i++;\n            }\n          } catch (e_1_1) {\n            e_1 = {\n              error: e_1_1\n            };\n          } finally {\n            try {\n              if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            } finally {\n              if (e_1) throw e_1.error;\n            }\n          }\n        }\n\n        if (delim.stretch) {\n          this.size = -1;\n          this.invalidateBBox();\n          this.getStretchBBox(WH, this.checkExtendedHeight(D, delim), delim);\n        } else {\n          this.variant = this.font.getSizeVariant(c, i - 1);\n          this.size = i - 1;\n        }\n      }\n    };\n\n    class_1.prototype.getSize = function (name, value) {\n      var attributes = this.node.attributes;\n\n      if (attributes.isSet(name)) {\n        value = this.length2em(attributes.get(name), 1, 1);\n      }\n\n      return value;\n    };\n\n    class_1.prototype.getWH = function (WH) {\n      if (WH.length === 0) return 0;\n      if (WH.length === 1) return WH[0];\n\n      var _a = __read(WH, 2),\n          H = _a[0],\n          D = _a[1];\n\n      var a = this.font.params.axis_height;\n      return this.node.attributes.get('symmetric') ? 2 * Math.max(H - a, D + a) : H + D;\n    };\n\n    class_1.prototype.getStretchBBox = function (WHD, D, C) {\n      var _a;\n\n      if (C.hasOwnProperty('min') && C.min > D) {\n        D = C.min;\n      }\n\n      var _b = __read(C.HDW, 3),\n          h = _b[0],\n          d = _b[1],\n          w = _b[2];\n\n      if (this.stretch.dir === 1) {\n        _a = __read(this.getBaseline(WHD, D, C), 2), h = _a[0], d = _a[1];\n      } else {\n        w = D;\n      }\n\n      this.bbox.h = h;\n      this.bbox.d = d;\n      this.bbox.w = w;\n    };\n\n    class_1.prototype.getBaseline = function (WHD, HD, C) {\n      var hasWHD = WHD.length === 2 && WHD[0] + WHD[1] === HD;\n      var symmetric = this.node.attributes.get('symmetric');\n\n      var _a = __read(hasWHD ? WHD : [HD, 0], 2),\n          H = _a[0],\n          D = _a[1];\n\n      var _b = __read([H + D, 0], 2),\n          h = _b[0],\n          d = _b[1];\n\n      if (symmetric) {\n        var a = this.font.params.axis_height;\n\n        if (hasWHD) {\n          h = 2 * Math.max(H - a, D + a);\n        }\n\n        d = h / 2 - a;\n      } else if (hasWHD) {\n        d = D;\n      } else {\n        var _c = __read(C.HDW || [.75, .25], 2),\n            ch = _c[0],\n            cd = _c[1];\n\n        d = cd * (h / (ch + cd));\n      }\n\n      return [h - d, d];\n    };\n\n    class_1.prototype.checkExtendedHeight = function (D, C) {\n      if (C.fullExt) {\n        var _a = __read(C.fullExt, 2),\n            extSize = _a[0],\n            endSize = _a[1];\n\n        var n = Math.ceil(Math.max(0, D - endSize) / extSize);\n        D = endSize + n * extSize;\n      }\n\n      return D;\n    };\n\n    class_1.prototype.remapChars = function (chars) {\n      var primes = this.node.getProperty('primes');\n\n      if (primes) {\n        return (0, string_js_1.unicodeChars)(primes);\n      }\n\n      if (chars.length === 1) {\n        var parent_1 = this.node.coreParent().parent;\n        var isAccent = this.isAccent && !parent_1.isKind('mrow');\n        var map = isAccent ? 'accent' : 'mo';\n        var text = this.font.getRemappedChar(map, chars[0]);\n\n        if (text) {\n          chars = this.unicodeChars(text, this.variant);\n        }\n      }\n\n      return chars;\n    };\n\n    return class_1;\n  }(Base);\n}\n\nexports.CommonMoMixin = CommonMoMixin;","map":{"version":3,"mappings":"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","names":["exports","_a","CommonMoMixin","Base","__extends","args","_this","isAccent","node","class_1","bbox","_recompute","protoBBox","attributes","get","stretch","dir","d","getCenterOffset","h","getProperty","size","w","stretchy","getStretchedVariant","_super","computeBBox","call","copySkewIC","BBox_js_1","empty","font","params","axis_height","variant","getExplicit","getVariant","direction","c","getText","Array","from","length","delim","getDelimiter","codePointAt","FontData_js_1","WH","exact","D","getWH","min","getSize","max","Infinity","mathaccent","Math","df","delimiterfactor","ds","delimitershortfall","m","i","sizes","_c","getSizeVariant","schar","__assign","invalidateBBox","getStretchBBox","checkExtendedHeight","name","value","isSet","length2em","H","a","WHD","C","hasOwnProperty","HDW","getBaseline","HD","hasWHD","symmetric","ch","cd","fullExt","extSize","endSize","n","ceil","chars","primes","parent_1","coreParent","parent","isKind","map","text","getRemappedChar","unicodeChars"],"sourceRoot":"","sources":["../../../../ts/output/common/Wrappers/mo.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}