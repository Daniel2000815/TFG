{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\CustomNodes\\\\CustomNode.js\";\nimport React, { memo, useEffect, useContext } from 'react';\nimport Shader from '../CustomComponents/Shader';\nimport { useTheme } from '@mui/material/styles';\nimport Dropdown from '../CustomComponents/Dropdown';\nimport CustomHandle from './CustomHandle';\nimport GraphContext from '../GraphPage/GraphContext.js';\nimport ToggleButton from '../CustomComponents/ToggleButton';\nimport newId from '../uniqueIdHook';\nfunction CustomNode(props) {\n  var _React$useState = React.useState(true),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    showMore = _React$useState2[0],\n    setShowMore = _React$useState2[1];\n  var _React$useState3 = React.useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    isHover = _React$useState4[0],\n    setIsHover = _React$useState4[1];\n  var sharedFunctions = useContext(GraphContext);\n  var theme = useTheme();\n  var width = 200;\n  var nodeStyle = {\n    position: 'relative',\n    width: \"\".concat(width, \"px\"),\n    display: 'flex',\n    flexDirection: 'column',\n    transition: 'border 300ms ease',\n    borderRadius: '0px 0px 0px 0px',\n    backgroundColor: '#fff',\n    boxShadow: isHover ? '0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)' : '0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)',\n    border: isHover ? \"1px solid \".concat(theme.palette.primary.dark) : \"1px solid \".concat(theme.palette.primary.main),\n    '&:hover': {\n      transition: 'box-shadow 200ms ease',\n      boxShadow: '0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)',\n      border: \"1px solid \".concat(theme.palette.primary.dark)\n    }\n  };\n  var headerStyle = {\n    height: showMore ? '20px' : '40px',\n    width: \"\".concat(width, \"px\"),\n    color: '#EFF7FF',\n    borderRadius: '5px 5px 0px 0px',\n    textAlign: 'center',\n    fontWeight: '600',\n    fontSize: showMore ? '14px' : '24px',\n    letterSpacing: '0.1px',\n    justifyContent: 'flex-start',\n    backgroundColor: \"\".concat(theme.palette.primary.main)\n  };\n  var footerStyle = {\n    height: '20px',\n    width: \"\".concat(width, \"px\"),\n    color: '#EFF7FF',\n    borderRadius: '0px 0px 5px 5px',\n    backgroundColor: \"\".concat(theme.palette.primary.main)\n  };\n  var handleMouseEnter = function handleMouseEnter() {\n    setIsHover(true);\n  };\n  var handleMouseLeave = function handleMouseLeave() {\n    setIsHover(false);\n  };\n  useEffect(function () {\n    console.log(\"SDF DE \".concat(props.id, \" MODIFICADO\"));\n    sharedFunctions.updateNodeSdf(props.id, props.sdf);\n  }, [props.sdf]);\n  useEffect(function () {\n    var handleKeyDown = function handleKeyDown(e) {\n      if (e.key.toLowerCase() === 's') setShowMore(!showMore);\n    };\n    document.addEventListener('keydown', handleKeyDown);\n    return function () {\n      return document.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [showMore]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    tabIndex: \"0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nodeHeader\",\n    style: headerStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }\n  }, showMore ? props.title : props.currOption), showMore ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"nodeBody\",\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave,\n    style: nodeStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }\n  }, props.dropdownOptions ? /*#__PURE__*/React.createElement(Dropdown, {\n    defaultValue: props.dropdownOptions[0],\n    onChange: props.onChangeOption,\n    items: props.dropdownOptions,\n    label: props.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }) : null, showMore ? /*#__PURE__*/React.createElement(React.Fragment, null, props.body, /*#__PURE__*/React.createElement(Shader, {\n    sdf: props.sdf,\n    style: {\n      margin: '10px',\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  })) : null) : null, /*#__PURE__*/React.createElement(\"div\", {\n    style: footerStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ToggleButton, {\n    value: showMore,\n    onClick: function onClick() {\n      return setShowMore(!showMore);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  })), _toConsumableArray(Array(props.nInputs)).map(function (e, i) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: newId('targetHandleContainer_'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CustomHandle, {\n      type: \"target\",\n      style: {\n        top: \"\".concat(50 - (props.nInputs - 1) / 2 * 5 + i * 5, \"%\")\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }\n    }));\n  }), /*#__PURE__*/React.createElement(CustomHandle, {\n    type: \"source\",\n    onConnect: function onConnect(params) {\n      return console.log('handle onsConnect', params);\n    },\n    style: {\n      top: '50%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }\n  }));\n}\nexport default memo(CustomNode);","map":{"version":3,"names":["React","memo","useEffect","useContext","Shader","useTheme","Dropdown","CustomHandle","GraphContext","ToggleButton","newId","CustomNode","props","useState","showMore","setShowMore","isHover","setIsHover","sharedFunctions","theme","width","nodeStyle","position","display","flexDirection","transition","borderRadius","backgroundColor","boxShadow","border","palette","primary","dark","main","headerStyle","height","color","textAlign","fontWeight","fontSize","letterSpacing","justifyContent","footerStyle","handleMouseEnter","handleMouseLeave","console","log","id","updateNodeSdf","sdf","handleKeyDown","e","key","toLowerCase","document","addEventListener","removeEventListener","title","currOption","dropdownOptions","onChangeOption","body","margin","Array","nInputs","map","i","top","params"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/CustomNodes/CustomNode.js"],"sourcesContent":["import React, { memo, useEffect, useContext } from 'react';\r\nimport Shader from '../CustomComponents/Shader';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport Dropdown from '../CustomComponents/Dropdown';\r\nimport CustomHandle from './CustomHandle';\r\nimport GraphContext from '../GraphPage/GraphContext.js';\r\nimport ToggleButton from '../CustomComponents/ToggleButton';\r\nimport newId from '../uniqueIdHook';\r\n\r\nfunction CustomNode(props) {\r\n  const [showMore, setShowMore] = React.useState(true);\r\n  const [isHover, setIsHover] = React.useState(false);\r\n\r\n  const sharedFunctions = useContext(GraphContext);\r\n  const theme = useTheme();\r\n  const width = 200;\r\n\r\n  const nodeStyle = {\r\n    position: 'relative',\r\n    width: `${width}px`,\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    transition: 'border 300ms ease',\r\n    borderRadius: '0px 0px 0px 0px',\r\n    backgroundColor: '#fff',\r\n\r\n    boxShadow: isHover\r\n      ? '0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)'\r\n      : '0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23)',\r\n\r\n    border: isHover\r\n      ? `1px solid ${theme.palette.primary.dark}`\r\n      : `1px solid ${theme.palette.primary.main}`,\r\n\r\n    '&:hover': {\r\n      transition: 'box-shadow 200ms ease',\r\n      boxShadow:\r\n        '0 6px 12px rgba(0, 0, 0, 0.25), 0 6px 12px rgba(0, 0, 0, 0.25)',\r\n      border: `1px solid ${theme.palette.primary.dark}`,\r\n    },\r\n  };\r\n\r\n  const headerStyle = {\r\n    height: showMore ? '20px' : '40px',\r\n    width: `${width}px`,\r\n    color: '#EFF7FF',\r\n    borderRadius: '5px 5px 0px 0px',\r\n    textAlign: 'center',\r\n    fontWeight: '600',\r\n    fontSize: showMore ? '14px' : '24px',\r\n    letterSpacing: '0.1px',\r\n    justifyContent: 'flex-start',\r\n    backgroundColor: `${theme.palette.primary.main}`,\r\n  };\r\n\r\n  const footerStyle = {\r\n    height: '20px',\r\n    width: `${width}px`,\r\n    color: '#EFF7FF',\r\n    borderRadius: '0px 0px 5px 5px',\r\n    backgroundColor: `${theme.palette.primary.main}`,\r\n  };\r\n\r\n  const handleMouseEnter = () => {\r\n    setIsHover(true);\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    setIsHover(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(`SDF DE ${props.id} MODIFICADO`);\r\n    sharedFunctions.updateNodeSdf(props.id, props.sdf);\r\n  }, [props.sdf]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (e) => {\r\n      if (e.key.toLowerCase() === 's') setShowMore(!showMore);\r\n    };\r\n\r\n    document.addEventListener('keydown', handleKeyDown);\r\n    return () => document.removeEventListener('keydown', handleKeyDown);\r\n  }, [showMore]);\r\n\r\n  return (\r\n    <div tabIndex=\"0\">\r\n      <div className=\"nodeHeader\" style={headerStyle}>\r\n        {showMore ? props.title : props.currOption}\r\n      </div>\r\n      {showMore ? (\r\n        <div\r\n          className=\"nodeBody\"\r\n          onMouseEnter={handleMouseEnter}\r\n          onMouseLeave={handleMouseLeave}\r\n          style={nodeStyle}\r\n        >\r\n          {props.dropdownOptions ? (\r\n            <Dropdown\r\n              defaultValue={props.dropdownOptions[0]}\r\n              onChange={props.onChangeOption}\r\n              items={props.dropdownOptions}\r\n              label={props.title}\r\n            />\r\n          ) : null}\r\n\r\n          {showMore ? (\r\n            <>\r\n              {/* <p >{`ID: ${props.id}`}</p>\r\n              <p>\r\n                CHILDREN:{\" \"}\r\n                {Object.keys(props.data.children)\r\n                  .map((key) => `${props.data.children[key]}`)\r\n                  .join(\", \")}\r\n              </p>\r\n              <p>{`SDF: ${props.sdf}`}</p> */}\r\n\r\n              {props.body}\r\n              <Shader\r\n                sdf={props.sdf}\r\n                style={{ margin: '10px', height: '100%' }}\r\n              />\r\n            </>\r\n          ) : null}\r\n        </div>\r\n      ) : null}\r\n\r\n      <div style={footerStyle}>\r\n        <ToggleButton value={showMore} onClick={() => setShowMore(!showMore)} />\r\n      </div>\r\n\r\n      {/* {[...Array(props.nInputs)].map((e, i) =>\r\n        <CustomHandle\r\n          type=\"target\"\r\n          style={{ top: `${50 - ((props.nInputs - 1) / 2) * 5 + i * 5}%` }}\r\n        />\r\n      )\r\n      } */}\r\n\r\n      {[...Array(props.nInputs)].map(function (e, i) {\r\n        return (\r\n          <div key={newId('targetHandleContainer_')}>\r\n            <CustomHandle\r\n              type=\"target\"\r\n              style={{ top: `${50 - ((props.nInputs - 1) / 2) * 5 + i * 5}%` }}\r\n            />\r\n          </div>\r\n        );\r\n      })}\r\n\r\n      <CustomHandle\r\n        type=\"source\"\r\n        onConnect={(params) => console.log('handle onsConnect', params)}\r\n        style={{ top: '50%' }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default memo(CustomNode);"],"mappings":"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"},"metadata":{},"sourceType":"module"}