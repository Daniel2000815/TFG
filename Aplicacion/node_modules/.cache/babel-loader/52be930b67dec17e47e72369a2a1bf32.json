{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n    desc = {\n      enumerable: true,\n      get: function get() {\n        return m[k];\n      }\n    };\n  }\n\n  Object.defineProperty(o, k2, desc);\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nvar __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar sitem = __importStar(require(\"./BaseItems.js\"));\n\nvar NodeUtil_js_1 = __importDefault(require(\"../NodeUtil.js\"));\n\nvar TexError_js_1 = __importDefault(require(\"../TexError.js\"));\n\nvar TexParser_js_1 = __importDefault(require(\"../TexParser.js\"));\n\nvar TexConstants_js_1 = require(\"../TexConstants.js\");\n\nvar ParseUtil_js_1 = __importDefault(require(\"../ParseUtil.js\"));\n\nvar MmlNode_js_1 = require(\"../../../core/MmlTree/MmlNode.js\");\n\nvar Tags_js_1 = require(\"../Tags.js\");\n\nvar lengths_js_1 = require(\"../../../util/lengths.js\");\n\nvar Entities_js_1 = require(\"../../../util/Entities.js\");\n\nvar Options_js_1 = require(\"../../../util/Options.js\");\n\nvar BaseMethods = {};\nvar P_HEIGHT = 1.2 / .85;\nvar MmlTokenAllow = {\n  fontfamily: 1,\n  fontsize: 1,\n  fontweight: 1,\n  fontstyle: 1,\n  color: 1,\n  background: 1,\n  id: 1,\n  'class': 1,\n  href: 1,\n  style: 1\n};\n\nBaseMethods.Open = function (parser, _c) {\n  parser.Push(parser.itemFactory.create('open'));\n};\n\nBaseMethods.Close = function (parser, _c) {\n  parser.Push(parser.itemFactory.create('close'));\n};\n\nBaseMethods.Tilde = function (parser, _c) {\n  parser.Push(parser.create('token', 'mtext', {}, Entities_js_1.entities.nbsp));\n};\n\nBaseMethods.Space = function (_parser, _c) {};\n\nBaseMethods.Superscript = function (parser, _c) {\n  var _a;\n\n  if (parser.GetNext().match(/\\d/)) {\n    parser.string = parser.string.substr(0, parser.i + 1) + ' ' + parser.string.substr(parser.i + 1);\n  }\n\n  var primes;\n  var base;\n  var top = parser.stack.Top();\n\n  if (top.isKind('prime')) {\n    _a = __read(top.Peek(2), 2), base = _a[0], primes = _a[1];\n    parser.stack.Pop();\n  } else {\n    base = parser.stack.Prev();\n\n    if (!base) {\n      base = parser.create('token', 'mi', {}, '');\n    }\n  }\n\n  var movesupsub = NodeUtil_js_1.default.getProperty(base, 'movesupsub');\n  var position = NodeUtil_js_1.default.isType(base, 'msubsup') ? base.sup : base.over;\n\n  if (NodeUtil_js_1.default.isType(base, 'msubsup') && !NodeUtil_js_1.default.isType(base, 'msup') && NodeUtil_js_1.default.getChildAt(base, base.sup) || NodeUtil_js_1.default.isType(base, 'munderover') && !NodeUtil_js_1.default.isType(base, 'mover') && NodeUtil_js_1.default.getChildAt(base, base.over) && !NodeUtil_js_1.default.getProperty(base, 'subsupOK')) {\n    throw new TexError_js_1.default('DoubleExponent', 'Double exponent: use braces to clarify');\n  }\n\n  if (!NodeUtil_js_1.default.isType(base, 'msubsup') || NodeUtil_js_1.default.isType(base, 'msup')) {\n    if (movesupsub) {\n      if (!NodeUtil_js_1.default.isType(base, 'munderover') || NodeUtil_js_1.default.isType(base, 'mover') || NodeUtil_js_1.default.getChildAt(base, base.over)) {\n        base = parser.create('node', 'munderover', [base], {\n          movesupsub: true\n        });\n      }\n\n      position = base.over;\n    } else {\n      base = parser.create('node', 'msubsup', [base]);\n      position = base.sup;\n    }\n  }\n\n  parser.Push(parser.itemFactory.create('subsup', base).setProperties({\n    position: position,\n    primes: primes,\n    movesupsub: movesupsub\n  }));\n};\n\nBaseMethods.Subscript = function (parser, _c) {\n  var _a;\n\n  if (parser.GetNext().match(/\\d/)) {\n    parser.string = parser.string.substr(0, parser.i + 1) + ' ' + parser.string.substr(parser.i + 1);\n  }\n\n  var primes, base;\n  var top = parser.stack.Top();\n\n  if (top.isKind('prime')) {\n    _a = __read(top.Peek(2), 2), base = _a[0], primes = _a[1];\n    parser.stack.Pop();\n  } else {\n    base = parser.stack.Prev();\n\n    if (!base) {\n      base = parser.create('token', 'mi', {}, '');\n    }\n  }\n\n  var movesupsub = NodeUtil_js_1.default.getProperty(base, 'movesupsub');\n  var position = NodeUtil_js_1.default.isType(base, 'msubsup') ? base.sub : base.under;\n\n  if (NodeUtil_js_1.default.isType(base, 'msubsup') && !NodeUtil_js_1.default.isType(base, 'msup') && NodeUtil_js_1.default.getChildAt(base, base.sub) || NodeUtil_js_1.default.isType(base, 'munderover') && !NodeUtil_js_1.default.isType(base, 'mover') && NodeUtil_js_1.default.getChildAt(base, base.under) && !NodeUtil_js_1.default.getProperty(base, 'subsupOK')) {\n    throw new TexError_js_1.default('DoubleSubscripts', 'Double subscripts: use braces to clarify');\n  }\n\n  if (!NodeUtil_js_1.default.isType(base, 'msubsup') || NodeUtil_js_1.default.isType(base, 'msup')) {\n    if (movesupsub) {\n      if (!NodeUtil_js_1.default.isType(base, 'munderover') || NodeUtil_js_1.default.isType(base, 'mover') || NodeUtil_js_1.default.getChildAt(base, base.under)) {\n        base = parser.create('node', 'munderover', [base], {\n          movesupsub: true\n        });\n      }\n\n      position = base.under;\n    } else {\n      base = parser.create('node', 'msubsup', [base]);\n      position = base.sub;\n    }\n  }\n\n  parser.Push(parser.itemFactory.create('subsup', base).setProperties({\n    position: position,\n    primes: primes,\n    movesupsub: movesupsub\n  }));\n};\n\nBaseMethods.Prime = function (parser, c) {\n  var base = parser.stack.Prev();\n\n  if (!base) {\n    base = parser.create('node', 'mi');\n  }\n\n  if (NodeUtil_js_1.default.isType(base, 'msubsup') && !NodeUtil_js_1.default.isType(base, 'msup') && NodeUtil_js_1.default.getChildAt(base, base.sup)) {\n    throw new TexError_js_1.default('DoubleExponentPrime', 'Prime causes double exponent: use braces to clarify');\n  }\n\n  var sup = '';\n  parser.i--;\n\n  do {\n    sup += Entities_js_1.entities.prime;\n    parser.i++, c = parser.GetNext();\n  } while (c === '\\'' || c === Entities_js_1.entities.rsquo);\n\n  sup = ['', \"\\u2032\", \"\\u2033\", \"\\u2034\", \"\\u2057\"][sup.length] || sup;\n  var node = parser.create('token', 'mo', {\n    variantForm: true\n  }, sup);\n  parser.Push(parser.itemFactory.create('prime', base, node));\n};\n\nBaseMethods.Comment = function (parser, _c) {\n  while (parser.i < parser.string.length && parser.string.charAt(parser.i) !== '\\n') {\n    parser.i++;\n  }\n};\n\nBaseMethods.Hash = function (_parser, _c) {\n  throw new TexError_js_1.default('CantUseHash1', 'You can\\'t use \\'macro parameter character #\\' in math mode');\n};\n\nBaseMethods.MathFont = function (parser, name, variant) {\n  var text = parser.GetArgument(name);\n  var mml = new TexParser_js_1.default(text, __assign(__assign({}, parser.stack.env), {\n    font: variant,\n    multiLetterIdentifiers: /^[a-zA-Z]+/,\n    noAutoOP: true\n  }), parser.configuration).mml();\n  parser.Push(parser.create('node', 'TeXAtom', [mml]));\n};\n\nBaseMethods.SetFont = function (parser, _name, font) {\n  parser.stack.env['font'] = font;\n};\n\nBaseMethods.SetStyle = function (parser, _name, texStyle, style, level) {\n  parser.stack.env['style'] = texStyle;\n  parser.stack.env['level'] = level;\n  parser.Push(parser.itemFactory.create('style').setProperty('styles', {\n    displaystyle: style,\n    scriptlevel: level\n  }));\n};\n\nBaseMethods.SetSize = function (parser, _name, size) {\n  parser.stack.env['size'] = size;\n  parser.Push(parser.itemFactory.create('style').setProperty('styles', {\n    mathsize: (0, lengths_js_1.em)(size)\n  }));\n};\n\nBaseMethods.Spacer = function (parser, _name, space) {\n  var node = parser.create('node', 'mspace', [], {\n    width: (0, lengths_js_1.em)(space)\n  });\n  var style = parser.create('node', 'mstyle', [node], {\n    scriptlevel: 0\n  });\n  parser.Push(style);\n};\n\nBaseMethods.LeftRight = function (parser, name) {\n  var first = name.substr(1);\n  parser.Push(parser.itemFactory.create(first, parser.GetDelimiter(name), parser.stack.env.color));\n};\n\nBaseMethods.NamedFn = function (parser, name, id) {\n  if (!id) {\n    id = name.substr(1);\n  }\n\n  var mml = parser.create('token', 'mi', {\n    texClass: MmlNode_js_1.TEXCLASS.OP\n  }, id);\n  parser.Push(parser.itemFactory.create('fn', mml));\n};\n\nBaseMethods.NamedOp = function (parser, name, id) {\n  if (!id) {\n    id = name.substr(1);\n  }\n\n  id = id.replace(/&thinsp;/, \"\\u2006\");\n  var mml = parser.create('token', 'mo', {\n    movablelimits: true,\n    movesupsub: true,\n    form: TexConstants_js_1.TexConstant.Form.PREFIX,\n    texClass: MmlNode_js_1.TEXCLASS.OP\n  }, id);\n  parser.Push(mml);\n};\n\nBaseMethods.Limits = function (parser, _name, limits) {\n  var op = parser.stack.Prev(true);\n\n  if (!op || NodeUtil_js_1.default.getTexClass(NodeUtil_js_1.default.getCoreMO(op)) !== MmlNode_js_1.TEXCLASS.OP && NodeUtil_js_1.default.getProperty(op, 'movesupsub') == null) {\n    throw new TexError_js_1.default('MisplacedLimits', '%1 is allowed only on operators', parser.currentCS);\n  }\n\n  var top = parser.stack.Top();\n  var node;\n\n  if (NodeUtil_js_1.default.isType(op, 'munderover') && !limits) {\n    node = parser.create('node', 'msubsup');\n    NodeUtil_js_1.default.copyChildren(op, node);\n    op = top.Last = node;\n  } else if (NodeUtil_js_1.default.isType(op, 'msubsup') && limits) {\n    node = parser.create('node', 'munderover');\n    NodeUtil_js_1.default.copyChildren(op, node);\n    op = top.Last = node;\n  }\n\n  NodeUtil_js_1.default.setProperty(op, 'movesupsub', limits ? true : false);\n  NodeUtil_js_1.default.setProperties(NodeUtil_js_1.default.getCoreMO(op), {\n    'movablelimits': false\n  });\n\n  if (NodeUtil_js_1.default.getAttribute(op, 'movablelimits') || NodeUtil_js_1.default.getProperty(op, 'movablelimits')) {\n    NodeUtil_js_1.default.setProperties(op, {\n      'movablelimits': false\n    });\n  }\n};\n\nBaseMethods.Over = function (parser, name, open, close) {\n  var mml = parser.itemFactory.create('over').setProperty('name', parser.currentCS);\n\n  if (open || close) {\n    mml.setProperty('open', open);\n    mml.setProperty('close', close);\n  } else if (name.match(/withdelims$/)) {\n    mml.setProperty('open', parser.GetDelimiter(name));\n    mml.setProperty('close', parser.GetDelimiter(name));\n  }\n\n  if (name.match(/^\\\\above/)) {\n    mml.setProperty('thickness', parser.GetDimen(name));\n  } else if (name.match(/^\\\\atop/) || open || close) {\n    mml.setProperty('thickness', 0);\n  }\n\n  parser.Push(mml);\n};\n\nBaseMethods.Frac = function (parser, name) {\n  var num = parser.ParseArg(name);\n  var den = parser.ParseArg(name);\n  var node = parser.create('node', 'mfrac', [num, den]);\n  parser.Push(node);\n};\n\nBaseMethods.Sqrt = function (parser, name) {\n  var n = parser.GetBrackets(name);\n  var arg = parser.GetArgument(name);\n\n  if (arg === '\\\\frac') {\n    arg += '{' + parser.GetArgument(arg) + '}{' + parser.GetArgument(arg) + '}';\n  }\n\n  var mml = new TexParser_js_1.default(arg, parser.stack.env, parser.configuration).mml();\n\n  if (!n) {\n    mml = parser.create('node', 'msqrt', [mml]);\n  } else {\n    mml = parser.create('node', 'mroot', [mml, parseRoot(parser, n)]);\n  }\n\n  parser.Push(mml);\n};\n\nfunction parseRoot(parser, n) {\n  var env = parser.stack.env;\n  var inRoot = env['inRoot'];\n  env['inRoot'] = true;\n  var newParser = new TexParser_js_1.default(n, env, parser.configuration);\n  var node = newParser.mml();\n  var global = newParser.stack.global;\n\n  if (global['leftRoot'] || global['upRoot']) {\n    var def = {};\n\n    if (global['leftRoot']) {\n      def['width'] = global['leftRoot'];\n    }\n\n    if (global['upRoot']) {\n      def['voffset'] = global['upRoot'];\n      def['height'] = global['upRoot'];\n    }\n\n    node = parser.create('node', 'mpadded', [node], def);\n  }\n\n  env['inRoot'] = inRoot;\n  return node;\n}\n\nBaseMethods.Root = function (parser, name) {\n  var n = parser.GetUpTo(name, '\\\\of');\n  var arg = parser.ParseArg(name);\n  var node = parser.create('node', 'mroot', [arg, parseRoot(parser, n)]);\n  parser.Push(node);\n};\n\nBaseMethods.MoveRoot = function (parser, name, id) {\n  if (!parser.stack.env['inRoot']) {\n    throw new TexError_js_1.default('MisplacedMoveRoot', '%1 can appear only within a root', parser.currentCS);\n  }\n\n  if (parser.stack.global[id]) {\n    throw new TexError_js_1.default('MultipleMoveRoot', 'Multiple use of %1', parser.currentCS);\n  }\n\n  var n = parser.GetArgument(name);\n\n  if (!n.match(/-?[0-9]+/)) {\n    throw new TexError_js_1.default('IntegerArg', 'The argument to %1 must be an integer', parser.currentCS);\n  }\n\n  n = parseInt(n, 10) / 15 + 'em';\n\n  if (n.substr(0, 1) !== '-') {\n    n = '+' + n;\n  }\n\n  parser.stack.global[id] = n;\n};\n\nBaseMethods.Accent = function (parser, name, accent, stretchy) {\n  var c = parser.ParseArg(name);\n\n  var def = __assign(__assign({}, ParseUtil_js_1.default.getFontDef(parser)), {\n    accent: true,\n    mathaccent: true\n  });\n\n  var entity = NodeUtil_js_1.default.createEntity(accent);\n  var moNode = parser.create('token', 'mo', def, entity);\n  var mml = moNode;\n  NodeUtil_js_1.default.setAttribute(mml, 'stretchy', stretchy ? true : false);\n  var mo = NodeUtil_js_1.default.isEmbellished(c) ? NodeUtil_js_1.default.getCoreMO(c) : c;\n\n  if (NodeUtil_js_1.default.isType(mo, 'mo') || NodeUtil_js_1.default.getProperty(mo, 'movablelimits')) {\n    NodeUtil_js_1.default.setProperties(mo, {\n      'movablelimits': false\n    });\n  }\n\n  var muoNode = parser.create('node', 'munderover');\n  NodeUtil_js_1.default.setChild(muoNode, 0, c);\n  NodeUtil_js_1.default.setChild(muoNode, 1, null);\n  NodeUtil_js_1.default.setChild(muoNode, 2, mml);\n  var texAtom = parser.create('node', 'TeXAtom', [muoNode]);\n  parser.Push(texAtom);\n};\n\nBaseMethods.UnderOver = function (parser, name, c, stack) {\n  var entity = NodeUtil_js_1.default.createEntity(c);\n  var mo = parser.create('token', 'mo', {\n    stretchy: true,\n    accent: true\n  }, entity);\n  var pos = name.charAt(1) === 'o' ? 'over' : 'under';\n  var base = parser.ParseArg(name);\n  parser.Push(ParseUtil_js_1.default.underOver(parser, base, mo, pos, stack));\n};\n\nBaseMethods.Overset = function (parser, name) {\n  var top = parser.ParseArg(name);\n  var base = parser.ParseArg(name);\n  ParseUtil_js_1.default.checkMovableLimits(base);\n\n  if (top.isKind('mo')) {\n    NodeUtil_js_1.default.setAttribute(top, 'accent', false);\n  }\n\n  var node = parser.create('node', 'mover', [base, top]);\n  parser.Push(node);\n};\n\nBaseMethods.Underset = function (parser, name) {\n  var bot = parser.ParseArg(name);\n  var base = parser.ParseArg(name);\n  ParseUtil_js_1.default.checkMovableLimits(base);\n\n  if (bot.isKind('mo')) {\n    NodeUtil_js_1.default.setAttribute(bot, 'accent', false);\n  }\n\n  var node = parser.create('node', 'munder', [base, bot], {\n    accentunder: false\n  });\n  parser.Push(node);\n};\n\nBaseMethods.Overunderset = function (parser, name) {\n  var top = parser.ParseArg(name);\n  var bot = parser.ParseArg(name);\n  var base = parser.ParseArg(name);\n  ParseUtil_js_1.default.checkMovableLimits(base);\n\n  if (top.isKind('mo')) {\n    NodeUtil_js_1.default.setAttribute(top, 'accent', false);\n  }\n\n  if (bot.isKind('mo')) {\n    NodeUtil_js_1.default.setAttribute(bot, 'accent', false);\n  }\n\n  var node = parser.create('node', 'munderover', [base, bot, top], {\n    accent: false,\n    accentunder: false\n  });\n  parser.Push(node);\n};\n\nBaseMethods.TeXAtom = function (parser, name, mclass) {\n  var def = {\n    texClass: mclass\n  };\n  var mml;\n  var node;\n  var parsed;\n\n  if (mclass === MmlNode_js_1.TEXCLASS.OP) {\n    def['movesupsub'] = def['movablelimits'] = true;\n    var arg = parser.GetArgument(name);\n    var match = arg.match(/^\\s*\\\\rm\\s+([a-zA-Z0-9 ]+)$/);\n\n    if (match) {\n      def['mathvariant'] = TexConstants_js_1.TexConstant.Variant.NORMAL;\n      node = parser.create('token', 'mi', def, match[1]);\n    } else {\n      parsed = new TexParser_js_1.default(arg, parser.stack.env, parser.configuration).mml();\n      node = parser.create('node', 'TeXAtom', [parsed], def);\n    }\n\n    mml = parser.itemFactory.create('fn', node);\n  } else {\n    parsed = parser.ParseArg(name);\n    mml = parser.create('node', 'TeXAtom', [parsed], def);\n  }\n\n  parser.Push(mml);\n};\n\nBaseMethods.MmlToken = function (parser, name) {\n  var kind = parser.GetArgument(name);\n  var attr = parser.GetBrackets(name, '').replace(/^\\s+/, '');\n  var text = parser.GetArgument(name);\n  var def = {};\n  var keep = [];\n  var node;\n\n  try {\n    node = parser.create('node', kind);\n  } catch (e) {\n    node = null;\n  }\n\n  if (!node || !node.isToken) {\n    throw new TexError_js_1.default('NotMathMLToken', '%1 is not a token element', kind);\n  }\n\n  while (attr !== '') {\n    var match = attr.match(/^([a-z]+)\\s*=\\s*('[^']*'|\"[^\"]*\"|[^ ,]*)\\s*,?\\s*/i);\n\n    if (!match) {\n      throw new TexError_js_1.default('InvalidMathMLAttr', 'Invalid MathML attribute: %1', attr);\n    }\n\n    if (!node.attributes.hasDefault(match[1]) && !MmlTokenAllow[match[1]]) {\n      throw new TexError_js_1.default('UnknownAttrForElement', '%1 is not a recognized attribute for %2', match[1], kind);\n    }\n\n    var value = ParseUtil_js_1.default.MmlFilterAttribute(parser, match[1], match[2].replace(/^(['\"])(.*)\\1$/, '$2'));\n\n    if (value) {\n      if (value.toLowerCase() === 'true') {\n        value = true;\n      } else if (value.toLowerCase() === 'false') {\n        value = false;\n      }\n\n      def[match[1]] = value;\n      keep.push(match[1]);\n    }\n\n    attr = attr.substr(match[0].length);\n  }\n\n  if (keep.length) {\n    def['mjx-keep-attrs'] = keep.join(' ');\n  }\n\n  var textNode = parser.create('text', text);\n  node.appendChild(textNode);\n  NodeUtil_js_1.default.setProperties(node, def);\n  parser.Push(node);\n};\n\nBaseMethods.Strut = function (parser, _name) {\n  var row = parser.create('node', 'mrow');\n  var padded = parser.create('node', 'mpadded', [row], {\n    height: '8.6pt',\n    depth: '3pt',\n    width: 0\n  });\n  parser.Push(padded);\n};\n\nBaseMethods.Phantom = function (parser, name, v, h) {\n  var box = parser.create('node', 'mphantom', [parser.ParseArg(name)]);\n\n  if (v || h) {\n    box = parser.create('node', 'mpadded', [box]);\n\n    if (h) {\n      NodeUtil_js_1.default.setAttribute(box, 'height', 0);\n      NodeUtil_js_1.default.setAttribute(box, 'depth', 0);\n    }\n\n    if (v) {\n      NodeUtil_js_1.default.setAttribute(box, 'width', 0);\n    }\n  }\n\n  var atom = parser.create('node', 'TeXAtom', [box]);\n  parser.Push(atom);\n};\n\nBaseMethods.Smash = function (parser, name) {\n  var bt = ParseUtil_js_1.default.trimSpaces(parser.GetBrackets(name, ''));\n  var smash = parser.create('node', 'mpadded', [parser.ParseArg(name)]);\n\n  switch (bt) {\n    case 'b':\n      NodeUtil_js_1.default.setAttribute(smash, 'depth', 0);\n      break;\n\n    case 't':\n      NodeUtil_js_1.default.setAttribute(smash, 'height', 0);\n      break;\n\n    default:\n      NodeUtil_js_1.default.setAttribute(smash, 'height', 0);\n      NodeUtil_js_1.default.setAttribute(smash, 'depth', 0);\n  }\n\n  var atom = parser.create('node', 'TeXAtom', [smash]);\n  parser.Push(atom);\n};\n\nBaseMethods.Lap = function (parser, name) {\n  var mml = parser.create('node', 'mpadded', [parser.ParseArg(name)], {\n    width: 0\n  });\n\n  if (name === '\\\\llap') {\n    NodeUtil_js_1.default.setAttribute(mml, 'lspace', '-1width');\n  }\n\n  var atom = parser.create('node', 'TeXAtom', [mml]);\n  parser.Push(atom);\n};\n\nBaseMethods.RaiseLower = function (parser, name) {\n  var h = parser.GetDimen(name);\n  var item = parser.itemFactory.create('position').setProperties({\n    name: parser.currentCS,\n    move: 'vertical'\n  });\n\n  if (h.charAt(0) === '-') {\n    h = h.slice(1);\n    name = name.substr(1) === 'raise' ? '\\\\lower' : '\\\\raise';\n  }\n\n  if (name === '\\\\lower') {\n    item.setProperty('dh', '-' + h);\n    item.setProperty('dd', '+' + h);\n  } else {\n    item.setProperty('dh', '+' + h);\n    item.setProperty('dd', '-' + h);\n  }\n\n  parser.Push(item);\n};\n\nBaseMethods.MoveLeftRight = function (parser, name) {\n  var h = parser.GetDimen(name);\n  var nh = h.charAt(0) === '-' ? h.slice(1) : '-' + h;\n\n  if (name === '\\\\moveleft') {\n    var tmp = h;\n    h = nh;\n    nh = tmp;\n  }\n\n  parser.Push(parser.itemFactory.create('position').setProperties({\n    name: parser.currentCS,\n    move: 'horizontal',\n    left: parser.create('node', 'mspace', [], {\n      width: h\n    }),\n    right: parser.create('node', 'mspace', [], {\n      width: nh\n    })\n  }));\n};\n\nBaseMethods.Hskip = function (parser, name) {\n  var node = parser.create('node', 'mspace', [], {\n    width: parser.GetDimen(name)\n  });\n  parser.Push(node);\n};\n\nBaseMethods.Nonscript = function (parser, _name) {\n  parser.Push(parser.itemFactory.create('nonscript'));\n};\n\nBaseMethods.Rule = function (parser, name, style) {\n  var w = parser.GetDimen(name),\n      h = parser.GetDimen(name),\n      d = parser.GetDimen(name);\n  var def = {\n    width: w,\n    height: h,\n    depth: d\n  };\n\n  if (style !== 'blank') {\n    def['mathbackground'] = parser.stack.env['color'] || 'black';\n  }\n\n  var node = parser.create('node', 'mspace', [], def);\n  parser.Push(node);\n};\n\nBaseMethods.rule = function (parser, name) {\n  var v = parser.GetBrackets(name),\n      w = parser.GetDimen(name),\n      h = parser.GetDimen(name);\n  var mml = parser.create('node', 'mspace', [], {\n    width: w,\n    height: h,\n    mathbackground: parser.stack.env['color'] || 'black'\n  });\n\n  if (v) {\n    mml = parser.create('node', 'mpadded', [mml], {\n      voffset: v\n    });\n\n    if (v.match(/^\\-/)) {\n      NodeUtil_js_1.default.setAttribute(mml, 'height', v);\n      NodeUtil_js_1.default.setAttribute(mml, 'depth', '+' + v.substr(1));\n    } else {\n      NodeUtil_js_1.default.setAttribute(mml, 'height', '+' + v);\n    }\n  }\n\n  parser.Push(mml);\n};\n\nBaseMethods.MakeBig = function (parser, name, mclass, size) {\n  size *= P_HEIGHT;\n  var sizeStr = String(size).replace(/(\\.\\d\\d\\d).+/, '$1') + 'em';\n  var delim = parser.GetDelimiter(name, true);\n  var mo = parser.create('token', 'mo', {\n    minsize: sizeStr,\n    maxsize: sizeStr,\n    fence: true,\n    stretchy: true,\n    symmetric: true\n  }, delim);\n  var node = parser.create('node', 'TeXAtom', [mo], {\n    texClass: mclass\n  });\n  parser.Push(node);\n};\n\nBaseMethods.BuildRel = function (parser, name) {\n  var top = parser.ParseUpTo(name, '\\\\over');\n  var bot = parser.ParseArg(name);\n  var node = parser.create('node', 'munderover');\n  NodeUtil_js_1.default.setChild(node, 0, bot);\n  NodeUtil_js_1.default.setChild(node, 1, null);\n  NodeUtil_js_1.default.setChild(node, 2, top);\n  var atom = parser.create('node', 'TeXAtom', [node], {\n    texClass: MmlNode_js_1.TEXCLASS.REL\n  });\n  parser.Push(atom);\n};\n\nBaseMethods.HBox = function (parser, name, style, font) {\n  parser.PushAll(ParseUtil_js_1.default.internalMath(parser, parser.GetArgument(name), style, font));\n};\n\nBaseMethods.FBox = function (parser, name) {\n  var internal = ParseUtil_js_1.default.internalMath(parser, parser.GetArgument(name));\n  var node = parser.create('node', 'menclose', internal, {\n    notation: 'box'\n  });\n  parser.Push(node);\n};\n\nBaseMethods.FrameBox = function (parser, name) {\n  var width = parser.GetBrackets(name);\n  var pos = parser.GetBrackets(name) || 'c';\n  var mml = ParseUtil_js_1.default.internalMath(parser, parser.GetArgument(name));\n\n  if (width) {\n    mml = [parser.create('node', 'mpadded', mml, {\n      width: width,\n      'data-align': (0, Options_js_1.lookup)(pos, {\n        l: 'left',\n        r: 'right'\n      }, 'center')\n    })];\n  }\n\n  var node = parser.create('node', 'TeXAtom', [parser.create('node', 'menclose', mml, {\n    notation: 'box'\n  })], {\n    texClass: MmlNode_js_1.TEXCLASS.ORD\n  });\n  parser.Push(node);\n};\n\nBaseMethods.Not = function (parser, _name) {\n  parser.Push(parser.itemFactory.create('not'));\n};\n\nBaseMethods.Dots = function (parser, _name) {\n  var ldotsEntity = NodeUtil_js_1.default.createEntity('2026');\n  var cdotsEntity = NodeUtil_js_1.default.createEntity('22EF');\n  var ldots = parser.create('token', 'mo', {\n    stretchy: false\n  }, ldotsEntity);\n  var cdots = parser.create('token', 'mo', {\n    stretchy: false\n  }, cdotsEntity);\n  parser.Push(parser.itemFactory.create('dots').setProperties({\n    ldots: ldots,\n    cdots: cdots\n  }));\n};\n\nBaseMethods.Matrix = function (parser, _name, open, close, align, spacing, vspacing, style, cases, numbered) {\n  var c = parser.GetNext();\n\n  if (c === '') {\n    throw new TexError_js_1.default('MissingArgFor', 'Missing argument for %1', parser.currentCS);\n  }\n\n  if (c === '{') {\n    parser.i++;\n  } else {\n    parser.string = c + '}' + parser.string.slice(parser.i + 1);\n    parser.i = 0;\n  }\n\n  var array = parser.itemFactory.create('array').setProperty('requireClose', true);\n  array.arraydef = {\n    rowspacing: vspacing || '4pt',\n    columnspacing: spacing || '1em'\n  };\n\n  if (cases) {\n    array.setProperty('isCases', true);\n  }\n\n  if (numbered) {\n    array.setProperty('isNumbered', true);\n    array.arraydef.side = numbered;\n  }\n\n  if (open || close) {\n    array.setProperty('open', open);\n    array.setProperty('close', close);\n  }\n\n  if (style === 'D') {\n    array.arraydef.displaystyle = true;\n  }\n\n  if (align != null) {\n    array.arraydef.columnalign = align;\n  }\n\n  parser.Push(array);\n};\n\nBaseMethods.Entry = function (parser, name) {\n  parser.Push(parser.itemFactory.create('cell').setProperties({\n    isEntry: true,\n    name: name\n  }));\n  var top = parser.stack.Top();\n  var env = top.getProperty('casesEnv');\n  var cases = top.getProperty('isCases');\n  if (!cases && !env) return;\n  var str = parser.string;\n  var braces = 0,\n      close = -1,\n      i = parser.i,\n      m = str.length;\n  var end = env ? new RegExp(\"^\\\\\\\\end\\\\s*\\\\{\".concat(env.replace(/\\*/, '\\\\*'), \"\\\\}\")) : null;\n\n  while (i < m) {\n    var c = str.charAt(i);\n\n    if (c === '{') {\n      braces++;\n      i++;\n    } else if (c === '}') {\n      if (braces === 0) {\n        m = 0;\n      } else {\n        braces--;\n\n        if (braces === 0 && close < 0) {\n          close = i - parser.i;\n        }\n\n        i++;\n      }\n    } else if (c === '&' && braces === 0) {\n      throw new TexError_js_1.default('ExtraAlignTab', 'Extra alignment tab in \\\\cases text');\n    } else if (c === '\\\\') {\n      var rest = str.substr(i);\n\n      if (rest.match(/^((\\\\cr)[^a-zA-Z]|\\\\\\\\)/) || end && rest.match(end)) {\n        m = 0;\n      } else {\n        i += 2;\n      }\n    } else {\n      i++;\n    }\n  }\n\n  var text = str.substr(parser.i, i - parser.i);\n\n  if (!text.match(/^\\s*\\\\text[^a-zA-Z]/) || close !== text.replace(/\\s+$/, '').length - 1) {\n    var internal = ParseUtil_js_1.default.internalMath(parser, ParseUtil_js_1.default.trimSpaces(text), 0);\n    parser.PushAll(internal);\n    parser.i = i;\n  }\n};\n\nBaseMethods.Cr = function (parser, name) {\n  parser.Push(parser.itemFactory.create('cell').setProperties({\n    isCR: true,\n    name: name\n  }));\n};\n\nBaseMethods.CrLaTeX = function (parser, name, nobrackets) {\n  if (nobrackets === void 0) {\n    nobrackets = false;\n  }\n\n  var n;\n\n  if (!nobrackets) {\n    if (parser.string.charAt(parser.i) === '*') {\n      parser.i++;\n    }\n\n    if (parser.string.charAt(parser.i) === '[') {\n      var dim = parser.GetBrackets(name, '');\n\n      var _a = __read(ParseUtil_js_1.default.matchDimen(dim), 2),\n          value = _a[0],\n          unit = _a[1];\n\n      if (dim && !value) {\n        throw new TexError_js_1.default('BracketMustBeDimension', 'Bracket argument to %1 must be a dimension', parser.currentCS);\n      }\n\n      n = value + unit;\n    }\n  }\n\n  parser.Push(parser.itemFactory.create('cell').setProperties({\n    isCR: true,\n    name: name,\n    linebreak: true\n  }));\n  var top = parser.stack.Top();\n  var node;\n\n  if (top instanceof sitem.ArrayItem) {\n    if (n) {\n      top.addRowSpacing(n);\n    }\n  } else {\n    if (n) {\n      node = parser.create('node', 'mspace', [], {\n        depth: n\n      });\n      parser.Push(node);\n    }\n\n    node = parser.create('node', 'mspace', [], {\n      linebreak: TexConstants_js_1.TexConstant.LineBreak.NEWLINE\n    });\n    parser.Push(node);\n  }\n};\n\nBaseMethods.HLine = function (parser, _name, style) {\n  if (style == null) {\n    style = 'solid';\n  }\n\n  var top = parser.stack.Top();\n\n  if (!(top instanceof sitem.ArrayItem) || top.Size()) {\n    throw new TexError_js_1.default('Misplaced', 'Misplaced %1', parser.currentCS);\n  }\n\n  if (!top.table.length) {\n    top.frame.push('top');\n  } else {\n    var lines = top.arraydef['rowlines'] ? top.arraydef['rowlines'].split(/ /) : [];\n\n    while (lines.length < top.table.length) {\n      lines.push('none');\n    }\n\n    lines[top.table.length - 1] = style;\n    top.arraydef['rowlines'] = lines.join(' ');\n  }\n};\n\nBaseMethods.HFill = function (parser, _name) {\n  var top = parser.stack.Top();\n\n  if (top instanceof sitem.ArrayItem) {\n    top.hfill.push(top.Size());\n  } else {\n    throw new TexError_js_1.default('UnsupportedHFill', 'Unsupported use of %1', parser.currentCS);\n  }\n};\n\nBaseMethods.BeginEnd = function (parser, name) {\n  var env = parser.GetArgument(name);\n\n  if (env.match(/\\\\/i)) {\n    throw new TexError_js_1.default('InvalidEnv', 'Invalid environment name \\'%1\\'', env);\n  }\n\n  var macro = parser.configuration.handlers.get('environment').lookup(env);\n\n  if (macro && name === '\\\\end') {\n    if (!macro.args[0]) {\n      var mml = parser.itemFactory.create('end').setProperty('name', env);\n      parser.Push(mml);\n      return;\n    }\n\n    parser.stack.env['closing'] = env;\n  }\n\n  ParseUtil_js_1.default.checkMaxMacros(parser, false);\n  parser.parse('environment', [parser, env]);\n};\n\nBaseMethods.Array = function (parser, begin, open, close, align, spacing, vspacing, style, raggedHeight) {\n  if (!align) {\n    align = parser.GetArgument('\\\\begin{' + begin.getName() + '}');\n  }\n\n  var lines = ('c' + align).replace(/[^clr|:]/g, '').replace(/[^|:]([|:])+/g, '$1');\n  align = align.replace(/[^clr]/g, '').split('').join(' ');\n  align = align.replace(/l/g, 'left').replace(/r/g, 'right').replace(/c/g, 'center');\n  var array = parser.itemFactory.create('array');\n  array.arraydef = {\n    columnalign: align,\n    columnspacing: spacing || '1em',\n    rowspacing: vspacing || '4pt'\n  };\n\n  if (lines.match(/[|:]/)) {\n    if (lines.charAt(0).match(/[|:]/)) {\n      array.frame.push('left');\n      array.dashed = lines.charAt(0) === ':';\n    }\n\n    if (lines.charAt(lines.length - 1).match(/[|:]/)) {\n      array.frame.push('right');\n    }\n\n    lines = lines.substr(1, lines.length - 2);\n    array.arraydef.columnlines = lines.split('').join(' ').replace(/[^|: ]/g, 'none').replace(/\\|/g, 'solid').replace(/:/g, 'dashed');\n  }\n\n  if (open) {\n    array.setProperty('open', parser.convertDelimiter(open));\n  }\n\n  if (close) {\n    array.setProperty('close', parser.convertDelimiter(close));\n  }\n\n  if ((style || '').charAt(1) === '\\'') {\n    array.arraydef['data-cramped'] = true;\n    style = style.charAt(0);\n  }\n\n  if (style === 'D') {\n    array.arraydef['displaystyle'] = true;\n  } else if (style) {\n    array.arraydef['displaystyle'] = false;\n  }\n\n  if (style === 'S') {\n    array.arraydef['scriptlevel'] = 1;\n  }\n\n  if (raggedHeight) {\n    array.arraydef['useHeight'] = false;\n  }\n\n  parser.Push(begin);\n  return array;\n};\n\nBaseMethods.AlignedArray = function (parser, begin) {\n  var align = parser.GetBrackets('\\\\begin{' + begin.getName() + '}');\n  var item = BaseMethods.Array(parser, begin);\n  return ParseUtil_js_1.default.setArrayAlign(item, align);\n};\n\nBaseMethods.Equation = function (parser, begin, numbered) {\n  parser.Push(begin);\n  ParseUtil_js_1.default.checkEqnEnv(parser);\n  return parser.itemFactory.create('equation', numbered).setProperty('name', begin.getName());\n};\n\nBaseMethods.EqnArray = function (parser, begin, numbered, taggable, align, spacing) {\n  parser.Push(begin);\n\n  if (taggable) {\n    ParseUtil_js_1.default.checkEqnEnv(parser);\n  }\n\n  align = align.replace(/[^clr]/g, '').split('').join(' ');\n  align = align.replace(/l/g, 'left').replace(/r/g, 'right').replace(/c/g, 'center');\n  var newItem = parser.itemFactory.create('eqnarray', begin.getName(), numbered, taggable, parser.stack.global);\n  newItem.arraydef = {\n    displaystyle: true,\n    columnalign: align,\n    columnspacing: spacing || '1em',\n    rowspacing: '3pt',\n    side: parser.options['tagSide'],\n    minlabelspacing: parser.options['tagIndent']\n  };\n  return newItem;\n};\n\nBaseMethods.HandleNoTag = function (parser, _name) {\n  parser.tags.notag();\n};\n\nBaseMethods.HandleLabel = function (parser, name) {\n  var label = parser.GetArgument(name);\n\n  if (label === '') {\n    return;\n  }\n\n  if (!parser.tags.refUpdate) {\n    if (parser.tags.label) {\n      throw new TexError_js_1.default('MultipleCommand', 'Multiple %1', parser.currentCS);\n    }\n\n    parser.tags.label = label;\n\n    if ((parser.tags.allLabels[label] || parser.tags.labels[label]) && !parser.options['ignoreDuplicateLabels']) {\n      throw new TexError_js_1.default('MultipleLabel', 'Label \\'%1\\' multiply defined', label);\n    }\n\n    parser.tags.labels[label] = new Tags_js_1.Label();\n  }\n};\n\nBaseMethods.HandleRef = function (parser, name, eqref) {\n  var label = parser.GetArgument(name);\n  var ref = parser.tags.allLabels[label] || parser.tags.labels[label];\n\n  if (!ref) {\n    if (!parser.tags.refUpdate) {\n      parser.tags.redo = true;\n    }\n\n    ref = new Tags_js_1.Label();\n  }\n\n  var tag = ref.tag;\n\n  if (eqref) {\n    tag = parser.tags.formatTag(tag);\n  }\n\n  var node = parser.create('node', 'mrow', ParseUtil_js_1.default.internalMath(parser, tag), {\n    href: parser.tags.formatUrl(ref.id, parser.options.baseURL),\n    'class': 'MathJax_ref'\n  });\n  parser.Push(node);\n};\n\nBaseMethods.Macro = function (parser, name, macro, argcount, def) {\n  if (argcount) {\n    var args = [];\n\n    if (def != null) {\n      var optional = parser.GetBrackets(name);\n      args.push(optional == null ? def : optional);\n    }\n\n    for (var i = args.length; i < argcount; i++) {\n      args.push(parser.GetArgument(name));\n    }\n\n    macro = ParseUtil_js_1.default.substituteArgs(parser, args, macro);\n  }\n\n  parser.string = ParseUtil_js_1.default.addArgs(parser, macro, parser.string.slice(parser.i));\n  parser.i = 0;\n  ParseUtil_js_1.default.checkMaxMacros(parser);\n};\n\nBaseMethods.MathChoice = function (parser, name) {\n  var D = parser.ParseArg(name);\n  var T = parser.ParseArg(name);\n  var S = parser.ParseArg(name);\n  var SS = parser.ParseArg(name);\n  parser.Push(parser.create('node', 'MathChoice', [D, T, S, SS]));\n};\n\nexports.default = BaseMethods;","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwBA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AAIA,IAAIA,WAAW,GAAgC,EAA/C;AAEA,IAAMC,QAAQ,GAAG,MAAM,GAAvB;AACA,IAAMC,aAAa,GAA4B;EAC7CC,UAAU,EAAE,CADiC;EAC9BC,QAAQ,EAAE,CADoB;EACjBC,UAAU,EAAE,CADK;EACFC,SAAS,EAAE,CADT;EAE7CC,KAAK,EAAE,CAFsC;EAEnCC,UAAU,EAAE,CAFuB;EAG7CC,EAAE,EAAE,CAHyC;EAGtC,SAAS,CAH6B;EAG1BC,IAAI,EAAE,CAHoB;EAGjBC,KAAK,EAAE;AAHU,CAA/C;;AAiBAX,WAAW,CAACY,IAAZ,GAAmB,UAASC,MAAT,EAA4BC,EAA5B,EAAsC;EAEvDD,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,MAA1B,CAAZ;AACD,CAHD;;AAUAjB,WAAW,CAACkB,KAAZ,GAAoB,UAASL,MAAT,EAA4BC,EAA5B,EAAsC;EAExDD,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,OAA1B,CAAZ;AACD,CAHD;;AAWAjB,WAAW,CAACmB,KAAZ,GAAoB,UAASN,MAAT,EAA4BC,EAA5B,EAAsC;EAExDD,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,OAAvB,EAAgC,EAAhC,EAAoCG,uBAASC,IAA7C,CAAZ;AACD,CAHD;;AAUArB,WAAW,CAACsB,KAAZ,GAAoB,UAASC,OAAT,EAA6BT,EAA7B,EAAuC,CAAI,CAA/D;;AAOAd,WAAW,CAACwB,WAAZ,GAA0B,UAASX,MAAT,EAA4BC,EAA5B,EAAsC;;;EAC9D,IAAID,MAAM,CAACY,OAAP,GAAiBC,KAAjB,CAAuB,IAAvB,CAAJ,EAAkC;IAEhCb,MAAM,CAACc,MAAP,GAAgBd,MAAM,CAACc,MAAP,CAAcC,MAAd,CAAqB,CAArB,EAAwBf,MAAM,CAACgB,CAAP,GAAW,CAAnC,IACd,GADc,GACRhB,MAAM,CAACc,MAAP,CAAcC,MAAd,CAAqBf,MAAM,CAACgB,CAAP,GAAW,CAAhC,CADR;EAED;;EACD,IAAIC,MAAJ;EACA,IAAIC,IAAJ;EACA,IAAMC,GAAG,GAAGnB,MAAM,CAACoB,KAAP,CAAaC,GAAb,EAAZ;;EACA,IAAIF,GAAG,CAACG,MAAJ,CAAW,OAAX,CAAJ,EAAyB;IAEvBC,YAAiBJ,GAAG,CAACK,IAAJ,CAAS,CAAT,CAAjB,EAA4B,CAA5B,GAACN,IAAI,QAAL,EAAOD,MAAM,QAAb;IACAjB,MAAM,CAACoB,KAAP,CAAaK,GAAb;EACD,CAJD,MAIO;IAELP,IAAI,GAAGlB,MAAM,CAACoB,KAAP,CAAaM,IAAb,EAAP;;IACA,IAAI,CAACR,IAAL,EAAW;MAETA,IAAI,GAAGlB,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B,EAA7B,EAAiC,EAAjC,CAAP;IACD;EACF;;EACD,IAAMuB,UAAU,GAAGC,sBAASC,WAAT,CAAqBX,IAArB,EAA2B,YAA3B,CAAnB;EACA,IAAIY,QAAQ,GAAGF,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,SAAtB,IAAoCA,IAAmB,CAACc,GAAxD,GACZd,IAAsB,CAACe,IAD1B;;EAEA,IAAKL,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,SAAtB,KAAoC,CAACU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,MAAtB,CAArC,IACAU,sBAASM,UAAT,CAAoBhB,IAApB,EAA2BA,IAAmB,CAACc,GAA/C,CADD,IAECJ,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,YAAtB,KAAuC,CAACU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,OAAtB,CAAxC,IACAU,sBAASM,UAAT,CAAoBhB,IAApB,EAA2BA,IAAsB,CAACe,IAAlD,CADA,IAEA,CAACL,sBAASC,WAAT,CAAqBX,IAArB,EAA2B,UAA3B,CAJN,EAI+C;IAE7C,MAAM,IAAIiB,qBAAJ,CAAa,gBAAb,EAA+B,wCAA/B,CAAN;EACD;;EACD,IAAI,CAACP,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,SAAtB,CAAD,IAAqCU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,MAAtB,CAAzC,EAAwE;IACtE,IAAIS,UAAJ,EAAgB;MAEd,IAAI,CAACC,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,YAAtB,CAAD,IAAwCU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,OAAtB,CAAxC,IACAU,sBAASM,UAAT,CAAoBhB,IAApB,EAA2BA,IAAsB,CAACe,IAAlD,CADJ,EAC6D;QAE3Df,IAAI,GAAGlB,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,YAAtB,EAAoC,CAACc,IAAD,CAApC,EAA4C;UAACS,UAAU,EAAE;QAAb,CAA5C,CAAP;MACD;;MACDG,QAAQ,GAAIZ,IAAsB,CAACe,IAAnC;IACD,CARD,MAQO;MAELf,IAAI,GAAGlB,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACc,IAAD,CAAjC,CAAP;MACAY,QAAQ,GAAIZ,IAAmB,CAACc,GAAhC;IACD;EACF;;EACDhC,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,QAA1B,EAAoCc,IAApC,EAA0CkB,aAA1C,CAAwD;IACtDN,QAAQ,EAAEA,QAD4C;IAClCb,MAAM,EAAEA,MAD0B;IAClBU,UAAU,EAAEA;EADM,CAAxD,CADF;AAID,CAnDD;;AA2DAxC,WAAW,CAACkD,SAAZ,GAAwB,UAASrC,MAAT,EAA4BC,EAA5B,EAAsC;;;EAC5D,IAAID,MAAM,CAACY,OAAP,GAAiBC,KAAjB,CAAuB,IAAvB,CAAJ,EAAkC;IAEhCb,MAAM,CAACc,MAAP,GACEd,MAAM,CAACc,MAAP,CAAcC,MAAd,CAAqB,CAArB,EAAwBf,MAAM,CAACgB,CAAP,GAAW,CAAnC,IAAwC,GAAxC,GACAhB,MAAM,CAACc,MAAP,CAAcC,MAAd,CAAqBf,MAAM,CAACgB,CAAP,GAAW,CAAhC,CAFF;EAGD;;EACD,IAAIC,MAAJ,EAAYC,IAAZ;EACA,IAAMC,GAAG,GAAGnB,MAAM,CAACoB,KAAP,CAAaC,GAAb,EAAZ;;EACA,IAAIF,GAAG,CAACG,MAAJ,CAAW,OAAX,CAAJ,EAAyB;IAEvBC,YAAiBJ,GAAG,CAACK,IAAJ,CAAS,CAAT,CAAjB,EAA4B,CAA5B,GAACN,IAAI,QAAL,EAAOD,MAAM,QAAb;IACAjB,MAAM,CAACoB,KAAP,CAAaK,GAAb;EACD,CAJD,MAIO;IACLP,IAAI,GAAGlB,MAAM,CAACoB,KAAP,CAAaM,IAAb,EAAP;;IACA,IAAI,CAACR,IAAL,EAAW;MAETA,IAAI,GAAGlB,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B,EAA7B,EAAiC,EAAjC,CAAP;IACD;EACF;;EACD,IAAMuB,UAAU,GAAGC,sBAASC,WAAT,CAAqBX,IAArB,EAA2B,YAA3B,CAAnB;EACA,IAAIY,QAAQ,GAAGF,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,SAAtB,IACZA,IAAmB,CAACoB,GADR,GACepB,IAAsB,CAACqB,KADrD;;EAEA,IAAKX,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,SAAtB,KAAoC,CAACU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,MAAtB,CAArC,IACAU,sBAASM,UAAT,CAAoBhB,IAApB,EAA2BA,IAAmB,CAACoB,GAA/C,CADD,IAECV,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,YAAtB,KAAuC,CAACU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,OAAtB,CAAxC,IACAU,sBAASM,UAAT,CAAoBhB,IAApB,EAA2BA,IAAsB,CAACqB,KAAlD,CADA,IAEA,CAACX,sBAASC,WAAT,CAAqBX,IAArB,EAA2B,UAA3B,CAJN,EAI+C;IAE7C,MAAM,IAAIiB,qBAAJ,CAAa,kBAAb,EAAiC,0CAAjC,CAAN;EACD;;EACD,IAAI,CAACP,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,SAAtB,CAAD,IAAqCU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,MAAtB,CAAzC,EAAwE;IACtE,IAAIS,UAAJ,EAAgB;MAEd,IAAI,CAACC,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,YAAtB,CAAD,IAAwCU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,OAAtB,CAAxC,IACAU,sBAASM,UAAT,CAAoBhB,IAApB,EAA2BA,IAAsB,CAACqB,KAAlD,CADJ,EAC8D;QAE5DrB,IAAI,GAAGlB,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,YAAtB,EAAoC,CAACc,IAAD,CAApC,EAA4C;UAACS,UAAU,EAAE;QAAb,CAA5C,CAAP;MACD;;MACDG,QAAQ,GAAIZ,IAAsB,CAACqB,KAAnC;IACD,CARD,MAQO;MAELrB,IAAI,GAAGlB,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACc,IAAD,CAAjC,CAAP;MACAY,QAAQ,GAAIZ,IAAmB,CAACoB,GAAhC;IACD;EACF;;EACDtC,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,QAA1B,EAAoCc,IAApC,EAA0CkB,aAA1C,CAAwD;IACtDN,QAAQ,EAAEA,QAD4C;IAClCb,MAAM,EAAEA,MAD0B;IAClBU,UAAU,EAAEA;EADM,CAAxD,CADF;AAID,CAlDD;;AA0DAxC,WAAW,CAACqD,KAAZ,GAAoB,UAASxC,MAAT,EAA4ByC,CAA5B,EAAqC;EAEvD,IAAIvB,IAAI,GAAGlB,MAAM,CAACoB,KAAP,CAAaM,IAAb,EAAX;;EACA,IAAI,CAACR,IAAL,EAAW;IAETA,IAAI,GAAGlB,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,IAAtB,CAAP;EACD;;EACD,IAAIwB,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,SAAtB,KAAoC,CAACU,sBAASG,MAAT,CAAgBb,IAAhB,EAAsB,MAAtB,CAArC,IACAU,sBAASM,UAAT,CAAoBhB,IAApB,EAA2BA,IAAmB,CAACc,GAA/C,CADJ,EACyD;IAEvD,MAAM,IAAIG,qBAAJ,CAAa,qBAAb,EACc,qDADd,CAAN;EAED;;EACD,IAAIH,GAAG,GAAG,EAAV;EACAhC,MAAM,CAACgB,CAAP;;EACA,GAAG;IAEDgB,GAAG,IAAIzB,uBAASmC,KAAhB;IAAuB1C,MAAM,CAACgB,CAAP,IAAYyB,CAAC,GAAGzC,MAAM,CAACY,OAAP,EAAhB;EACxB,CAHD,QAGS6B,CAAC,KAAK,IAAN,IAAcA,CAAC,KAAKlC,uBAASoC,KAHtC;;EAIAX,GAAG,GAAG,CAAC,EAAD,EAAK,QAAL,EAAe,QAAf,EAAyB,QAAzB,EAAmC,QAAnC,EAA6CA,GAAG,CAACY,MAAjD,KAA4DZ,GAAlE;EACA,IAAMa,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B;IAAC0C,WAAW,EAAE;EAAd,CAA7B,EAAkDd,GAAlD,CAAb;EACAhC,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,OAA1B,EAAmCc,IAAnC,EAAyC2B,IAAzC,CADF;AAED,CAvBD;;AA+BA1D,WAAW,CAAC4D,OAAZ,GAAsB,UAAS/C,MAAT,EAA4BC,EAA5B,EAAsC;EAC1D,OAAOD,MAAM,CAACgB,CAAP,GAAWhB,MAAM,CAACc,MAAP,CAAc8B,MAAzB,IAAmC5C,MAAM,CAACc,MAAP,CAAckC,MAAd,CAAqBhD,MAAM,CAACgB,CAA5B,MAAmC,IAA7E,EAAmF;IACjFhB,MAAM,CAACgB,CAAP;EACD;AACF,CAJD;;AAYA7B,WAAW,CAAC8D,IAAZ,GAAmB,UAASvC,OAAT,EAA6BT,EAA7B,EAAuC;EAExD,MAAM,IAAIkC,qBAAJ,CAAa,cAAb,EACc,6DADd,CAAN;AAED,CAJD;;AAkBAhD,WAAW,CAAC+D,QAAZ,GAAuB,UAASlD,MAAT,EAA4BmD,IAA5B,EAA0CC,OAA1C,EAAyD;EAC9E,IAAMC,IAAI,GAAGrD,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAb;EACA,IAAII,GAAG,GAAG,IAAIC,sBAAJ,CAAcH,IAAd,EAAkBI,sBACvBzD,MAAM,CAACoB,KAAP,CAAasC,GADU,GACP;IACnBC,IAAI,EAAEP,OADa;IAEnBQ,sBAAsB,EAAE,YAFL;IAGnBC,QAAQ,EAAE;EAHS,CADO,CAAlB,EAKP7D,MAAM,CAAC8D,aALA,EAKeP,GALf,EAAV;EAMAvD,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACmD,GAAD,CAAjC,CAAZ;AACD,CATD;;AAiBApE,WAAW,CAAC4E,OAAZ,GAAsB,UAAS/D,MAAT,EAA4BgE,KAA5B,EAA2CL,IAA3C,EAAuD;EAC3E3D,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiB,MAAjB,IAA2BC,IAA3B;AACD,CAFD;;AAYAxE,WAAW,CAAC8E,QAAZ,GAAuB,UAASjE,MAAT,EAA4BgE,KAA5B,EACSE,QADT,EAC2BpE,KAD3B,EAESqE,KAFT,EAEsB;EAC3CnE,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiB,OAAjB,IAA4BQ,QAA5B;EACAlE,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiB,OAAjB,IAA4BS,KAA5B;EACAnE,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,OAA1B,EAAmCgE,WAAnC,CACE,QADF,EACY;IAACC,YAAY,EAAEvE,KAAf;IAAsBwE,WAAW,EAAEH;EAAnC,CADZ,CADF;AAGD,CARD;;AAiBAhF,WAAW,CAACoF,OAAZ,GAAsB,UAASvE,MAAT,EAA4BgE,KAA5B,EAA2CQ,IAA3C,EAAuD;EAC3ExE,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiB,MAAjB,IAA2Bc,IAA3B;EACAxE,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,OAA1B,EAAmCgE,WAAnC,CAA+C,QAA/C,EAAyD;IAACK,QAAQ,EAAE,qBAAGD,IAAH;EAAX,CAAzD,CADF;AAED,CAJD;;AAYArF,WAAW,CAACuF,MAAZ,GAAqB,UAAS1E,MAAT,EAA4BgE,KAA5B,EAA2CW,KAA3C,EAAwD;EAE3E,IAAM9B,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,EAAhC,EAAoC;IAACwE,KAAK,EAAE,qBAAGD,KAAH;EAAR,CAApC,CAAb;EACA,IAAM7E,KAAK,GAAGE,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,CAACyC,IAAD,CAAhC,EAAwC;IAACyB,WAAW,EAAE;EAAd,CAAxC,CAAd;EACAtE,MAAM,CAACE,IAAP,CAAYJ,KAAZ;AACD,CALD;;AAaAX,WAAW,CAAC0F,SAAZ,GAAwB,UAAS7E,MAAT,EAA4BmD,IAA5B,EAAwC;EAE9D,IAAM2B,KAAK,GAAG3B,IAAI,CAACpC,MAAL,CAAY,CAAZ,CAAd;EACAf,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B0E,KAA1B,EAAiC9E,MAAM,CAAC+E,YAAP,CAAoB5B,IAApB,CAAjC,EAA4DnD,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiBhE,KAA7E,CAAZ;AACD,CAJD;;AAYAP,WAAW,CAAC6F,OAAZ,GAAsB,UAAShF,MAAT,EAA4BmD,IAA5B,EAA0CvD,EAA1C,EAAoD;EAExE,IAAI,CAACA,EAAL,EAAS;IACPA,EAAE,GAAGuD,IAAI,CAACpC,MAAL,CAAY,CAAZ,CAAL;EACD;;EACD,IAAMwC,GAAG,GAAGvD,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B;IAAC6E,QAAQ,EAAEC,sBAASC;EAApB,CAA7B,EAAsDvF,EAAtD,CAAZ;EACAI,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,IAA1B,EAAgCmD,GAAhC,CAAZ;AACD,CAPD;;AAgBApE,WAAW,CAACiG,OAAZ,GAAsB,UAASpF,MAAT,EAA4BmD,IAA5B,EAA0CvD,EAA1C,EAAoD;EAExE,IAAI,CAACA,EAAL,EAAS;IACPA,EAAE,GAAGuD,IAAI,CAACpC,MAAL,CAAY,CAAZ,CAAL;EACD;;EACDnB,EAAE,GAAGA,EAAE,CAACyF,OAAH,CAAW,UAAX,EAAuB,QAAvB,CAAL;EACA,IAAM9B,GAAG,GAAGvD,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B;IACvCkF,aAAa,EAAE,IADwB;IAEvC3D,UAAU,EAAE,IAF2B;IAGvC4D,IAAI,EAAEC,8BAAYC,IAAZ,CAAiBC,MAHgB;IAIvCT,QAAQ,EAAEC,sBAASC;EAJoB,CAA7B,EAKTvF,EALS,CAAZ;EAMAI,MAAM,CAACE,IAAP,CAAYqD,GAAZ;AACD,CAbD;;AAqBApE,WAAW,CAACwG,MAAZ,GAAqB,UAAS3F,MAAT,EAA4BgE,KAA5B,EAA2C4B,MAA3C,EAAyD;EAE5E,IAAIC,EAAE,GAAG7F,MAAM,CAACoB,KAAP,CAAaM,IAAb,CAAkB,IAAlB,CAAT;;EAEA,IAAI,CAACmE,EAAD,IAAQjE,sBAASkE,WAAT,CAAqBlE,sBAASmE,SAAT,CAAmBF,EAAnB,CAArB,MAAiDX,sBAASC,EAA1D,IACAvD,sBAASC,WAAT,CAAqBgE,EAArB,EAAyB,YAAzB,KAA0C,IADtD,EAC6D;IAE3D,MAAM,IAAI1D,qBAAJ,CAAa,iBAAb,EAAgC,iCAAhC,EAAmEnC,MAAM,CAACgG,SAA1E,CAAN;EACD;;EACD,IAAM7E,GAAG,GAAGnB,MAAM,CAACoB,KAAP,CAAaC,GAAb,EAAZ;EACA,IAAIwB,IAAJ;;EACA,IAAIjB,sBAASG,MAAT,CAAgB8D,EAAhB,EAAoB,YAApB,KAAqC,CAACD,MAA1C,EAAkD;IAEhD/C,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,CAAP;IACAwB,sBAASqE,YAAT,CAAsBJ,EAAtB,EAA0BhD,IAA1B;IACAgD,EAAE,GAAG1E,GAAG,CAAC+E,IAAJ,GAAWrD,IAAhB;EACD,CALD,MAKO,IAAIjB,sBAASG,MAAT,CAAgB8D,EAAhB,EAAoB,SAApB,KAAkCD,MAAtC,EAA8C;IAInD/C,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,YAAtB,CAAP;IACAwB,sBAASqE,YAAT,CAAsBJ,EAAtB,EAA0BhD,IAA1B;IACAgD,EAAE,GAAG1E,GAAG,CAAC+E,IAAJ,GAAWrD,IAAhB;EACD;;EACDjB,sBAASwC,WAAT,CAAqByB,EAArB,EAAyB,YAAzB,EAAuCD,MAAM,GAAG,IAAH,GAAU,KAAvD;EACAhE,sBAASQ,aAAT,CAAuBR,sBAASmE,SAAT,CAAmBF,EAAnB,CAAvB,EAA+C;IAAC,iBAAiB;EAAlB,CAA/C;;EACA,IAAIjE,sBAASuE,YAAT,CAAsBN,EAAtB,EAA0B,eAA1B,KACAjE,sBAASC,WAAT,CAAqBgE,EAArB,EAAyB,eAAzB,CADJ,EAC+C;IAC7CjE,sBAASQ,aAAT,CAAuByD,EAAvB,EAA2B;MAAC,iBAAiB;IAAlB,CAA3B;EACD;AACF,CA9BD;;AAwCA1G,WAAW,CAACiH,IAAZ,GAAmB,UAASpG,MAAT,EAA4BmD,IAA5B,EAA0CkD,IAA1C,EAAwDC,KAAxD,EAAqE;EAEtF,IAAM/C,GAAG,GAAGvD,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,MAA1B,EAAkCgE,WAAlC,CAA8C,MAA9C,EAAsDpE,MAAM,CAACgG,SAA7D,CAAZ;;EACA,IAAIK,IAAI,IAAIC,KAAZ,EAAmB;IAEjB/C,GAAG,CAACa,WAAJ,CAAgB,MAAhB,EAAwBiC,IAAxB;IACA9C,GAAG,CAACa,WAAJ,CAAgB,OAAhB,EAAyBkC,KAAzB;EACD,CAJD,MAIO,IAAInD,IAAI,CAACtC,KAAL,CAAW,aAAX,CAAJ,EAA+B;IAEpC0C,GAAG,CAACa,WAAJ,CAAgB,MAAhB,EAAwBpE,MAAM,CAAC+E,YAAP,CAAoB5B,IAApB,CAAxB;IACAI,GAAG,CAACa,WAAJ,CAAgB,OAAhB,EAAyBpE,MAAM,CAAC+E,YAAP,CAAoB5B,IAApB,CAAzB;EACD;;EACD,IAAIA,IAAI,CAACtC,KAAL,CAAW,UAAX,CAAJ,EAA4B;IAE1B0C,GAAG,CAACa,WAAJ,CAAgB,WAAhB,EAA6BpE,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB,CAA7B;EACD,CAHD,MAIK,IAAIA,IAAI,CAACtC,KAAL,CAAW,SAAX,KAAyBwF,IAAzB,IAAiCC,KAArC,EAA4C;IAE/C/C,GAAG,CAACa,WAAJ,CAAgB,WAAhB,EAA6B,CAA7B;EACD;;EACDpE,MAAM,CAACE,IAAP,CAAYqD,GAAZ;AACD,CArBD;;AA4BApE,WAAW,CAACqH,IAAZ,GAAmB,UAASxG,MAAT,EAA4BmD,IAA5B,EAAwC;EAEzD,IAAMsD,GAAG,GAAGzG,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAZ;EACA,IAAMwD,GAAG,GAAG3G,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAZ;EACA,IAAMN,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,OAAtB,EAA+B,CAACqG,GAAD,EAAME,GAAN,CAA/B,CAAb;EACA3G,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CAND;;AAaA1D,WAAW,CAACyH,IAAZ,GAAmB,UAAS5G,MAAT,EAA4BmD,IAA5B,EAAwC;EACzD,IAAM0D,CAAC,GAAG7G,MAAM,CAAC8G,WAAP,CAAmB3D,IAAnB,CAAV;EACA,IAAI4D,GAAG,GAAG/G,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAV;;EACA,IAAI4D,GAAG,KAAK,QAAZ,EAAsB;IACpBA,GAAG,IAAK,MAAM/G,MAAM,CAACsD,WAAP,CAAmByD,GAAnB,CAAN,GAAgC,IAAhC,GAAuC/G,MAAM,CAACsD,WAAP,CAAmByD,GAAnB,CAAvC,GAAiE,GAAzE;EACD;;EACD,IAAIxD,GAAG,GAAG,IAAIC,sBAAJ,CAAcuD,GAAd,EAAmB/G,MAAM,CAACoB,KAAP,CAAasC,GAAhC,EAAqC1D,MAAM,CAAC8D,aAA5C,EAA2DP,GAA3D,EAAV;;EACA,IAAI,CAACsD,CAAL,EAAQ;IAENtD,GAAG,GAAGvD,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,OAAtB,EAA+B,CAACmD,GAAD,CAA/B,CAAN;EACD,CAHD,MAGO;IAELA,GAAG,GAAGvD,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,OAAtB,EAA+B,CAACmD,GAAD,EAAMyD,SAAS,CAAChH,MAAD,EAAS6G,CAAT,CAAf,CAA/B,CAAN;EACD;;EACD7G,MAAM,CAACE,IAAP,CAAYqD,GAAZ;AACD,CAfD;;AAwBA,SAASyD,SAAT,CAAmBhH,MAAnB,EAAsC6G,CAAtC,EAA+C;EAE7C,IAAMnD,GAAG,GAAG1D,MAAM,CAACoB,KAAP,CAAasC,GAAzB;EACA,IAAMuD,MAAM,GAAGvD,GAAG,CAAC,QAAD,CAAlB;EACAA,GAAG,CAAC,QAAD,CAAH,GAAgB,IAAhB;EACA,IAAMwD,SAAS,GAAG,IAAI1D,sBAAJ,CAAcqD,CAAd,EAAiBnD,GAAjB,EAAsB1D,MAAM,CAAC8D,aAA7B,CAAlB;EACA,IAAIjB,IAAI,GAAGqE,SAAS,CAAC3D,GAAV,EAAX;EACA,IAAM4D,MAAM,GAAGD,SAAS,CAAC9F,KAAV,CAAgB+F,MAA/B;;EACA,IAAIA,MAAM,CAAC,UAAD,CAAN,IAAsBA,MAAM,CAAC,QAAD,CAAhC,EAA4C;IAE1C,IAAMC,GAAG,GAAY,EAArB;;IACA,IAAID,MAAM,CAAC,UAAD,CAAV,EAAwB;MACtBC,GAAG,CAAC,OAAD,CAAH,GAAeD,MAAM,CAAC,UAAD,CAArB;IACD;;IACD,IAAIA,MAAM,CAAC,QAAD,CAAV,EAAsB;MACpBC,GAAG,CAAC,SAAD,CAAH,GAAiBD,MAAM,CAAC,QAAD,CAAvB;MACAC,GAAG,CAAC,QAAD,CAAH,GAAgBD,MAAM,CAAC,QAAD,CAAtB;IACD;;IACDtE,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACyC,IAAD,CAAjC,EAAyCuE,GAAzC,CAAP;EACD;;EACD1D,GAAG,CAAC,QAAD,CAAH,GAAgBuD,MAAhB;EACA,OAAOpE,IAAP;AACD;;AAQD1D,WAAW,CAACkI,IAAZ,GAAmB,UAASrH,MAAT,EAA4BmD,IAA5B,EAAwC;EACzD,IAAM0D,CAAC,GAAG7G,MAAM,CAACsH,OAAP,CAAenE,IAAf,EAAqB,MAArB,CAAV;EACA,IAAM4D,GAAG,GAAG/G,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAZ;EACA,IAAMN,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,OAAtB,EAA+B,CAAC2G,GAAD,EAAMC,SAAS,CAAChH,MAAD,EAAS6G,CAAT,CAAf,CAA/B,CAAb;EACA7G,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CALD;;AAcA1D,WAAW,CAACoI,QAAZ,GAAuB,UAASvH,MAAT,EAA4BmD,IAA5B,EAA0CvD,EAA1C,EAAoD;EAEzE,IAAI,CAACI,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiB,QAAjB,CAAL,EAAiC;IAE/B,MAAM,IAAIvB,qBAAJ,CAAa,mBAAb,EAAkC,kCAAlC,EAAsEnC,MAAM,CAACgG,SAA7E,CAAN;EACD;;EACD,IAAIhG,MAAM,CAACoB,KAAP,CAAa+F,MAAb,CAAoBvH,EAApB,CAAJ,EAA6B;IAE3B,MAAM,IAAIuC,qBAAJ,CAAa,kBAAb,EAAiC,oBAAjC,EAAuDnC,MAAM,CAACgG,SAA9D,CAAN;EACD;;EACD,IAAIa,CAAC,GAAG7G,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAR;;EACA,IAAI,CAAC0D,CAAC,CAAChG,KAAF,CAAQ,UAAR,CAAL,EAA0B;IAExB,MAAM,IAAIsB,qBAAJ,CAAa,YAAb,EAA2B,uCAA3B,EAAoEnC,MAAM,CAACgG,SAA3E,CAAN;EACD;;EACDa,CAAC,GAAIW,QAAQ,CAACX,CAAD,EAAI,EAAJ,CAAR,GAAkB,EAAnB,GAAyB,IAA7B;;EACA,IAAIA,CAAC,CAAC9F,MAAF,CAAS,CAAT,EAAY,CAAZ,MAAmB,GAAvB,EAA4B;IAC1B8F,CAAC,GAAG,MAAMA,CAAV;EACD;;EACD7G,MAAM,CAACoB,KAAP,CAAa+F,MAAb,CAAoBvH,EAApB,IAA0BiH,CAA1B;AACD,CApBD;;AA8BA1H,WAAW,CAACsI,MAAZ,GAAqB,UAASzH,MAAT,EAA4BmD,IAA5B,EAA0CuE,MAA1C,EAA0DC,QAA1D,EAA2E;EAE9F,IAAMlF,CAAC,GAAGzC,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAV;;EAEA,IAAMiE,GAAG,yBAAOQ,uBAAUC,UAAV,CAAqB7H,MAArB,CAAP,GAAmC;IAAE0H,MAAM,EAAE,IAAV;IAAgBI,UAAU,EAAE;EAA5B,CAAnC,CAAT;;EACA,IAAMC,MAAM,GAAGnG,sBAASoG,YAAT,CAAsBN,MAAtB,CAAf;EACA,IAAMO,MAAM,GAAGjI,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6BgH,GAA7B,EAAkCW,MAAlC,CAAf;EACA,IAAMxE,GAAG,GAAG0E,MAAZ;EACArG,sBAASsG,YAAT,CAAsB3E,GAAtB,EAA2B,UAA3B,EAAuCoE,QAAQ,GAAG,IAAH,GAAU,KAAzD;EAEA,IAAMQ,EAAE,GAAIvG,sBAASwG,aAAT,CAAuB3F,CAAvB,IAA4Bb,sBAASmE,SAAT,CAAmBtD,CAAnB,CAA5B,GAAoDA,CAAhE;;EACA,IAAIb,sBAASG,MAAT,CAAgBoG,EAAhB,EAAoB,IAApB,KAA6BvG,sBAASC,WAAT,CAAqBsG,EAArB,EAAyB,eAAzB,CAAjC,EAA4E;IAE1EvG,sBAASQ,aAAT,CAAuB+F,EAAvB,EAA2B;MAAC,iBAAiB;IAAlB,CAA3B;EACD;;EACD,IAAME,OAAO,GAAGrI,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,YAAtB,CAAhB;EAEAwB,sBAAS0G,QAAT,CAAkBD,OAAlB,EAA2B,CAA3B,EAA8B5F,CAA9B;EACAb,sBAAS0G,QAAT,CAAkBD,OAAlB,EAA2B,CAA3B,EAA8B,IAA9B;EACAzG,sBAAS0G,QAAT,CAAkBD,OAAlB,EAA2B,CAA3B,EAA8B9E,GAA9B;EACA,IAAIgF,OAAO,GAAGvI,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACiI,OAAD,CAAjC,CAAd;EACArI,MAAM,CAACE,IAAP,CAAYqI,OAAZ;AACD,CAtBD;;AAgCApJ,WAAW,CAACqJ,SAAZ,GAAwB,UAASxI,MAAT,EAA4BmD,IAA5B,EAA0CV,CAA1C,EAAqDrB,KAArD,EAAmE;EACzF,IAAM2G,MAAM,GAAGnG,sBAASoG,YAAT,CAAsBvF,CAAtB,CAAf;EACA,IAAM0F,EAAE,GAAGnI,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B;IAACuH,QAAQ,EAAE,IAAX;IAAiBD,MAAM,EAAE;EAAzB,CAA7B,EAA6DK,MAA7D,CAAX;EACA,IAAMU,GAAG,GAAItF,IAAI,CAACH,MAAL,CAAY,CAAZ,MAAmB,GAAnB,GAAyB,MAAzB,GAAkC,OAA/C;EACA,IAAM9B,IAAI,GAAGlB,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAb;EACAnD,MAAM,CAACE,IAAP,CAAY0H,uBAAUc,SAAV,CAAoB1I,MAApB,EAA4BkB,IAA5B,EAAkCiH,EAAlC,EAAsCM,GAAtC,EAA2CrH,KAA3C,CAAZ;AACD,CAND;;AAcAjC,WAAW,CAACwJ,OAAZ,GAAsB,UAAS3I,MAAT,EAA4BmD,IAA5B,EAAwC;EAE5D,IAAMhC,GAAG,GAAGnB,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAZ;EACA,IAAMjC,IAAI,GAAGlB,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAb;EACAyE,uBAAUgB,kBAAV,CAA6B1H,IAA7B;;EACA,IAAIC,GAAG,CAACG,MAAJ,CAAW,IAAX,CAAJ,EAAsB;IACpBM,sBAASsG,YAAT,CAAsB/G,GAAtB,EAA2B,QAA3B,EAAqC,KAArC;EACD;;EACD,IAAM0B,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,OAAtB,EAA+B,CAACc,IAAD,EAAOC,GAAP,CAA/B,CAAb;EACAnB,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CAVD;;AAkBA1D,WAAW,CAAC0J,QAAZ,GAAuB,UAAS7I,MAAT,EAA4BmD,IAA5B,EAAwC;EAE7D,IAAM2F,GAAG,GAAG9I,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAZ;EACA,IAAMjC,IAAI,GAAGlB,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAb;EACAyE,uBAAUgB,kBAAV,CAA6B1H,IAA7B;;EACA,IAAI4H,GAAG,CAACxH,MAAJ,CAAW,IAAX,CAAJ,EAAsB;IACpBM,sBAASsG,YAAT,CAAsBY,GAAtB,EAA2B,QAA3B,EAAqC,KAArC;EACD;;EACD,IAAMjG,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,CAACc,IAAD,EAAO4H,GAAP,CAAhC,EAA6C;IAACC,WAAW,EAAE;EAAd,CAA7C,CAAb;EACA/I,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CAVD;;AAkBA1D,WAAW,CAAC6J,YAAZ,GAA2B,UAAShJ,MAAT,EAA4BmD,IAA5B,EAAwC;EACjE,IAAMhC,GAAG,GAAGnB,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAZ;EACA,IAAM2F,GAAG,GAAG9I,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAZ;EACA,IAAMjC,IAAI,GAAGlB,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAb;EACAyE,uBAAUgB,kBAAV,CAA6B1H,IAA7B;;EACA,IAAIC,GAAG,CAACG,MAAJ,CAAW,IAAX,CAAJ,EAAsB;IACpBM,sBAASsG,YAAT,CAAsB/G,GAAtB,EAA2B,QAA3B,EAAqC,KAArC;EACD;;EACD,IAAI2H,GAAG,CAACxH,MAAJ,CAAW,IAAX,CAAJ,EAAsB;IACpBM,sBAASsG,YAAT,CAAsBY,GAAtB,EAA2B,QAA3B,EAAqC,KAArC;EACD;;EACD,IAAMjG,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,YAAtB,EAAoC,CAACc,IAAD,EAAO4H,GAAP,EAAY3H,GAAZ,CAApC,EAAsD;IAACuG,MAAM,EAAE,KAAT;IAAgBqB,WAAW,EAAE;EAA7B,CAAtD,CAAb;EACA/I,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CAbD;;AAsBA1D,WAAW,CAAC8J,OAAZ,GAAsB,UAASjJ,MAAT,EAA4BmD,IAA5B,EAA0C+F,MAA1C,EAAwD;EAC5E,IAAI9B,GAAG,GAAY;IAACnC,QAAQ,EAAEiE;EAAX,CAAnB;EACA,IAAI3F,GAAJ;EACA,IAAIV,IAAJ;EACA,IAAIsG,MAAJ;;EACA,IAAID,MAAM,KAAKhE,sBAASC,EAAxB,EAA4B;IAC1BiC,GAAG,CAAC,YAAD,CAAH,GAAoBA,GAAG,CAAC,eAAD,CAAH,GAAuB,IAA3C;IACA,IAAML,GAAG,GAAG/G,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAZ;IACA,IAAMtC,KAAK,GAAGkG,GAAG,CAAClG,KAAJ,CAAU,6BAAV,CAAd;;IACA,IAAIA,KAAJ,EAAW;MAETuG,GAAG,CAAC,aAAD,CAAH,GAAqB5B,8BAAY4D,OAAZ,CAAoBC,MAAzC;MACAxG,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6BgH,GAA7B,EAAkCvG,KAAK,CAAC,CAAD,CAAvC,CAAP;IACD,CAJD,MAIO;MAELsI,MAAM,GAAG,IAAI3F,sBAAJ,CAAcuD,GAAd,EAAmB/G,MAAM,CAACoB,KAAP,CAAasC,GAAhC,EAAqC1D,MAAM,CAAC8D,aAA5C,EAA2DP,GAA3D,EAAT;MACAV,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAAC+I,MAAD,CAAjC,EAA2C/B,GAA3C,CAAP;IACD;;IACD7D,GAAG,GAAGvD,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,IAA1B,EAAgCyC,IAAhC,CAAN;EACD,CAdD,MAcO;IAELsG,MAAM,GAAGnJ,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAT;IACAI,GAAG,GAAGvD,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAAC+I,MAAD,CAAjC,EAA2C/B,GAA3C,CAAN;EACD;;EACDpH,MAAM,CAACE,IAAP,CAAYqD,GAAZ;AACD,CAzBD;;AAiCApE,WAAW,CAACmK,QAAZ,GAAuB,UAAStJ,MAAT,EAA4BmD,IAA5B,EAAwC;EAE7D,IAAMoG,IAAI,GAAGvJ,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAb;EACA,IAAIqG,IAAI,GAAGxJ,MAAM,CAAC8G,WAAP,CAAmB3D,IAAnB,EAAyB,EAAzB,EAA6BkC,OAA7B,CAAqC,MAArC,EAA6C,EAA7C,CAAX;EACA,IAAMhC,IAAI,GAAGrD,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAb;EACA,IAAMiE,GAAG,GAAY,EAArB;EACA,IAAMqC,IAAI,GAAa,EAAvB;EACA,IAAI5G,IAAJ;;EACA,IAAI;IACFA,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsBmJ,IAAtB,CAAP;EACD,CAFD,CAEE,OAAOG,CAAP,EAAU;IACV7G,IAAI,GAAG,IAAP;EACD;;EACD,IAAI,CAACA,IAAD,IAAS,CAACA,IAAI,CAAC8G,OAAnB,EAA4B;IAE1B,MAAM,IAAIxH,qBAAJ,CAAa,gBAAb,EAA+B,2BAA/B,EAA4DoH,IAA5D,CAAN;EACD;;EACD,OAAOC,IAAI,KAAK,EAAhB,EAAoB;IAClB,IAAM3I,KAAK,GAAG2I,IAAI,CAAC3I,KAAL,CAAW,mDAAX,CAAd;;IACA,IAAI,CAACA,KAAL,EAAY;MAEV,MAAM,IAAIsB,qBAAJ,CAAa,mBAAb,EAAkC,8BAAlC,EAAkEqH,IAAlE,CAAN;IACD;;IACD,IAAI,CAAC3G,IAAI,CAAC+G,UAAL,CAAgBC,UAAhB,CAA2BhJ,KAAK,CAAC,CAAD,CAAhC,CAAD,IAAyC,CAACxB,aAAa,CAACwB,KAAK,CAAC,CAAD,CAAN,CAA3D,EAAuE;MAErE,MAAM,IAAIsB,qBAAJ,CAAa,uBAAb,EACc,yCADd,EAEctB,KAAK,CAAC,CAAD,CAFnB,EAEwB0I,IAFxB,CAAN;IAGD;;IACD,IAAIO,KAAK,GAAqBlC,uBAAUmC,kBAAV,CAC5B/J,MAD4B,EACpBa,KAAK,CAAC,CAAD,CADe,EACVA,KAAK,CAAC,CAAD,CAAL,CAASwE,OAAT,CAAiB,gBAAjB,EAAmC,IAAnC,CADU,CAA9B;;IAEA,IAAIyE,KAAJ,EAAW;MACT,IAAIA,KAAK,CAACE,WAAN,OAAwB,MAA5B,EAAoC;QAClCF,KAAK,GAAG,IAAR;MACD,CAFD,MAGK,IAAIA,KAAK,CAACE,WAAN,OAAwB,OAA5B,EAAqC;QACxCF,KAAK,GAAG,KAAR;MACD;;MACD1C,GAAG,CAACvG,KAAK,CAAC,CAAD,CAAN,CAAH,GAAgBiJ,KAAhB;MACAL,IAAI,CAACQ,IAAL,CAAUpJ,KAAK,CAAC,CAAD,CAAf;IACD;;IACD2I,IAAI,GAAGA,IAAI,CAACzI,MAAL,CAAYF,KAAK,CAAC,CAAD,CAAL,CAAS+B,MAArB,CAAP;EACD;;EACD,IAAI6G,IAAI,CAAC7G,MAAT,EAAiB;IACfwE,GAAG,CAAC,gBAAD,CAAH,GAAwBqC,IAAI,CAACS,IAAL,CAAU,GAAV,CAAxB;EACD;;EACD,IAAMC,QAAQ,GAAGnK,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsBiD,IAAtB,CAAjB;EACAR,IAAI,CAACuH,WAAL,CAAiBD,QAAjB;EACAvI,sBAASQ,aAAT,CAAuBS,IAAvB,EAA6BuE,GAA7B;EACApH,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CAlDD;;AA0DA1D,WAAW,CAACkL,KAAZ,GAAoB,UAASrK,MAAT,EAA4BgE,KAA5B,EAAyC;EAE3D,IAAMsG,GAAG,GAAGtK,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,MAAtB,CAAZ;EACA,IAAMmK,MAAM,GAAGvK,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACkK,GAAD,CAAjC,EACwC;IAACE,MAAM,EAAE,OAAT;IAAkBC,KAAK,EAAE,KAAzB;IAAgC7F,KAAK,EAAE;EAAvC,CADxC,CAAf;EAEA5E,MAAM,CAACE,IAAP,CAAYqK,MAAZ;AACD,CAND;;AAeApL,WAAW,CAACuL,OAAZ,GAAsB,UAAS1K,MAAT,EAA4BmD,IAA5B,EAA0CwH,CAA1C,EAAqDC,CAArD,EAA8D;EAElF,IAAIC,GAAG,GAAG7K,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,UAAtB,EAAkC,CAACJ,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAD,CAAlC,CAAV;;EACA,IAAIwH,CAAC,IAAIC,CAAT,EAAY;IAEVC,GAAG,GAAG7K,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACyK,GAAD,CAAjC,CAAN;;IACA,IAAID,CAAJ,EAAO;MAELhJ,sBAASsG,YAAT,CAAsB2C,GAAtB,EAA2B,QAA3B,EAAqC,CAArC;MACAjJ,sBAASsG,YAAT,CAAsB2C,GAAtB,EAA2B,OAA3B,EAAoC,CAApC;IACD;;IACD,IAAIF,CAAJ,EAAO;MAEL/I,sBAASsG,YAAT,CAAsB2C,GAAtB,EAA2B,OAA3B,EAAoC,CAApC;IACD;EACF;;EACD,IAAMC,IAAI,GAAG9K,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACyK,GAAD,CAAjC,CAAb;EACA7K,MAAM,CAACE,IAAP,CAAY4K,IAAZ;AACD,CAlBD;;AAyBA3L,WAAW,CAAC4L,KAAZ,GAAoB,UAAS/K,MAAT,EAA4BmD,IAA5B,EAAwC;EAE1D,IAAM6H,EAAE,GAAGpD,uBAAUqD,UAAV,CAAqBjL,MAAM,CAAC8G,WAAP,CAAmB3D,IAAnB,EAAyB,EAAzB,CAArB,CAAX;EACA,IAAM+H,KAAK,GAAGlL,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACJ,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAD,CAAjC,CAAd;;EAEA,QAAQ6H,EAAR;IACA,KAAK,GAAL;MAAUpJ,sBAASsG,YAAT,CAAsBgD,KAAtB,EAA6B,OAA7B,EAAsC,CAAtC;MAA0C;;IACpD,KAAK,GAAL;MAAUtJ,sBAASsG,YAAT,CAAsBgD,KAAtB,EAA6B,QAA7B,EAAuC,CAAvC;MAA2C;;IACrD;MACEtJ,sBAASsG,YAAT,CAAsBgD,KAAtB,EAA6B,QAA7B,EAAuC,CAAvC;MACAtJ,sBAASsG,YAAT,CAAsBgD,KAAtB,EAA6B,OAA7B,EAAsC,CAAtC;EALF;;EAOA,IAAMJ,IAAI,GAAG9K,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAAC8K,KAAD,CAAjC,CAAb;EACAlL,MAAM,CAACE,IAAP,CAAY4K,IAAZ;AACD,CAdD;;AAqBA3L,WAAW,CAACgM,GAAZ,GAAkB,UAASnL,MAAT,EAA4BmD,IAA5B,EAAwC;EAExD,IAAMI,GAAG,GAAGvD,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACJ,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAD,CAAjC,EAA0D;IAACyB,KAAK,EAAE;EAAR,CAA1D,CAAZ;;EACA,IAAIzB,IAAI,KAAK,QAAb,EAAuB;IAErBvB,sBAASsG,YAAT,CAAsB3E,GAAtB,EAA2B,QAA3B,EAAqC,SAArC;EACD;;EACD,IAAMuH,IAAI,GAAG9K,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACmD,GAAD,CAAjC,CAAb;EACAvD,MAAM,CAACE,IAAP,CAAY4K,IAAZ;AACD,CATD;;AAgBA3L,WAAW,CAACiM,UAAZ,GAAyB,UAASpL,MAAT,EAA4BmD,IAA5B,EAAwC;EAE/D,IAAIyH,CAAC,GAAG5K,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB,CAAR;EACA,IAAIkI,IAAI,GACNrL,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,UAA1B,EAAsCgC,aAAtC,CAAoD;IAACe,IAAI,EAAEnD,MAAM,CAACgG,SAAd;IAAyBsF,IAAI,EAAE;EAA/B,CAApD,CADF;;EAGA,IAAIV,CAAC,CAAC5H,MAAF,CAAS,CAAT,MAAgB,GAApB,EAAyB;IAEvB4H,CAAC,GAAGA,CAAC,CAACW,KAAF,CAAQ,CAAR,CAAJ;IACApI,IAAI,GAAGA,IAAI,CAACpC,MAAL,CAAY,CAAZ,MAAmB,OAAnB,GAA6B,SAA7B,GAAyC,SAAhD;EACD;;EACD,IAAIoC,IAAI,KAAK,SAAb,EAAwB;IAEtBkI,IAAI,CAACjH,WAAL,CAAiB,IAAjB,EAAuB,MAAMwG,CAA7B;IACAS,IAAI,CAACjH,WAAL,CAAiB,IAAjB,EAAuB,MAAMwG,CAA7B;EACD,CAJD,MAIO;IAELS,IAAI,CAACjH,WAAL,CAAiB,IAAjB,EAAuB,MAAMwG,CAA7B;IACAS,IAAI,CAACjH,WAAL,CAAiB,IAAjB,EAAuB,MAAMwG,CAA7B;EACD;;EACD5K,MAAM,CAACE,IAAP,CAAYmL,IAAZ;AACD,CArBD;;AA6BAlM,WAAW,CAACqM,aAAZ,GAA4B,UAASxL,MAAT,EAA4BmD,IAA5B,EAAwC;EAElE,IAAIyH,CAAC,GAAG5K,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB,CAAR;EACA,IAAIsI,EAAE,GAAIb,CAAC,CAAC5H,MAAF,CAAS,CAAT,MAAgB,GAAhB,GAAsB4H,CAAC,CAACW,KAAF,CAAQ,CAAR,CAAtB,GAAmC,MAAMX,CAAnD;;EACA,IAAIzH,IAAI,KAAK,YAAb,EAA2B;IACzB,IAAIuI,GAAG,GAAGd,CAAV;IACAA,CAAC,GAAGa,EAAJ;IACAA,EAAE,GAAGC,GAAL;EACD;;EACD1L,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,UAA1B,EAAsCgC,aAAtC,CAAoD;IAClDe,IAAI,EAAEnD,MAAM,CAACgG,SADqC;IAC1BsF,IAAI,EAAE,YADoB;IAElDK,IAAI,EAAG3L,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,EAAhC,EAAoC;MAACwE,KAAK,EAAEgG;IAAR,CAApC,CAF2C;IAGlDgB,KAAK,EAAE5L,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,EAAhC,EAAoC;MAACwE,KAAK,EAAE6G;IAAR,CAApC;EAH2C,CAApD,CADF;AAKD,CAdD;;AAsBAtM,WAAW,CAAC0M,KAAZ,GAAoB,UAAS7L,MAAT,EAA4BmD,IAA5B,EAAwC;EAE1D,IAAMN,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,EAAhC,EACc;IAACwE,KAAK,EAAE5E,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB;EAAR,CADd,CAAb;EAEAnD,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CALD;;AAaA1D,WAAW,CAAC2M,SAAZ,GAAwB,UAAS9L,MAAT,EAA4BgE,KAA5B,EAAyC;EAC/DhE,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,WAA1B,CAAZ;AACD,CAFD;;AAWAjB,WAAW,CAAC4M,IAAZ,GAAmB,UAAS/L,MAAT,EAA4BmD,IAA5B,EAA0CrD,KAA1C,EAAuD;EAExE,IAAMkM,CAAC,GAAGhM,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB,CAAV;EAAA,IACAyH,CAAC,GAAG5K,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB,CADJ;EAAA,IAEA8I,CAAC,GAAGjM,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB,CAFJ;EAGA,IAAIiE,GAAG,GAAY;IAACxC,KAAK,EAAEoH,CAAR;IAAWxB,MAAM,EAAEI,CAAnB;IAAsBH,KAAK,EAAEwB;EAA7B,CAAnB;;EACA,IAAInM,KAAK,KAAK,OAAd,EAAuB;IACrBsH,GAAG,CAAC,gBAAD,CAAH,GAAyBpH,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiB,OAAjB,KAA6B,OAAtD;EACD;;EACD,IAAMb,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,EAAhC,EAAoCgH,GAApC,CAAb;EACApH,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CAXD;;AAmBA1D,WAAW,CAAC+M,IAAZ,GAAmB,UAASlM,MAAT,EAA4BmD,IAA5B,EAAwC;EAEzD,IAAMwH,CAAC,GAAG3K,MAAM,CAAC8G,WAAP,CAAmB3D,IAAnB,CAAV;EAAA,IACA6I,CAAC,GAAGhM,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB,CADJ;EAAA,IAEAyH,CAAC,GAAG5K,MAAM,CAACuG,QAAP,CAAgBpD,IAAhB,CAFJ;EAGA,IAAII,GAAG,GAAGvD,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,EAAhC,EAAoC;IAC5CwE,KAAK,EAAEoH,CADqC;IAClCxB,MAAM,EAAEI,CAD0B;IAE5CuB,cAAc,EAAGnM,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiB,OAAjB,KAA6B;EAFF,CAApC,CAAV;;EAGA,IAAIiH,CAAJ,EAAO;IACLpH,GAAG,GAAGvD,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACmD,GAAD,CAAjC,EAAwC;MAAC6I,OAAO,EAAEzB;IAAV,CAAxC,CAAN;;IACA,IAAIA,CAAC,CAAC9J,KAAF,CAAQ,KAAR,CAAJ,EAAoB;MAClBe,sBAASsG,YAAT,CAAsB3E,GAAtB,EAA2B,QAA3B,EAAqCoH,CAArC;MACA/I,sBAASsG,YAAT,CAAsB3E,GAAtB,EAA2B,OAA3B,EAAoC,MAAMoH,CAAC,CAAC5J,MAAF,CAAS,CAAT,CAA1C;IACD,CAHD,MAGO;MACLa,sBAASsG,YAAT,CAAsB3E,GAAtB,EAA2B,QAA3B,EAAqC,MAAMoH,CAA3C;IACD;EACF;;EACD3K,MAAM,CAACE,IAAP,CAAYqD,GAAZ;AACD,CAlBD;;AA2BApE,WAAW,CAACkN,OAAZ,GAAsB,UAASrM,MAAT,EAA4BmD,IAA5B,EAA0C+F,MAA1C,EAA0D1E,IAA1D,EAAsE;EAE1FA,IAAI,IAAIpF,QAAR;EACA,IAAIkN,OAAO,GAAGC,MAAM,CAAC/H,IAAD,CAAN,CAAaa,OAAb,CAAqB,cAArB,EAAqC,IAArC,IAA6C,IAA3D;EACA,IAAMmH,KAAK,GAAGxM,MAAM,CAAC+E,YAAP,CAAoB5B,IAApB,EAA0B,IAA1B,CAAd;EACA,IAAMgF,EAAE,GAAGnI,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B;IACtCqM,OAAO,EAAEH,OAD6B;IACpBI,OAAO,EAAEJ,OADW;IAEtCK,KAAK,EAAE,IAF+B;IAEzBhF,QAAQ,EAAE,IAFe;IAETiF,SAAS,EAAE;EAFF,CAA7B,EAGRJ,KAHQ,CAAX;EAIA,IAAM3J,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAAC+H,EAAD,CAAjC,EAAuC;IAAClD,QAAQ,EAAEiE;EAAX,CAAvC,CAAb;EACAlJ,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CAXD;;AAmBA1D,WAAW,CAAC0N,QAAZ,GAAuB,UAAS7M,MAAT,EAA4BmD,IAA5B,EAAwC;EAE7D,IAAMhC,GAAG,GAAGnB,MAAM,CAAC8M,SAAP,CAAiB3J,IAAjB,EAAuB,QAAvB,CAAZ;EACA,IAAM2F,GAAG,GAAG9I,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAZ;EACA,IAAMN,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,YAAtB,CAAb;EAEAwB,sBAAS0G,QAAT,CAAkBzF,IAAlB,EAAwB,CAAxB,EAA2BiG,GAA3B;EACAlH,sBAAS0G,QAAT,CAAkBzF,IAAlB,EAAwB,CAAxB,EAA2B,IAA3B;EACAjB,sBAAS0G,QAAT,CAAkBzF,IAAlB,EAAwB,CAAxB,EAA2B1B,GAA3B;EACA,IAAM2J,IAAI,GAAG9K,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiC,CAACyC,IAAD,CAAjC,EAAyC;IAACoC,QAAQ,EAAEC,sBAAS6H;EAApB,CAAzC,CAAb;EACA/M,MAAM,CAACE,IAAP,CAAY4K,IAAZ;AACD,CAXD;;AAqBA3L,WAAW,CAAC6N,IAAZ,GAAmB,UAAShN,MAAT,EAA4BmD,IAA5B,EAA0CrD,KAA1C,EAAyD6D,IAAzD,EAAsE;EAEvF3D,MAAM,CAACiN,OAAP,CAAerF,uBAAUsF,YAAV,CAAuBlN,MAAvB,EAA+BA,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAA/B,EAAyDrD,KAAzD,EAAgE6D,IAAhE,CAAf;AACD,CAHD;;AAUAxE,WAAW,CAACgO,IAAZ,GAAmB,UAASnN,MAAT,EAA4BmD,IAA5B,EAAwC;EAEzD,IAAMiK,QAAQ,GAAGxF,uBAAUsF,YAAV,CAAuBlN,MAAvB,EAA+BA,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAA/B,CAAjB;EACA,IAAMN,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,UAAtB,EAAkCgN,QAAlC,EAA4C;IAACC,QAAQ,EAAE;EAAX,CAA5C,CAAb;EACArN,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CALD;;AAYA1D,WAAW,CAACmO,QAAZ,GAAuB,UAAStN,MAAT,EAA4BmD,IAA5B,EAAwC;EAC7D,IAAMyB,KAAK,GAAG5E,MAAM,CAAC8G,WAAP,CAAmB3D,IAAnB,CAAd;EACA,IAAMsF,GAAG,GAAGzI,MAAM,CAAC8G,WAAP,CAAmB3D,IAAnB,KAA4B,GAAxC;EACA,IAAII,GAAG,GAAGqE,uBAAUsF,YAAV,CAAuBlN,MAAvB,EAA+BA,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAA/B,CAAV;;EACA,IAAIyB,KAAJ,EAAW;IACTrB,GAAG,GAAG,CAACvD,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EAAiCmD,GAAjC,EAAsC;MAC3CqB,KAAK,OADsC;MAE3C,cAAc,yBAAO6D,GAAP,EAAY;QAAC8E,CAAC,EAAE,MAAJ;QAAYC,CAAC,EAAE;MAAf,CAAZ,EAAqC,QAArC;IAF6B,CAAtC,CAAD,CAAN;EAID;;EACD,IAAM3K,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,SAAtB,EACc,CAACJ,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,UAAtB,EAAkCmD,GAAlC,EAAuC;IAAC8J,QAAQ,EAAE;EAAX,CAAvC,CAAD,CADd,EAEc;IAACpI,QAAQ,EAAEC,sBAASuI;EAApB,CAFd,CAAb;EAGAzN,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CAdD;;AAsBA1D,WAAW,CAACuO,GAAZ,GAAkB,UAAS1N,MAAT,EAA4BgE,KAA5B,EAAyC;EAGzDhE,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,KAA1B,CAAZ;AACD,CAJD;;AAYAjB,WAAW,CAACwO,IAAZ,GAAmB,UAAS3N,MAAT,EAA4BgE,KAA5B,EAAyC;EAE1D,IAAM4J,WAAW,GAAGhM,sBAASoG,YAAT,CAAsB,MAAtB,CAApB;EACA,IAAM6F,WAAW,GAAGjM,sBAASoG,YAAT,CAAsB,MAAtB,CAApB;EACA,IAAM8F,KAAK,GAAG9N,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B;IAACuH,QAAQ,EAAE;EAAX,CAA7B,EAAgDiG,WAAhD,CAAd;EACA,IAAMG,KAAK,GAAG/N,MAAM,CAACI,MAAP,CAAc,OAAd,EAAuB,IAAvB,EAA6B;IAACuH,QAAQ,EAAE;EAAX,CAA7B,EAAgDkG,WAAhD,CAAd;EACA7N,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,MAA1B,EAAkCgC,aAAlC,CAAgD;IAC9C0L,KAAK,EAAEA,KADuC;IAE9CC,KAAK,EAAEA;EAFuC,CAAhD,CADF;AAKD,CAXD;;AA2BA5O,WAAW,CAAC6O,MAAZ,GAAqB,UAAShO,MAAT,EAA4BgE,KAA5B,EACSqC,IADT,EACuBC,KADvB,EACsC2H,KADtC,EAESC,OAFT,EAE0BC,QAF1B,EAE4CrO,KAF5C,EAGSsO,KAHT,EAGyBC,QAHzB,EAG0C;EAC7D,IAAM5L,CAAC,GAAGzC,MAAM,CAACY,OAAP,EAAV;;EACA,IAAI6B,CAAC,KAAK,EAAV,EAAc;IAEZ,MAAM,IAAIN,qBAAJ,CAAa,eAAb,EAA8B,yBAA9B,EAAyDnC,MAAM,CAACgG,SAAhE,CAAN;EACD;;EACD,IAAIvD,CAAC,KAAK,GAAV,EAAe;IAEbzC,MAAM,CAACgB,CAAP;EACD,CAHD,MAGO;IAELhB,MAAM,CAACc,MAAP,GAAgB2B,CAAC,GAAG,GAAJ,GAAUzC,MAAM,CAACc,MAAP,CAAcyK,KAAd,CAAoBvL,MAAM,CAACgB,CAAP,GAAW,CAA/B,CAA1B;IACAhB,MAAM,CAACgB,CAAP,GAAW,CAAX;EACD;;EAED,IAAMsN,KAAK,GAAGtO,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,OAA1B,EAAmCgE,WAAnC,CAA+C,cAA/C,EAA+D,IAA/D,CAAd;EACAkK,KAAK,CAACC,QAAN,GAAiB;IACfC,UAAU,EAAGL,QAAQ,IAAI,KADV;IAEfM,aAAa,EAAGP,OAAO,IAAI;EAFZ,CAAjB;;EAIA,IAAIE,KAAJ,EAAW;IAETE,KAAK,CAAClK,WAAN,CAAkB,SAAlB,EAA6B,IAA7B;EACD;;EACD,IAAIiK,QAAJ,EAAc;IAEZC,KAAK,CAAClK,WAAN,CAAkB,YAAlB,EAAgC,IAAhC;IACAkK,KAAK,CAACC,QAAN,CAAeG,IAAf,GAAsBL,QAAtB;EACD;;EACD,IAAIhI,IAAI,IAAIC,KAAZ,EAAmB;IAEjBgI,KAAK,CAAClK,WAAN,CAAkB,MAAlB,EAA0BiC,IAA1B;IACAiI,KAAK,CAAClK,WAAN,CAAkB,OAAlB,EAA2BkC,KAA3B;EACD;;EACD,IAAIxG,KAAK,KAAK,GAAd,EAAmB;IAEjBwO,KAAK,CAACC,QAAN,CAAelK,YAAf,GAA8B,IAA9B;EACD;;EACD,IAAI4J,KAAK,IAAI,IAAb,EAAmB;IAEjBK,KAAK,CAACC,QAAN,CAAeI,WAAf,GAA6BV,KAA7B;EACD;;EACDjO,MAAM,CAACE,IAAP,CAAYoO,KAAZ;AACD,CA9CD;;AAsDAnP,WAAW,CAACyP,KAAZ,GAAoB,UAAS5O,MAAT,EAA4BmD,IAA5B,EAAwC;EAE1DnD,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,MAA1B,EAAkCgC,aAAlC,CAAgD;IAACyM,OAAO,EAAE,IAAV;IAAgB1L,IAAI,EAAEA;EAAtB,CAAhD,CAAZ;EACA,IAAMhC,GAAG,GAAGnB,MAAM,CAACoB,KAAP,CAAaC,GAAb,EAAZ;EACA,IAAMqC,GAAG,GAAGvC,GAAG,CAACU,WAAJ,CAAgB,UAAhB,CAAZ;EACA,IAAMuM,KAAK,GAAGjN,GAAG,CAACU,WAAJ,CAAgB,SAAhB,CAAd;EACA,IAAI,CAACuM,KAAD,IAAU,CAAC1K,GAAf,EAAoB;EAKpB,IAAMoL,GAAG,GAAG9O,MAAM,CAACc,MAAnB;EACA,IAAIiO,MAAM,GAAG,CAAb;EAAA,IAAgBzI,KAAK,GAAG,CAAC,CAAzB;EAAA,IAA4BtF,CAAC,GAAGhB,MAAM,CAACgB,CAAvC;EAAA,IAA0CgO,CAAC,GAAGF,GAAG,CAAClM,MAAlD;EACA,IAAMqM,GAAG,GAAIvL,GAAG,GAAG,IAAIwL,MAAJ,CAAW,yBAAkBxL,GAAG,CAAC2B,OAAJ,CAAY,IAAZ,EAAkB,KAAlB,CAAlB,EAA0C,KAA1C,CAAX,CAAH,GAAiE,IAAjF;;EAIA,OAAOrE,CAAC,GAAGgO,CAAX,EAAc;IACZ,IAAMvM,CAAC,GAAGqM,GAAG,CAAC9L,MAAJ,CAAWhC,CAAX,CAAV;;IACA,IAAIyB,CAAC,KAAK,GAAV,EAAe;MAIbsM,MAAM;MACN/N,CAAC;IACF,CAND,MAMO,IAAIyB,CAAC,KAAK,GAAV,EAAe;MAUpB,IAAIsM,MAAM,KAAK,CAAf,EAAkB;QAChBC,CAAC,GAAG,CAAJ;MACD,CAFD,MAEO;QACLD,MAAM;;QACN,IAAIA,MAAM,KAAK,CAAX,IAAgBzI,KAAK,GAAG,CAA5B,EAA+B;UAC7BA,KAAK,GAAGtF,CAAC,GAAGhB,MAAM,CAACgB,CAAnB;QACD;;QACDA,CAAC;MACF;IACF,CAnBM,MAmBA,IAAIyB,CAAC,KAAK,GAAN,IAAasM,MAAM,KAAK,CAA5B,EAA+B;MAKpC,MAAM,IAAI5M,qBAAJ,CAAa,eAAb,EAA8B,qCAA9B,CAAN;IACD,CANM,MAMA,IAAIM,CAAC,KAAK,IAAV,EAAgB;MAMrB,IAAM0M,IAAI,GAAGL,GAAG,CAAC/N,MAAJ,CAAWC,CAAX,CAAb;;MACA,IAAImO,IAAI,CAACtO,KAAL,CAAW,yBAAX,KAA0CoO,GAAG,IAAIE,IAAI,CAACtO,KAAL,CAAWoO,GAAX,CAArD,EAAuE;QACrED,CAAC,GAAG,CAAJ;MACD,CAFD,MAEO;QACLhO,CAAC,IAAI,CAAL;MACD;IACF,CAZM,MAYA;MAILA,CAAC;IACF;EACF;;EAMD,IAAMqC,IAAI,GAAGyL,GAAG,CAAC/N,MAAJ,CAAWf,MAAM,CAACgB,CAAlB,EAAqBA,CAAC,GAAGhB,MAAM,CAACgB,CAAhC,CAAb;;EACA,IAAI,CAACqC,IAAI,CAACxC,KAAL,CAAW,qBAAX,CAAD,IAAsCyF,KAAK,KAAKjD,IAAI,CAACgC,OAAL,CAAa,MAAb,EAAqB,EAArB,EAAyBzC,MAAzB,GAAkC,CAAtF,EAAyF;IACvF,IAAMwK,QAAQ,GAAGxF,uBAAUsF,YAAV,CAAuBlN,MAAvB,EAA+B4H,uBAAUqD,UAAV,CAAqB5H,IAArB,CAA/B,EAA2D,CAA3D,CAAjB;IACArD,MAAM,CAACiN,OAAP,CAAeG,QAAf;IACApN,MAAM,CAACgB,CAAP,GAAWA,CAAX;EACD;AACF,CAhFD;;AAuFA7B,WAAW,CAACiQ,EAAZ,GAAiB,UAASpP,MAAT,EAA4BmD,IAA5B,EAAwC;EAEvDnD,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,MAA1B,EAAkCgC,aAAlC,CAAgD;IAACiN,IAAI,EAAE,IAAP;IAAalM,IAAI,EAAEA;EAAnB,CAAhD,CADF;AAED,CAJD;;AAcAhE,WAAW,CAACmQ,OAAZ,GAAsB,UAAStP,MAAT,EAA4BmD,IAA5B,EAA0CoM,UAA1C,EAAqE;EAA3B;IAAAA;EAA2B;;EACzF,IAAI1I,CAAJ;;EACA,IAAI,CAAC0I,UAAL,EAAiB;IAGf,IAAIvP,MAAM,CAACc,MAAP,CAAckC,MAAd,CAAqBhD,MAAM,CAACgB,CAA5B,MAAmC,GAAvC,EAA4C;MAC1ChB,MAAM,CAACgB,CAAP;IACD;;IACD,IAAIhB,MAAM,CAACc,MAAP,CAAckC,MAAd,CAAqBhD,MAAM,CAACgB,CAA5B,MAAmC,GAAvC,EAA4C;MAC1C,IAAIwO,GAAG,GAAGxP,MAAM,CAAC8G,WAAP,CAAmB3D,IAAnB,EAAyB,EAAzB,CAAV;;MACI,gBAAkByE,uBAAU6H,UAAV,CAAqBD,GAArB,CAAlB,EAA2C,CAA3C;MAAA,IAAC1F,KAAK,QAAN;MAAA,IAAQ4F,IAAI,QAAZ;;MAEJ,IAAIF,GAAG,IAAI,CAAC1F,KAAZ,EAAmB;QAEjB,MAAM,IAAI3H,qBAAJ,CAAa,wBAAb,EACa,4CADb,EAC2DnC,MAAM,CAACgG,SADlE,CAAN;MAED;;MACDa,CAAC,GAAGiD,KAAK,GAAG4F,IAAZ;IACD;EACF;;EACD1P,MAAM,CAACE,IAAP,CACEF,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,MAA1B,EAAkCgC,aAAlC,CAAgD;IAACiN,IAAI,EAAE,IAAP;IAAalM,IAAI,EAAEA,IAAnB;IAAyBwM,SAAS,EAAE;EAApC,CAAhD,CADF;EAGA,IAAMxO,GAAG,GAAGnB,MAAM,CAACoB,KAAP,CAAaC,GAAb,EAAZ;EACA,IAAIwB,IAAJ;;EACA,IAAI1B,GAAG,YAAYyO,KAAK,CAACC,SAAzB,EAAoC;IAElC,IAAIhJ,CAAJ,EAAO;MACL1F,GAAG,CAAC2O,aAAJ,CAAkBjJ,CAAlB;IACD;EACF,CALD,MAKO;IACL,IAAIA,CAAJ,EAAO;MAELhE,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,EAAhC,EAAoC;QAACqK,KAAK,EAAE5D;MAAR,CAApC,CAAP;MACA7G,MAAM,CAACE,IAAP,CAAY2C,IAAZ;IACD;;IAEDA,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,QAAtB,EAAgC,EAAhC,EAAoC;MAACuP,SAAS,EAAEnK,8BAAYuK,SAAZ,CAAsBC;IAAlC,CAApC,CAAP;IACAhQ,MAAM,CAACE,IAAP,CAAY2C,IAAZ;EACD;AACF,CAxCD;;AAgDA1D,WAAW,CAAC8Q,KAAZ,GAAoB,UAASjQ,MAAT,EAA4BgE,KAA5B,EAA2ClE,KAA3C,EAAwD;EAC1E,IAAIA,KAAK,IAAI,IAAb,EAAmB;IACjBA,KAAK,GAAG,OAAR;EACD;;EACD,IAAMqB,GAAG,GAAGnB,MAAM,CAACoB,KAAP,CAAaC,GAAb,EAAZ;;EACA,IAAI,EAAEF,GAAG,YAAYyO,KAAK,CAACC,SAAvB,KAAqC1O,GAAG,CAAC+O,IAAJ,EAAzC,EAAqD;IAEnD,MAAM,IAAI/N,qBAAJ,CAAa,WAAb,EAA0B,cAA1B,EAA0CnC,MAAM,CAACgG,SAAjD,CAAN;EACD;;EACD,IAAI,CAAC7E,GAAG,CAACgP,KAAJ,CAAUvN,MAAf,EAAuB;IAErBzB,GAAG,CAACiP,KAAJ,CAAUnG,IAAV,CAAe,KAAf;EACD,CAHD,MAGO;IAEL,IAAMoG,KAAK,GAAIlP,GAAG,CAACoN,QAAJ,CAAa,UAAb,IAA4BpN,GAAG,CAACoN,QAAJ,CAAa,UAAb,EAAoC+B,KAApC,CAA0C,GAA1C,CAA5B,GAA6E,EAA5F;;IACA,OAAOD,KAAK,CAACzN,MAAN,GAAezB,GAAG,CAACgP,KAAJ,CAAUvN,MAAhC,EAAwC;MACtCyN,KAAK,CAACpG,IAAN,CAAW,MAAX;IACD;;IACDoG,KAAK,CAAClP,GAAG,CAACgP,KAAJ,CAAUvN,MAAV,GAAmB,CAApB,CAAL,GAA8B9C,KAA9B;IACAqB,GAAG,CAACoN,QAAJ,CAAa,UAAb,IAA2B8B,KAAK,CAACnG,IAAN,CAAW,GAAX,CAA3B;EACD;AACF,CArBD;;AA6BA/K,WAAW,CAACoR,KAAZ,GAAoB,UAASvQ,MAAT,EAA4BgE,KAA5B,EAAyC;EAC3D,IAAM7C,GAAG,GAAGnB,MAAM,CAACoB,KAAP,CAAaC,GAAb,EAAZ;;EACA,IAAIF,GAAG,YAAYyO,KAAK,CAACC,SAAzB,EAAoC;IAElC1O,GAAG,CAACqP,KAAJ,CAAUvG,IAAV,CAAe9I,GAAG,CAAC+O,IAAJ,EAAf;EACD,CAHD,MAGO;IAEL,MAAM,IAAI/N,qBAAJ,CAAa,kBAAb,EAAiC,uBAAjC,EAA0DnC,MAAM,CAACgG,SAAjE,CAAN;EACD;AACF,CATD;;AAqBA7G,WAAW,CAACsR,QAAZ,GAAuB,UAASzQ,MAAT,EAA4BmD,IAA5B,EAAwC;EAE7D,IAAIO,GAAG,GAAG1D,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAV;;EACA,IAAIO,GAAG,CAAC7C,KAAJ,CAAU,KAAV,CAAJ,EAAsB;IAEpB,MAAM,IAAIsB,qBAAJ,CAAa,YAAb,EAA2B,iCAA3B,EAA8DuB,GAA9D,CAAN;EACD;;EACD,IAAIgN,KAAK,GAAG1Q,MAAM,CAAC8D,aAAP,CAAqB6M,QAArB,CAA8BC,GAA9B,CAAkC,aAAlC,EAAiDC,MAAjD,CAAwDnN,GAAxD,CAAZ;;EACA,IAAIgN,KAAK,IAAIvN,IAAI,KAAK,OAAtB,EAA+B;IAI7B,IAAI,CAACuN,KAAK,CAACI,IAAN,CAAW,CAAX,CAAL,EAAoB;MAClB,IAAMvN,GAAG,GAAGvD,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,KAA1B,EAAiCgE,WAAjC,CAA6C,MAA7C,EAAqDV,GAArD,CAAZ;MACA1D,MAAM,CAACE,IAAP,CAAYqD,GAAZ;MACA;IACD;;IAEDvD,MAAM,CAACoB,KAAP,CAAasC,GAAb,CAAiB,SAAjB,IAA8BA,GAA9B;EACD;;EACDkE,uBAAUmJ,cAAV,CAAyB/Q,MAAzB,EAAiC,KAAjC;EACAA,MAAM,CAACgR,KAAP,CAAa,aAAb,EAA4B,CAAChR,MAAD,EAAS0D,GAAT,CAA5B;AACD,CAtBD;;AAqCAvE,WAAW,CAAC8R,KAAZ,GAAoB,UAASjR,MAAT,EAA4BkR,KAA5B,EACS7K,IADT,EACuBC,KADvB,EACsC2H,KADtC,EAESC,OAFT,EAE0BC,QAF1B,EAE4CrO,KAF5C,EAGSqR,YAHT,EAG8B;EAChD,IAAI,CAAClD,KAAL,EAAY;IAEVA,KAAK,GAAGjO,MAAM,CAACsD,WAAP,CAAmB,aAAa4N,KAAK,CAACE,OAAN,EAAb,GAA+B,GAAlD,CAAR;EACD;;EACD,IAAIf,KAAK,GAAG,CAAC,MAAMpC,KAAP,EAAc5I,OAAd,CAAsB,WAAtB,EAAmC,EAAnC,EAAuCA,OAAvC,CAA+C,eAA/C,EAAgE,IAAhE,CAAZ;EACA4I,KAAK,GAAGA,KAAK,CAAC5I,OAAN,CAAc,SAAd,EAAyB,EAAzB,EAA6BiL,KAA7B,CAAmC,EAAnC,EAAuCpG,IAAvC,CAA4C,GAA5C,CAAR;EACA+D,KAAK,GAAGA,KAAK,CAAC5I,OAAN,CAAc,IAAd,EAAoB,MAApB,EAA4BA,OAA5B,CAAoC,IAApC,EAA0C,OAA1C,EAAmDA,OAAnD,CAA2D,IAA3D,EAAiE,QAAjE,CAAR;EACA,IAAMiJ,KAAK,GAAGtO,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,OAA1B,CAAd;EACAkO,KAAK,CAACC,QAAN,GAAiB;IACfI,WAAW,EAAEV,KADE;IAEfQ,aAAa,EAAGP,OAAO,IAAI,KAFZ;IAGfM,UAAU,EAAGL,QAAQ,IAAI;EAHV,CAAjB;;EAKA,IAAIkC,KAAK,CAACxP,KAAN,CAAY,MAAZ,CAAJ,EAAyB;IAEvB,IAAIwP,KAAK,CAACrN,MAAN,CAAa,CAAb,EAAgBnC,KAAhB,CAAsB,MAAtB,CAAJ,EAAmC;MAEjCyN,KAAK,CAAC8B,KAAN,CAAYnG,IAAZ,CAAiB,MAAjB;MACAqE,KAAK,CAAC+C,MAAN,GAAehB,KAAK,CAACrN,MAAN,CAAa,CAAb,MAAoB,GAAnC;IACD;;IACD,IAAIqN,KAAK,CAACrN,MAAN,CAAaqN,KAAK,CAACzN,MAAN,GAAe,CAA5B,EAA+B/B,KAA/B,CAAqC,MAArC,CAAJ,EAAkD;MAEhDyN,KAAK,CAAC8B,KAAN,CAAYnG,IAAZ,CAAiB,OAAjB;IACD;;IAEDoG,KAAK,GAAGA,KAAK,CAACtP,MAAN,CAAa,CAAb,EAAgBsP,KAAK,CAACzN,MAAN,GAAe,CAA/B,CAAR;IACA0L,KAAK,CAACC,QAAN,CAAe+C,WAAf,GACEjB,KAAK,CAACC,KAAN,CAAY,EAAZ,EAAgBpG,IAAhB,CAAqB,GAArB,EAA0B7E,OAA1B,CAAkC,SAAlC,EAA6C,MAA7C,EAAqDA,OAArD,CAA6D,KAA7D,EAAoE,OAApE,EAA6EA,OAA7E,CAAqF,IAArF,EAA2F,QAA3F,CADF;EAED;;EACD,IAAIgB,IAAJ,EAAW;IAETiI,KAAK,CAAClK,WAAN,CAAkB,MAAlB,EAA0BpE,MAAM,CAACuR,gBAAP,CAAwBlL,IAAxB,CAA1B;EACD;;EACD,IAAIC,KAAJ,EAAW;IAETgI,KAAK,CAAClK,WAAN,CAAkB,OAAlB,EAA2BpE,MAAM,CAACuR,gBAAP,CAAwBjL,KAAxB,CAA3B;EACD;;EACD,IAAI,CAACxG,KAAK,IAAI,EAAV,EAAckD,MAAd,CAAqB,CAArB,MAA4B,IAAhC,EAAsC;IACpCsL,KAAK,CAACC,QAAN,CAAe,cAAf,IAAiC,IAAjC;IACAzO,KAAK,GAAGA,KAAK,CAACkD,MAAN,CAAa,CAAb,CAAR;EACD;;EACD,IAAIlD,KAAK,KAAK,GAAd,EAAmB;IAEjBwO,KAAK,CAACC,QAAN,CAAe,cAAf,IAAiC,IAAjC;EACD,CAHD,MAIK,IAAIzO,KAAJ,EAAW;IAEdwO,KAAK,CAACC,QAAN,CAAe,cAAf,IAAiC,KAAjC;EACD;;EACD,IAAIzO,KAAK,KAAK,GAAd,EAAmB;IAEjBwO,KAAK,CAACC,QAAN,CAAe,aAAf,IAAgC,CAAhC;EACD;;EACD,IAAI4C,YAAJ,EAAmB;IAEjB7C,KAAK,CAACC,QAAN,CAAe,WAAf,IAA8B,KAA9B;EACD;;EACDvO,MAAM,CAACE,IAAP,CAAYgR,KAAZ;EACA,OAAO5C,KAAP;AACD,CA/DD;;AAuEAnP,WAAW,CAACqS,YAAZ,GAA2B,UAASxR,MAAT,EAA4BkR,KAA5B,EAA4C;EAErE,IAAMjD,KAAK,GAAGjO,MAAM,CAAC8G,WAAP,CAAmB,aAAaoK,KAAK,CAACE,OAAN,EAAb,GAA+B,GAAlD,CAAd;EACA,IAAI/F,IAAI,GAAGlM,WAAW,CAAC8R,KAAZ,CAAkBjR,MAAlB,EAA0BkR,KAA1B,CAAX;EACA,OAAOtJ,uBAAU6J,aAAV,CAAwBpG,IAAxB,EAAiD4C,KAAjD,CAAP;AACD,CALD;;AAcA9O,WAAW,CAACuS,QAAZ,GAAuB,UAAU1R,MAAV,EAA6BkR,KAA7B,EAA+C7C,QAA/C,EAAgE;EACrFrO,MAAM,CAACE,IAAP,CAAYgR,KAAZ;EACAtJ,uBAAU+J,WAAV,CAAsB3R,MAAtB;EACA,OAAOA,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,UAA1B,EAAsCiO,QAAtC,EACLjK,WADK,CACO,MADP,EACe8M,KAAK,CAACE,OAAN,EADf,CAAP;AAED,CALD;;AAiBAjS,WAAW,CAACyS,QAAZ,GAAuB,UAAS5R,MAAT,EAA4BkR,KAA5B,EACS7C,QADT,EAC4BwD,QAD5B,EAES5D,KAFT,EAEwBC,OAFxB,EAEuC;EAE5DlO,MAAM,CAACE,IAAP,CAAYgR,KAAZ;;EACA,IAAIW,QAAJ,EAAc;IACZjK,uBAAU+J,WAAV,CAAsB3R,MAAtB;EACD;;EACDiO,KAAK,GAAGA,KAAK,CAAC5I,OAAN,CAAc,SAAd,EAAyB,EAAzB,EAA6BiL,KAA7B,CAAmC,EAAnC,EAAuCpG,IAAvC,CAA4C,GAA5C,CAAR;EACA+D,KAAK,GAAGA,KAAK,CAAC5I,OAAN,CAAc,IAAd,EAAoB,MAApB,EAA4BA,OAA5B,CAAoC,IAApC,EAA0C,OAA1C,EAAmDA,OAAnD,CAA2D,IAA3D,EAAiE,QAAjE,CAAR;EACA,IAAIyM,OAAO,GAAG9R,MAAM,CAACG,WAAP,CAAmBC,MAAnB,CAA0B,UAA1B,EAAsC8Q,KAAK,CAACE,OAAN,EAAtC,EAC0B/C,QAD1B,EACoCwD,QADpC,EAC8C7R,MAAM,CAACoB,KAAP,CAAa+F,MAD3D,CAAd;EAEA2K,OAAO,CAACvD,QAAR,GAAmB;IACjBlK,YAAY,EAAE,IADG;IAEjBsK,WAAW,EAAEV,KAFI;IAGjBQ,aAAa,EAAGP,OAAO,IAAI,KAHV;IAIjBM,UAAU,EAAE,KAJK;IAKjBE,IAAI,EAAE1O,MAAM,CAAC+R,OAAP,CAAe,SAAf,CALW;IAMjBC,eAAe,EAAEhS,MAAM,CAAC+R,OAAP,CAAe,WAAf;EANA,CAAnB;EAQA,OAAOD,OAAP;AACD,CArBD;;AA6BA3S,WAAW,CAAC8S,WAAZ,GAA0B,UAASjS,MAAT,EAA4BgE,KAA5B,EAAyC;EACjEhE,MAAM,CAACkS,IAAP,CAAYC,KAAZ;AACD,CAFD;;AAUAhT,WAAW,CAACiT,WAAZ,GAA0B,UAASpS,MAAT,EAA4BmD,IAA5B,EAAwC;EAEhE,IAAIkP,KAAK,GAAGrS,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAZ;;EACA,IAAIkP,KAAK,KAAK,EAAd,EAAkB;IAEhB;EACD;;EACD,IAAI,CAACrS,MAAM,CAACkS,IAAP,CAAYI,SAAjB,EAA4B;IAE1B,IAAItS,MAAM,CAACkS,IAAP,CAAYG,KAAhB,EAAuB;MAErB,MAAM,IAAIlQ,qBAAJ,CAAa,iBAAb,EAAgC,aAAhC,EAA+CnC,MAAM,CAACgG,SAAtD,CAAN;IACD;;IACDhG,MAAM,CAACkS,IAAP,CAAYG,KAAZ,GAAoBA,KAApB;;IACA,IAAI,CAACrS,MAAM,CAACkS,IAAP,CAAYK,SAAZ,CAAsBF,KAAtB,KAAgCrS,MAAM,CAACkS,IAAP,CAAYM,MAAZ,CAAmBH,KAAnB,CAAjC,KAA+D,CAACrS,MAAM,CAAC+R,OAAP,CAAe,uBAAf,CAApE,EAA6G;MAE3G,MAAM,IAAI5P,qBAAJ,CAAa,eAAb,EAA8B,+BAA9B,EAA+DkQ,KAA/D,CAAN;IACD;;IAEDrS,MAAM,CAACkS,IAAP,CAAYM,MAAZ,CAAmBH,KAAnB,IAA4B,IAAII,eAAJ,EAA5B;EACD;AACF,CArBD;;AA8BAtT,WAAW,CAACuT,SAAZ,GAAwB,UAAS1S,MAAT,EAA4BmD,IAA5B,EAA0CwP,KAA1C,EAAwD;EAE9E,IAAIN,KAAK,GAAGrS,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAZ;EACA,IAAIyP,GAAG,GAAG5S,MAAM,CAACkS,IAAP,CAAYK,SAAZ,CAAsBF,KAAtB,KAAgCrS,MAAM,CAACkS,IAAP,CAAYM,MAAZ,CAAmBH,KAAnB,CAA1C;;EACA,IAAI,CAACO,GAAL,EAAU;IAER,IAAI,CAAC5S,MAAM,CAACkS,IAAP,CAAYI,SAAjB,EAA4B;MAC1BtS,MAAM,CAACkS,IAAP,CAAYW,IAAZ,GAAmB,IAAnB;IACD;;IACDD,GAAG,GAAG,IAAIH,eAAJ,EAAN;EACD;;EACD,IAAIK,GAAG,GAAGF,GAAG,CAACE,GAAd;;EACA,IAAIH,KAAJ,EAAW;IAETG,GAAG,GAAG9S,MAAM,CAACkS,IAAP,CAAYa,SAAZ,CAAsBD,GAAtB,CAAN;EACD;;EACD,IAAIjQ,IAAI,GAAG7C,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,MAAtB,EAA8BwH,uBAAUsF,YAAV,CAAuBlN,MAAvB,EAA+B8S,GAA/B,CAA9B,EAAmE;IAC5EjT,IAAI,EAAEG,MAAM,CAACkS,IAAP,CAAYc,SAAZ,CAAsBJ,GAAG,CAAChT,EAA1B,EAA8BI,MAAM,CAAC+R,OAAP,CAAekB,OAA7C,CADsE;IACf,SAAS;EADM,CAAnE,CAAX;EAGAjT,MAAM,CAACE,IAAP,CAAY2C,IAAZ;AACD,CApBD;;AA2BA1D,WAAW,CAAC+T,KAAZ,GAAoB,UAASlT,MAAT,EAA4BmD,IAA5B,EACSuN,KADT,EACwByC,QADxB,EAES/L,GAFT,EAEqB;EACvC,IAAI+L,QAAJ,EAAc;IACZ,IAAMrC,IAAI,GAAa,EAAvB;;IACA,IAAI1J,GAAG,IAAI,IAAX,EAAiB;MACf,IAAMgM,QAAQ,GAAGpT,MAAM,CAAC8G,WAAP,CAAmB3D,IAAnB,CAAjB;MACA2N,IAAI,CAAC7G,IAAL,CAAUmJ,QAAQ,IAAI,IAAZ,GAAmBhM,GAAnB,GAAyBgM,QAAnC;IACD;;IACD,KAAK,IAAIpS,CAAC,GAAG8P,IAAI,CAAClO,MAAlB,EAA0B5B,CAAC,GAAGmS,QAA9B,EAAwCnS,CAAC,EAAzC,EAA6C;MAC3C8P,IAAI,CAAC7G,IAAL,CAAUjK,MAAM,CAACsD,WAAP,CAAmBH,IAAnB,CAAV;IACD;;IACDuN,KAAK,GAAG9I,uBAAUyL,cAAV,CAAyBrT,MAAzB,EAAiC8Q,IAAjC,EAAuCJ,KAAvC,CAAR;EACD;;EACD1Q,MAAM,CAACc,MAAP,GAAgB8G,uBAAU0L,OAAV,CAAkBtT,MAAlB,EAA0B0Q,KAA1B,EAAiC1Q,MAAM,CAACc,MAAP,CAAcyK,KAAd,CAAoBvL,MAAM,CAACgB,CAA3B,CAAjC,CAAhB;EACAhB,MAAM,CAACgB,CAAP,GAAW,CAAX;EACA4G,uBAAUmJ,cAAV,CAAyB/Q,MAAzB;AACD,CAjBD;;AA0BAb,WAAW,CAACoU,UAAZ,GAAyB,UAASvT,MAAT,EAA4BmD,IAA5B,EAAwC;EAC/D,IAAMqQ,CAAC,GAAIxT,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAX;EACA,IAAMsQ,CAAC,GAAIzT,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAX;EACA,IAAMuQ,CAAC,GAAI1T,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAX;EACA,IAAMwQ,EAAE,GAAG3T,MAAM,CAAC0G,QAAP,CAAgBvD,IAAhB,CAAX;EACAnD,MAAM,CAACE,IAAP,CAAYF,MAAM,CAACI,MAAP,CAAc,MAAd,EAAsB,YAAtB,EAAoC,CAACoT,CAAD,EAAIC,CAAJ,EAAOC,CAAP,EAAUC,EAAV,CAApC,CAAZ;AACD,CAND;;AASAC,kBAAezU,WAAf","names":["BaseMethods","P_HEIGHT","MmlTokenAllow","fontfamily","fontsize","fontweight","fontstyle","color","background","id","href","style","Open","parser","_c","Push","itemFactory","create","Close","Tilde","Entities_js_1","nbsp","Space","_parser","Superscript","GetNext","match","string","substr","i","primes","base","top","stack","Top","isKind","_a","Peek","Pop","Prev","movesupsub","NodeUtil_js_1","getProperty","position","isType","sup","over","getChildAt","TexError_js_1","setProperties","Subscript","sub","under","Prime","c","prime","rsquo","length","node","variantForm","Comment","charAt","Hash","MathFont","name","variant","text","GetArgument","mml","TexParser_js_1","__assign","env","font","multiLetterIdentifiers","noAutoOP","configuration","SetFont","_name","SetStyle","texStyle","level","setProperty","displaystyle","scriptlevel","SetSize","size","mathsize","Spacer","space","width","LeftRight","first","GetDelimiter","NamedFn","texClass","MmlNode_js_1","OP","NamedOp","replace","movablelimits","form","TexConstants_js_1","Form","PREFIX","Limits","limits","op","getTexClass","getCoreMO","currentCS","copyChildren","Last","getAttribute","Over","open","close","GetDimen","Frac","num","ParseArg","den","Sqrt","n","GetBrackets","arg","parseRoot","inRoot","newParser","global","def","Root","GetUpTo","MoveRoot","parseInt","Accent","accent","stretchy","ParseUtil_js_1","getFontDef","mathaccent","entity","createEntity","moNode","setAttribute","mo","isEmbellished","muoNode","setChild","texAtom","UnderOver","pos","underOver","Overset","checkMovableLimits","Underset","bot","accentunder","Overunderset","TeXAtom","mclass","parsed","Variant","NORMAL","MmlToken","kind","attr","keep","e","isToken","attributes","hasDefault","value","MmlFilterAttribute","toLowerCase","push","join","textNode","appendChild","Strut","row","padded","height","depth","Phantom","v","h","box","atom","Smash","bt","trimSpaces","smash","Lap","RaiseLower","item","move","slice","MoveLeftRight","nh","tmp","left","right","Hskip","Nonscript","Rule","w","d","rule","mathbackground","voffset","MakeBig","sizeStr","String","delim","minsize","maxsize","fence","symmetric","BuildRel","ParseUpTo","REL","HBox","PushAll","internalMath","FBox","internal","notation","FrameBox","l","r","ORD","Not","Dots","ldotsEntity","cdotsEntity","ldots","cdots","Matrix","align","spacing","vspacing","cases","numbered","array","arraydef","rowspacing","columnspacing","side","columnalign","Entry","isEntry","str","braces","m","end","RegExp","rest","Cr","isCR","CrLaTeX","nobrackets","dim","matchDimen","unit","linebreak","sitem","ArrayItem","addRowSpacing","LineBreak","NEWLINE","HLine","Size","table","frame","lines","split","HFill","hfill","BeginEnd","macro","handlers","get","lookup","args","checkMaxMacros","parse","Array","begin","raggedHeight","getName","dashed","columnlines","convertDelimiter","AlignedArray","setArrayAlign","Equation","checkEqnEnv","EqnArray","taggable","newItem","options","minlabelspacing","HandleNoTag","tags","notag","HandleLabel","label","refUpdate","allLabels","labels","Tags_js_1","HandleRef","eqref","ref","redo","tag","formatTag","formatUrl","baseURL","Macro","argcount","optional","substituteArgs","addArgs","MathChoice","D","T","S","SS","exports"],"sourceRoot":"","sources":["../../../../ts/input/tex/base/BaseMethods.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}