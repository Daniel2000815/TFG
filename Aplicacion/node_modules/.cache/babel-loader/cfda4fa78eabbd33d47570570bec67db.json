{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\daniz\\\\TFG\\\\Aplicacion\\\\src\\\\CustomNode.js\";\nimport React, { useEffect, useContext } from \"react\";\nimport { Handle } from \"react-flow-renderer\";\nimport Shader from \"./Shader\";\nimport { fs } from \"./fragmentShader\";\nimport Dropdown from \"./Dropdown\";\nimport CustomHandle from \"./CustomHandle\";\nimport GraphContext from \"./GraphContext.js\";\nimport Button from \"@mui/material/Button\";\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\nvar BooleanOperations = {\n  Union: \"Union\",\n  Difference: \"Difference\",\n  Intersection: \"Intersection\"\n};\nexport default function Boolean(_ref) {\n  var data = _ref.data,\n      id = _ref.id;\n\n  var _React$useState = React.useState(BooleanOperations.Union),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      operation = _React$useState2[0],\n      setOperation = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      sdf = _React$useState4[0],\n      setSdf = _React$useState4[1];\n\n  useEffect(function () {\n    console.log(\"SE HAN MODIFICADO LOS SDF EN NODO BOOLEANO. AHORA HAY \".concat(Object.keys(data.inputs).length));\n    var inputs = \"\".concat(Object.keys(data.inputs).map(function (key) {\n      return \"\".concat(data.inputs[key]);\n    }).join(\", \"));\n    console.log(inputs);\n    if (operation === BooleanOperations.Union) setSdf(\"min(\".concat(inputs, \")\"));else if (operation === BooleanOperations.Intersection) setSdf(\"max(\".concat(inputs, \")\"));else if (operation === BooleanOperations.Difference) setSdf(\"max(-\".concat(inputs, \")\"));\n  }, [data, operation]);\n  return /*#__PURE__*/React.createElement(CustomNode, {\n    id: id,\n    data: data,\n    dropdownOptions: Object.values(BooleanOperations),\n    onChangeOption: setOperation,\n    sdf: sdf,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  });\n}\n\nfunction CustomNode(props) {\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      showCanvas = _React$useState6[0],\n      setShowCanvas = _React$useState6[1];\n\n  var sharedFunctions = useContext(GraphContext);\n  useEffect(function () {\n    console.log(\"SDF DE \".concat(props.id, \" MODIFICADO\"));\n    sharedFunctions.updateNodeSdf(props.id, props.sdf);\n  }, [props.sdf]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-node\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-node-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"!Boolean\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, \"ID: \".concat(props.id)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, \"CHILDREN:\", \" \", Object.keys(props.data.children).map(function (key) {\n    return \"\".concat(props.data.children[key]);\n  }).join(\", \")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, \"SDF: \".concat(props.sdf)), props.dropdownOptions ? /*#__PURE__*/React.createElement(Dropdown, {\n    defaultValue: props.dropdownOptions[0],\n    onChange: props.onChangeOption,\n    items: props.dropdownOptions,\n    label: \"Operation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }) : null, /*#__PURE__*/React.createElement(CustomHandle, {\n    id: \"0\",\n    type: \"target\",\n    onConnect: function onConnect(params) {\n      return console.log(\"handle ss\", params);\n    },\n    style: {\n      top: \"45%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CustomHandle, {\n    id: \"1\",\n    type: \"target\",\n    onConnect: function onConnect(params) {\n      return props.data.updateBooleanPrimitive(params.source, params.target);\n    },\n    style: {\n      top: \"55%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(CustomHandle, {\n    id: \"2\",\n    type: \"source\",\n    onConnect: function onConnect(params) {\n      return console.log(\"handle onsConnect\", params);\n    },\n    style: {\n      top: \"50%\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }), showCanvas ? /*#__PURE__*/React.createElement(Shader, {\n    shader: fs(props.sdf),\n    uniforms: {\n      color: {\n        type: \"3fv\",\n        value: [1.0, 1.0, 0.0]\n      }\n    },\n    style: {\n      margin: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }) : null, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowCanvas(!showCanvas);\n    },\n    variant: \"contained\",\n    className: \"custom-node-creater\",\n    size: \"small\",\n    endIcon: showCanvas ? /*#__PURE__*/React.createElement(KeyboardArrowUpIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 24\n      }\n    }) : /*#__PURE__*/React.createElement(KeyboardArrowDownIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 50\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, showCanvas ? \"Hide canvas\" : \"Show canvas\"));\n}","map":{"version":3,"names":["React","useEffect","useContext","Handle","Shader","fs","Dropdown","CustomHandle","GraphContext","Button","KeyboardArrowDownIcon","KeyboardArrowUpIcon","BooleanOperations","Union","Difference","Intersection","Boolean","data","id","useState","operation","setOperation","sdf","setSdf","console","log","Object","keys","inputs","length","map","key","join","values","CustomNode","props","showCanvas","setShowCanvas","sharedFunctions","updateNodeSdf","children","dropdownOptions","onChangeOption","params","top","updateBooleanPrimitive","source","target","color","type","value","margin"],"sources":["C:/Users/daniz/TFG/Aplicacion/src/CustomNode.js"],"sourcesContent":["import React, { useEffect, useContext } from \"react\";\r\nimport { Handle } from \"react-flow-renderer\";\r\nimport Shader from \"./Shader\";\r\nimport { fs } from \"./fragmentShader\";\r\nimport Dropdown from \"./Dropdown\";\r\nimport CustomHandle from \"./CustomHandle\";\r\nimport GraphContext from \"./GraphContext.js\";\r\nimport Button from \"@mui/material/Button\";\r\nimport KeyboardArrowDownIcon from \"@mui/icons-material/KeyboardArrowDown\";\r\nimport KeyboardArrowUpIcon from \"@mui/icons-material/KeyboardArrowUp\";\r\n\r\nconst BooleanOperations = {\r\n  Union: \"Union\",\r\n  Difference: \"Difference\",\r\n  Intersection: \"Intersection\",\r\n};\r\n\r\nexport default function Boolean({ data, id }) {\r\n  const [operation, setOperation] = React.useState(BooleanOperations.Union);\r\n  const [sdf, setSdf] = React.useState(\"\");\r\n\r\n  useEffect(() => {\r\n    console.log(\r\n      `SE HAN MODIFICADO LOS SDF EN NODO BOOLEANO. AHORA HAY ${\r\n        Object.keys(data.inputs).length\r\n      }`\r\n    );\r\n    const inputs = `${Object.keys(data.inputs)\r\n      .map((key) => `${data.inputs[key]}`)\r\n      .join(\", \")}`;\r\n    console.log(inputs);\r\n    if (operation === BooleanOperations.Union) setSdf(`min(${inputs})`);\r\n    else if (operation === BooleanOperations.Intersection)\r\n      setSdf(`max(${inputs})`);\r\n    else if (operation === BooleanOperations.Difference)\r\n      setSdf(`max(-${inputs})`);\r\n  }, [data, operation]);\r\n\r\n  return (\r\n    <CustomNode\r\n      id={id}\r\n      data={data}\r\n      dropdownOptions={Object.values(BooleanOperations)}\r\n      onChangeOption={setOperation}\r\n      sdf={sdf}\r\n    />\r\n  );\r\n}\r\n\r\nfunction CustomNode(props) {\r\n  const [showCanvas, setShowCanvas] = React.useState(false);\r\n\r\n  const sharedFunctions = useContext(GraphContext);\r\n\r\n  useEffect(() => {\r\n    console.log(`SDF DE ${props.id} MODIFICADO`);\r\n    sharedFunctions.updateNodeSdf(props.id, props.sdf);\r\n  }, [props.sdf]);\r\n\r\n  return (\r\n    <div className=\"custom-node\">\r\n      <div className=\"custom-node-header\">!Boolean</div>\r\n      <p>{`ID: ${props.id}`}</p>\r\n      <p>\r\n        CHILDREN:{\" \"}\r\n        {Object.keys(props.data.children)\r\n          .map((key) => `${props.data.children[key]}`)\r\n          .join(\", \")}\r\n      </p>\r\n      <p>{`SDF: ${props.sdf}`}</p>\r\n      {props.dropdownOptions ? (\r\n        <Dropdown\r\n          defaultValue={props.dropdownOptions[0]}\r\n          onChange={props.onChangeOption}\r\n          items={props.dropdownOptions}\r\n          label=\"Operation\"\r\n        />\r\n      ) : null}\r\n\r\n      <CustomHandle\r\n        id={\"0\"}\r\n        type=\"target\"\r\n        onConnect={(params) => console.log(\"handle ss\", params)}\r\n        style={{ top: \"45%\" }}\r\n      />\r\n      <CustomHandle\r\n        id={\"1\"}\r\n        type=\"target\"\r\n        onConnect={(params) =>\r\n          props.data.updateBooleanPrimitive(params.source, params.target)\r\n        }\r\n        style={{ top: \"55%\" }}\r\n      />\r\n      <CustomHandle\r\n        id={\"2\"}\r\n        type=\"source\"\r\n        onConnect={(params) => console.log(\"handle onsConnect\", params)}\r\n        style={{ top: \"50%\" }}\r\n      />\r\n\r\n      {showCanvas ? (\r\n        <Shader\r\n          shader={fs(props.sdf)}\r\n          uniforms={{ color: { type: \"3fv\", value: [1.0, 1.0, 0.0] } }}\r\n          style={{ margin: \"10px\" }}\r\n        />\r\n      ) : null}\r\n\r\n      <Button\r\n        onClick={() => setShowCanvas(!showCanvas)}\r\n        variant=\"contained\"\r\n        className=\"custom-node-creater\"\r\n        size=\"small\"\r\n        endIcon={\r\n          showCanvas ? <KeyboardArrowUpIcon /> : <KeyboardArrowDownIcon />\r\n        }\r\n      >\r\n        {showCanvas ? \"Hide canvas\" : \"Show canvas\"}\r\n      </Button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,SAASC,MAAT,QAAuB,qBAAvB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,SAASC,EAAT,QAAmB,kBAAnB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,qBAAP,MAAkC,uCAAlC;AACA,OAAOC,mBAAP,MAAgC,qCAAhC;AAEA,IAAMC,iBAAiB,GAAG;EACxBC,KAAK,EAAE,OADiB;EAExBC,UAAU,EAAE,YAFY;EAGxBC,YAAY,EAAE;AAHU,CAA1B;AAMA,eAAe,SAASC,OAAT,OAA+B;EAAA,IAAZC,IAAY,QAAZA,IAAY;EAAA,IAANC,EAAM,QAANA,EAAM;;EAC5C,sBAAkClB,KAAK,CAACmB,QAAN,CAAeP,iBAAiB,CAACC,KAAjC,CAAlC;EAAA;EAAA,IAAOO,SAAP;EAAA,IAAkBC,YAAlB;;EACA,uBAAsBrB,KAAK,CAACmB,QAAN,CAAe,EAAf,CAAtB;EAAA;EAAA,IAAOG,GAAP;EAAA,IAAYC,MAAZ;;EAEAtB,SAAS,CAAC,YAAM;IACduB,OAAO,CAACC,GAAR,iEAEIC,MAAM,CAACC,IAAP,CAAYV,IAAI,CAACW,MAAjB,EAAyBC,MAF7B;IAKA,IAAMD,MAAM,aAAMF,MAAM,CAACC,IAAP,CAAYV,IAAI,CAACW,MAAjB,EACfE,GADe,CACX,UAACC,GAAD;MAAA,iBAAYd,IAAI,CAACW,MAAL,CAAYG,GAAZ,CAAZ;IAAA,CADW,EAEfC,IAFe,CAEV,IAFU,CAAN,CAAZ;IAGAR,OAAO,CAACC,GAAR,CAAYG,MAAZ;IACA,IAAIR,SAAS,KAAKR,iBAAiB,CAACC,KAApC,EAA2CU,MAAM,eAAQK,MAAR,OAAN,CAA3C,KACK,IAAIR,SAAS,KAAKR,iBAAiB,CAACG,YAApC,EACHQ,MAAM,eAAQK,MAAR,OAAN,CADG,KAEA,IAAIR,SAAS,KAAKR,iBAAiB,CAACE,UAApC,EACHS,MAAM,gBAASK,MAAT,OAAN;EACH,CAfQ,EAeN,CAACX,IAAD,EAAOG,SAAP,CAfM,CAAT;EAiBA,oBACE,oBAAC,UAAD;IACE,EAAE,EAAEF,EADN;IAEE,IAAI,EAAED,IAFR;IAGE,eAAe,EAAES,MAAM,CAACO,MAAP,CAAcrB,iBAAd,CAHnB;IAIE,cAAc,EAAES,YAJlB;IAKE,GAAG,EAAEC,GALP;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF;AASD;;AAED,SAASY,UAAT,CAAoBC,KAApB,EAA2B;EACzB,uBAAoCnC,KAAK,CAACmB,QAAN,CAAe,KAAf,CAApC;EAAA;EAAA,IAAOiB,UAAP;EAAA,IAAmBC,aAAnB;;EAEA,IAAMC,eAAe,GAAGpC,UAAU,CAACM,YAAD,CAAlC;EAEAP,SAAS,CAAC,YAAM;IACduB,OAAO,CAACC,GAAR,kBAAsBU,KAAK,CAACjB,EAA5B;IACAoB,eAAe,CAACC,aAAhB,CAA8BJ,KAAK,CAACjB,EAApC,EAAwCiB,KAAK,CAACb,GAA9C;EACD,CAHQ,EAGN,CAACa,KAAK,CAACb,GAAP,CAHM,CAAT;EAKA,oBACE;IAAK,SAAS,EAAC,aAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAK,SAAS,EAAC,oBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,cADF,eAEE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,iBAAWa,KAAK,CAACjB,EAAjB,EAFF,eAGE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACY,GADZ,EAEGQ,MAAM,CAACC,IAAP,CAAYQ,KAAK,CAAClB,IAAN,CAAWuB,QAAvB,EACEV,GADF,CACM,UAACC,GAAD;IAAA,iBAAYI,KAAK,CAAClB,IAAN,CAAWuB,QAAX,CAAoBT,GAApB,CAAZ;EAAA,CADN,EAEEC,IAFF,CAEO,IAFP,CAFH,CAHF,eASE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,kBAAYG,KAAK,CAACb,GAAlB,EATF,EAUGa,KAAK,CAACM,eAAN,gBACC,oBAAC,QAAD;IACE,YAAY,EAAEN,KAAK,CAACM,eAAN,CAAsB,CAAtB,CADhB;IAEE,QAAQ,EAAEN,KAAK,CAACO,cAFlB;IAGE,KAAK,EAAEP,KAAK,CAACM,eAHf;IAIE,KAAK,EAAC,WAJR;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADD,GAOG,IAjBN,eAmBE,oBAAC,YAAD;IACE,EAAE,EAAE,GADN;IAEE,IAAI,EAAC,QAFP;IAGE,SAAS,EAAE,mBAACE,MAAD;MAAA,OAAYnB,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBkB,MAAzB,CAAZ;IAAA,CAHb;IAIE,KAAK,EAAE;MAAEC,GAAG,EAAE;IAAP,CAJT;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAnBF,eAyBE,oBAAC,YAAD;IACE,EAAE,EAAE,GADN;IAEE,IAAI,EAAC,QAFP;IAGE,SAAS,EAAE,mBAACD,MAAD;MAAA,OACTR,KAAK,CAAClB,IAAN,CAAW4B,sBAAX,CAAkCF,MAAM,CAACG,MAAzC,EAAiDH,MAAM,CAACI,MAAxD,CADS;IAAA,CAHb;IAME,KAAK,EAAE;MAAEH,GAAG,EAAE;IAAP,CANT;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAzBF,eAiCE,oBAAC,YAAD;IACE,EAAE,EAAE,GADN;IAEE,IAAI,EAAC,QAFP;IAGE,SAAS,EAAE,mBAACD,MAAD;MAAA,OAAYnB,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCkB,MAAjC,CAAZ;IAAA,CAHb;IAIE,KAAK,EAAE;MAAEC,GAAG,EAAE;IAAP,CAJT;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAjCF,EAwCGR,UAAU,gBACT,oBAAC,MAAD;IACE,MAAM,EAAE/B,EAAE,CAAC8B,KAAK,CAACb,GAAP,CADZ;IAEE,QAAQ,EAAE;MAAE0B,KAAK,EAAE;QAAEC,IAAI,EAAE,KAAR;QAAeC,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX;MAAtB;IAAT,CAFZ;IAGE,KAAK,EAAE;MAAEC,MAAM,EAAE;IAAV,CAHT;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADS,GAMP,IA9CN,eAgDE,oBAAC,MAAD;IACE,OAAO,EAAE;MAAA,OAAMd,aAAa,CAAC,CAACD,UAAF,CAAnB;IAAA,CADX;IAEE,OAAO,EAAC,WAFV;IAGE,SAAS,EAAC,qBAHZ;IAIE,IAAI,EAAC,OAJP;IAKE,OAAO,EACLA,UAAU,gBAAG,oBAAC,mBAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAAH,gBAA6B,oBAAC,qBAAD;MAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAAA,EAN3C;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GASGA,UAAU,GAAG,aAAH,GAAmB,aAThC,CAhDF,CADF;AA8DD"},"metadata":{},"sourceType":"module"}